"use strict";(self.webpackChunk_snowflake_nu_ui=self.webpackChunk_snowflake_nu_ui||[]).push([["67269"],{40891:function(e,t,a){a.d(t,{i:()=>r});var n=a(847345);function r(e,t){let a=n.useRef(0),r=n.useRef(e);n.useEffect(()=>{r.current=e},[e]);let s=n.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=window.setTimeout(()=>{r.current&&(r.current()?s():t())})},[t]);n.useEffect(()=>(r.current&&(r.current()?s():t()),()=>{a.current&&window.clearTimeout(a.current),r.current=null}))}},172890:function(e,t,a){a.d(t,{Y:()=>o});var n=a(847345),r=a(803700),s=a(341319);function o(e,t){let[a,o]=n.useState(!1),i=null==t?void 0:t.current,l=n.useCallback(()=>{let t,n,s;if(!a&&(i instanceof HTMLElement?(t=new r.d(i.scrollLeft,i.scrollTop),s=r.d.getElementDimensions(i),n=new r.d(i.scrollWidth,i.scrollHeight)):(t=r.d.getScrollPosition("raw"),n=new r.d(document.documentElement.offsetWidth,document.documentElement.offsetHeight),s=r.d.getViewportDimensions()),t.y>n.y-2*s.y))try{o(!0);let t=e();t instanceof Promise?t.then(e=>o(!e),()=>o(!1)):o(!t)}catch(e){throw o(!1),e}},[e,i,a,o]),d=n.useMemo(()=>(0,s.P2)(l,100),[l]);return n.useEffect(()=>{let e=i||window;return l(),a||e.addEventListener("scroll",d),()=>{e.removeEventListener("scroll",d)}},[a,i,d,l]),a}},224732:function(e,t,a){a.d(t,{HW:()=>E,U6:()=>y,jl:()=>f});var n=a(286204),r=a(645595),s=a(847345),o=a(797325),i=a(314040),l=a(372366),d=a(493076),u=a(887463),c=a(173624),m=a(70734),p=a(186692);let h=s.createContext("");function E(e,t={}){let a=(0,l.h)(),r=(0,l.h)();return t.rootProps=t.rootProps||{},t.rootProps={...t.rootProps,role:"alertdialog","aria-labelledby":a,"aria-describedby":r},(0,m.Rh)(t=>(0,n.jsx)(h.Provider,{value:r,children:"function"==typeof e&&t?e(t):e}),t)}h.displayName="ConfirmationDialogAncestor";let y=s.memo(e=>{let{onShow:t,onBeforeShow:a,onHide:r,onBeforeHide:s,behaviors:o,disabledDefaultBehaviors:i,manuallyShown:l,causalElement:d,rootProps:u,layerRef:c,...m}=e,[p]=E((0,n.jsx)(f,{...m}),{...t?{onShow:t}:{},...a?{onBeforeShow:a}:{},...r?{onHide:r}:{},...s?{onBeforeHide:s}:{},...o?{behaviors:o}:{},...i?{disabledDefaultBehaviors:i}:{},...void 0!==l?{manuallyShown:l}:{},...d?{causalElement:d}:{},...c?{layerRef:c}:{},rootProps:{...u,"aria-busy":m.body?"false":"true"}});return p},r.Z),f=s.memo(e=>{let{accessibleTitle:t,body:a,confirmLabel:r,cancelLabel:l,loadingContent:E,title:y,onConfirm:f,onCancel:g,confirmUse:S="primary",rootDialogProps:_,rootProps:A,subtitle:I,disabled:T,inProgress:R,confirmTooltip:C,confirmTooltipConfig:O,auxiliaryContent:N}=e,{formatMessage:v}=(0,o.Z)(),b=s.useRef(!a),M=[(0,n.jsx)(p.N,{disabled:T||!a,...void 0!==R?{inProgress:R}:{},use:S||"primary",onClick:a?f:void 0,...C?{tooltip:C}:{},tooltipAlign:"topcenter",...O?{tooltipConfig:O}:{},children:r},"confimConfirm")],w={paddingTop:"32px"},L=s.useContext(h),D=(0,n.jsx)(n.Fragment,{});y?(D=(0,n.jsxs)(m.fK,{paddingTop:24,height:"inherit",borderBottomWidth:"0px",textAlign:"center",children:[(0,n.jsx)(c.x,{wordBreak:"break-word",children:y}),(0,n.jsx)(c.x,{weight:"default",size:"small",color:d.Q2.secondaryTextColor,children:I})]}),w.paddingTop="24px"):t?D=(0,n.jsx)(m.fK,{...(0,d.vL)(),children:t}):console.error("You must provide either a title or accessibleTitle to <ConfirmationDialog>."),l&&r&&M.push((0,n.jsx)(p.N,{use:"default",marginRight:8,onClick:g,children:l},"confirmationdialogcancel"));let P=s.useRef(null);s.useLayoutEffect(()=>{a&&b.current&&P.current&&(P.current.style.height=`${P.current.scrollHeight}px`,P.current.style.opacity="1",P.current.style.position="static",P.current.style.visibility="visible"),b.current=!a},[b,a,P]);let x=b.current?{height:"17px",opacity:"0",position:"absolute",width:"350px"}:{};return(0,n.jsxs)(m.Pb,{animationName:{"0%":{opacity:0,transform:"scale(0.9)"},"100%":{opacity:1,transform:"scale(1)"}},animationDuration:"0.2s",animationIterationCount:"1",animationTimingFunction:"ease",maxWidth:"400px",minWidth:"400px",width:"400px",..._,rootProps:{...A,alignItems:"center",flexGrow:1},children:[D,(0,n.jsx)(m.a7,{display:"flex",flexDirection:"column",...w,id:L,children:a?(0,n.jsx)(u.s,{"aria-live":b.current?"polite":void 0,ref:P,transitionDelay:"0s, 0s, 0.05s",transitionDuration:"0.25s, 0.25s, 0.2s",transitionProperty:"height, visibility, opacity",transitionTimingFunction:"ease-in-out, step-start, ease-in",minHeight:0,...x,children:a}):(0,n.jsx)(i.g,{animationName:{"0%":{opacity:"0"}},animationDelay:"0.15s",animationDuration:"0.25s",animationTimingFunction:"ease-in",animationFillMode:"both",animationIterationCount:"1",textAlign:"center",opacity:"1",children:null!=E?E:v({id:"Loading..."})})}),(0,n.jsx)(m.cN,{paddingBottom:24,height:"inherit",borderTopWidth:"0px",...N?{auxiliaryContent:N}:{},children:(0,n.jsx)(i.g,{display:"flex",flexDirection:"row-reverse",children:M})})]})},r.Z)},186692:function(e,t,a){a.d(t,{I:()=>u,N:()=>c});var n=a(286204),r=a(847345),s=a(314040),o=a(668469),i=a(90373),l=a(253177),d=a(570997);function u(e){var t;let a=r.useContext(d.iL),o=e.disabled||null==(t=a.current)?void 0:t.hideLayer,i=r.useCallback(e=>{((0,l.mm)(e.key)||"Enter"===e.key)&&(null==o||o())},[o]);return(0,n.jsx)(s.g,{...o?{nonAccessibleOnClick:o}:{},onKeyUp:i,children:e.children})}function c(e){let{onClick:t,disabled:a,...s}=e,l=r.useContext(d.iL),{setDisabled:u}=r.useContext(i.LO),c=r.useRef(),m=(0,o.k)(t,l.current.hideLayer),p=r.useCallback(e=>{u&&u(!0);try{m(e)}finally{c.current&&u&&u(!1)}},[u,m,c]);return(0,n.jsx)(i.zx,{onClick:p,ref:c,disabled:a,...s,children:e.children})}},29270:function(e,t,a){a.d(t,{Bl:()=>w,v2:()=>L,xz:()=>D});var n=a(286204),r=a(801726),s=a(847345),o=a(314040),i=a(780878),l=a(78633),d=a(565763),u=a(50922),c=a(544587),m=a(499592),p=a(213714),h=a(372366),E=a(493076),y=a(471716),f=a(90373),g=a(514227),S=a(589473),_=a(467947),A=a(423894),I=a(325005),T=a(222182),R=a(423482),C=a(797611),O=a(173624),N=a(341319),v=a(253177),b=a(242291);let M=s.createContext({level:0});function w(e,t,{behaviors:a,disabledDefaultBehaviors:r,onBeforeShow:o,rootProps:d,...u}={},c){let m=[I.o,A.z].filter(e=>!(r||[]).includes(e)).concat(a||[]),p=s.useContext(i.w),[h,E]=s.useState(!p.tabbing),y=(0,l.N)(e);return(0,S.hh)(e=>(0,n.jsx)(P,{...y,usingMouse:h,setUsingMouse:E,hideLayer:e.hideLayer,...c}),t,{behaviors:m,disabledDefaultBehaviors:[_.T].concat(r||[]),offset:4,onBeforeShow:()=>{var e;return E(!p.tabbing),null==(e=null==o?void 0:o())||e},rootProps:{role:void 0,...d},...u})}let L=(0,r.t)("Menu",(e,t)=>{let{options:a,onOptionSelect:r,config:i,children:l,onClick:d,telemetryComponent:m,labelledBy:p,mode:E="single-select",...y}=e,f=s.useRef(null),g=(0,h.h)(),[S,{showLayer:_}]=w({mode:E,options:a,onOptionSelect:r,labelledBy:g,...void 0!==m?{telemetryComponent:m}:{}},f,i),A=(0,u.j)(_,d);return(0,n.jsxs)(o.g,{ref:(0,c.r)(f,t),id:g,onClick:A,...y,children:[l,S]})}),D=(0,r.t)("ButtonMenu",(e,t)=>{let{options:a,onOptionSelect:r,config:o={},children:i,onClick:l,labelledBy:d,telemetryComponent:m,...p}=e,E=s.useRef(null),{onShow:y,onHide:g}=o,[S,_]=s.useState(!1),A=(0,h.h)(),[I,{showLayer:T}]=w({options:a,onOptionSelect:r,labelledBy:d||A,...void 0!==m?{telemetryComponent:m}:{}},E,{...o,onShow:()=>{_(!0),null==y||y()},onHide:()=>{_(!1),null==g||g()}}),R=(0,u.j)(l,T);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.zx,{ref:(0,c.r)(E,t),id:d||A,onClick:R,pressed:S,"aria-pressed":void 0,...void 0!==m?{telemetryComponent:m}:{},...p,children:i}),I]})});function P(e){let{options:t,onOptionSelect:a,hideLayer:r,usingMouse:i,setUsingMouse:l,labelledBy:u,telemetryComponent:c,mode:h="single-select",fontSize:E,fontWeight:y,color:f,navStyle:g,...S}=e,_=s.useContext(M),A=s.useRef(null),I=s.useRef(""),T=s.useRef(""),[R,C]=s.useState({key:G(t)}),[O,b]=s.useState(""),[w,L]=(0,p.i)(),D=(0,d.t)(),P=s.useCallback(()=>{r();let e=G(t);I.current=e,D.current&&(C({key:e}),b(""))},[b,r,t,D]),k=s.useCallback((e,t,a)=>{e?I.current=t:C({key:t,...void 0!==a?{id:a}:{}})},[C,I]),U=(0,m.Z)(a),F=s.useCallback(e=>{U(e),I.current=e,"single-select"===h&&P()},[U,I,h,P]),q=s.useCallback(e=>{let a=i?{key:I.current}:R;if(l(!1),e.ctrlKey||e.altKey||e.metaKey)return;if(!["Up","ArrowUp","Down","ArrowDown","Left","ArrowLeft","Right","ArrowRight","Enter"," ","Tab","PageUp","PageDown","End","Home"].includes(e.key))return L(e.key);e.preventDefault();let n=B(t);if((0,v.bC)(e.key)){if(a.key){let e=n.find(e=>e.key===a.key);e&&e.subOptions&&e.subOptions.length&&b(e.key)}}else if((0,v.jv)(e.key))_.level>0&&P();else if((0,v.er)(e.key)||(0,v.dq)(e.key)){let t=n.length?n[0].key:"",r=a.key||t;if(r){let t=n.findIndex(e=>e.key===r);-1!==t&&((t+=(0,v.er)(e.key)?-1:1)<0?t=n.length-1:t>=n.length&&(t=0),k(!1,n[t].key))}}else"PageDown"===e.key||"End"===e.key?k(!1,n[n.length-1].key):"PageUp"===e.key||"Home"===e.key?k(!1,n[0].key):(0,v.mm)(e.key)||"Enter"===e.key||"Tab"===e.key&&P()},[P,R,k,t,_.level,i,l,I,L]),$=s.useCallback(e=>{if(["Enter"," "].includes(e.key)){let e=i?{key:I.current}:R;if(""!==e.key){let a=B(t).find(t=>t.key===e.key);a&&a.subOptions&&a.subOptions.length?b(a.key):(F(e.key),P())}}},[i,R,F,P,b,t]);if(T.current!==w){T.current=w;let e=B(t),a=(0,N.lb)(e,w,e=>e.menuItemContent.label);null!=a&&k(!1,a.key)}return(0,n.jsx)(o.g,{"aria-activedescendant":R.id,"aria-labelledby":u,maxHeight:"inherit",maxWidth:"510px",overflowY:"auto",padding:[8,0],onKeyDown:q,onKeyUp:$,ref:A,role:"listbox",tabIndex:0,":focus":{boxShadow:"none",outlineStyle:"none"},...S,children:t.map((e,t)=>(0,n.jsx)(x,{openSubMenuKey:O,setOpenSubMenuKey:b,option:e,menuRef:A,mode:h,highlightedKey:R.key,onOptionSelect:F,onHighlight:k,usingMouse:i,setUsingMouse:l,...void 0!==c?{telemetryComponent:c}:{},textProps:{fontSize:E,fontWeight:y,color:f},menuIndex:t,navStyle:g||!1},t))})}let x=(0,r.t)("MenuOptionItem",(e,t)=>{let{openSubMenuKey:a,option:r,highlightedKey:s,menuRef:o,mode:i,onOptionSelect:l,onHighlight:d,setOpenSubMenuKey:u,usingMouse:c,setUsingMouse:m,telemetryComponent:p,textProps:h,menuIndex:f,navStyle:g}=e;return r.hasOwnProperty("key")?(0,n.jsx)(k,{ref:t,openSubMenuKey:a,setOpenSubMenuKey:u,option:r,menuRef:o,mode:i,highlighted:!c&&s===r.key,onOptionSelect:l,onHighlight:d,usingMouse:c,setUsingMouse:m,...void 0!==p?{telemetryComponent:p}:{},...null!=h&&{textProps:h}},r.key):r.hasOwnProperty("divider")?(0,n.jsx)(q,{ref:t}):r.hasOwnProperty("title")?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(O.x,{...(0,y.b)([0===f?g?4:8:"12px",16,"6px"]),color:E.Q2.secondaryTextColor,size:g?"default":"small",weight:"semi-bold",display:"block",children:r.title}),r.options.map((e,r)=>(0,n.jsx)(k,{ref:0===r?t:null,openSubMenuKey:a,setOpenSubMenuKey:u,option:e,mode:i,menuRef:o,highlighted:!c&&s===e.key,onOptionSelect:l,onHighlight:d,usingMouse:c,setUsingMouse:m,...void 0!==p?{telemetryComponent:p}:{},...null!=h&&{textProps:h}},e.key))]}):(0,n.jsx)(n.Fragment,{})}),k=(0,r.t)("MenuItem",(e,t)=>{let{openSubMenuKey:a,option:r,highlighted:i,menuRef:l,onOptionSelect:d,onHighlight:u,setOpenSubMenuKey:m,usingMouse:p,setUsingMouse:f,telemetryComponent:g,mode:S,textProps:_}=e,{disabled:A,key:I,menuItemContent:N,selected:v,subOptions:M,tooltip:w,telemetryName:L,telemetryData:D,showPreviewPill:P,dataTestId:x}=r,{iconLeft:k,label:q,sublabel:B,shouldTruncateSublabel:G=!0,customItemRenderer:V}=N,j=(0,h.h)(),Q=s.useRef(null),H=s.useRef(()=>{}),W=A?E.Q2.disabledTextColor:v?i?E.Q2.selectedHoverTextColor:E.Q2.selectedTextColor:E.Q2.primaryTextColor,K=A?E.Q2.disabledTextColor:v?i?E.Q2.selectedHoverTextColor:E.Q2.selectedTextColor:E.Q2.secondaryTextColor,J=[];V?J.push((0,n.jsx)(o.g,{color:W,flexGrow:1,minWidth:0,children:V},"label")):(k&&("string"==typeof k?J.push((0,n.jsx)(T.JO,{flexShrink:0,icon:k,color:W,marginRight:12},"left")):J.push((0,n.jsx)(o.g,{alignSelf:"center",color:W,display:"flex",justifyContent:"center",height:16,marginRight:12,width:16,children:k},"left"))),J.push((0,n.jsxs)(o.g,{color:W,flexGrow:1,minWidth:0,children:[(0,n.jsx)(U,{label:q,...(null==B?void 0:B.length)?{weight:"semi-bold"}:{}}),(null==B?void 0:B.length)&&(0,n.jsx)(F,{color:K,sublabel:B,shouldTruncateSublabel:G})]},"label"))),P&&J.push((0,n.jsx)(C.l,{marginLeft:12},"preview")),v&&J.push((0,n.jsx)(T.JO,{flexShrink:0,icon:"check-bold",color:A?E.Q2.disabledTextColor:i?E.Q2.selectedHoverTextColor:E.Q2.selectedTextColor,marginLeft:12},"right"));let z=(0,n.jsx)(b.X,{align:"left",...(0,y.b)([8,16]),verticalAlign:"middle",children:J});M&&M.length&&(J.push((0,n.jsx)(T.JO,{color:E.Q2.secondaryTextColor,flexShrink:0,icon:"chevron-right-bold",marginLeft:12,verticalAlign:"middle"},"right")),z=(0,n.jsx)($,{options:M||[],onOptionSelect:e=>{d(e)},mode:S,open:a===I,openLayerRef:H,itemRef:Q,menuRef:l,labelledBy:j,children:z}));let Y=s.useRef(0),Z=s.useCallback(()=>{A||(u(!0,I,j),f(!0),M&&M.length?a!==I&&(Y.current=window.setTimeout(()=>{Y.current=0,m(I)},150)):(m(""),Y.current&&window.clearTimeout(Y.current),Y.current=0))},[u,I,A,j,f,Y,a,m,M]),X=s.useCallback(()=>{Y.current&&window.clearTimeout(Y.current),Y.current=0},[Y]),ee=s.useCallback(e=>{if(r.href&&(e.ctrlKey||e.metaKey)){window.open(r.href,"_blank"),e.preventDefault(),e.stopPropagation();return}M&&M.length?(setTimeout(H.current,0),m(I),Y.current&&window.clearTimeout(Y.current),Y.current=0):d(I)},[r.href,M,m,I,d]),et=(0,n.jsx)(O.x,{"aria-disabled":A?"true":void 0,"aria-selected":i||a===I?"true":void 0,backgroundColor:i||a===I?E.Q2.tableRowHoverColor:"transparent",cursor:A?"default":"pointer","data-testid":x,display:"block",id:j,...!A?{nonAccessibleOnClick:ee}:{},onMouseOver:A?void 0:Z,onMouseOut:A?void 0:X,outlineStyle:"none",ref:(0,c.r)(Q,t),role:"option",size:"default",...w?{tooltip:w}:{},...void 0!==L?{telemetryName:L}:{},telemetryData:D,...void 0!==g?{telemetryComponent:g}:{},":hover":p&&!A?{backgroundColor:E.Q2.tableRowHoverColor}:{},..._,children:z});return r.href?(0,n.jsx)(R.r,{href:r.href,download:r.download,children:et}):et}),U=e=>{let{label:t,weight:a}=e;return(0,n.jsx)(g.O,{children:(0,n.jsx)(O.x,{...a?{weight:a}:{},children:t})})},F=e=>{let{color:t,shouldTruncateSublabel:a,sublabel:r}=e,s=(0,n.jsx)(O.x,{color:t,size:"small",children:r});return a?(0,n.jsx)(g.O,{children:s}):s},q=(0,r.t)("DividerMenuItem",(e,t)=>(0,n.jsx)(o.g,{backgroundColor:E.Q2.borderColor,height:"1px",marginTop:8,marginBottom:8,ref:t}));function $(e){let{children:t,itemRef:a,openLayerRef:r,menuRef:o,onHide:i,onOptionSelect:l,open:d,options:u,labelledBy:c,mode:m="single-select"}=e,[p,h]=w({options:u,onOptionSelect:l,labelledBy:c,mode:m},a,{align:"righttop",manuallyShown:d,causalElement:o,...i?{onHide:i}:{},rootProps:{role:void 0},disabledDefaultBehaviors:[_.T]}),E=s.useContext(M);return r.current=h.showLayer,(0,n.jsxs)(M.Provider,{value:{level:E.level+1},children:[p,t]})}function B(e){let t=[];for(let a of e)if(a.hasOwnProperty("key"))a.disabled||t.push(a);else{if(a.hasOwnProperty("divider"))continue;t=t.concat(B(a.options))}return t}function G(e){for(let t of e)if(t.hasOwnProperty("options")){let e=G(t.options);if(e)return e}else if(t.hasOwnProperty("divider"))continue;else if(t.hasOwnProperty("key")&&!t.disabled)return t.key;return""}},644164:function(e,t,a){a.d(t,{DF:()=>F,I5:()=>em,IR:()=>es,IY:()=>q,iA:()=>K});var n=a(286204),r=a(847345),s=a(928874),o=a(797325),i=a(243072),l=a(314040),d=a(780878),u=a(78633),c=a(463198),m=a(611761),p=a(491002),h=a(468901),E=a(40891),y=a(668469),f=a(547405),g=a(413588),S=a(172890),_=a(372366),A=a(493076),I=a(526328),T=a(471716),R=a(90373),C=a(514227),O=a(637759),N=a(363672),v=a(219316),b=a(46145),M=a(222182),w=a(423482),L=a(813673),D=a(173624),P=a(915195),x=a(803700),k=a(341319),U=a(685626);let F=1e3,q="—",$={small:{cellHeight:24,cellPadding:4},default:{cellHeight:24,cellPadding:8},tall:{cellHeight:32,cellPadding:16},extraTall:{cellHeight:48,cellPadding:12}};function B(e){return e.reduce((e,t)=>e||!!t.resizable,!1)}let G="--resizable-",V=`${G}resizer-visibility`;function j(e){return`${G}width-${e}`}function Q(e){return`${G}flex-grow-${e}`}function H(e){return`${G}flex-shrink-${e}`}function W(e,t){return t<0||t>=e.length?e:[...e.slice(0,t),{...e[t],resizable:!1},...e.slice(t+1)]}function K(e){let{input:t,rowKey:a,columns:i,isLoading:d,numLoadingPlaceholderRows:m=10,emptyState:h,rowHeight:y="default",grid:T,onRowClick:R,rowLinkProps:C,rowRenderer:M,scrollToRowIndex:w,scrollResetOnDataUpdate:L=!1,isSelected:k,isSelectable:q,sort:$=[],onSort:G,defaultOnFirstColumnSortDirection:K="asc",getCustomOverflowRowsMessage:z,trackRowHovers:Y,hasEdgePadding:Z=!!(q||T),emptyCellValue:ee,autoSizeColumns:et=!1,stickyHeaderTop:ea="stickySection",rowClickTelemetryData:en,tableSortTelemetryData:er,telemetryName:eo,backgroundColor:ei,stateStrings:el,onScrollLoad:ed,labelledById:ec,hideHeaderOnEmptyState:ey,overflowContainerProps:ef,...eg}=e,{formatMessage:eS}=(0,o.Z)(),{logAction:e_}=(0,s.f1)(),eA=r.useMemo(()=>{if("fixedLeftColumn"===ea||!B(i))return i;let e=i.map(e=>!!e.isHidden).lastIndexOf(!1);-1===e&&(e=i.length-1);let t=W(i,e);if(0===e)return t;let a=new Set,n=t[e];for(let r=e-1;r>=0;r--)if(!t[r].isHidden){if(!n.width)break;n=t[r],a.add(r)}for(let e of a.values())t=W(t,e);return t},[i,ea]),eI=r.useMemo(()=>"fixedLeftColumn"!==ea?-1:eA.findIndex(e=>!e.isHidden),[eA,ea]),eT=r.useCallback(e=>eA.slice(0,e).every(e=>e.isHidden),[eA]),eR=r.useCallback(e=>eA.slice(e+1).every(e=>e.isHidden),[eA]),[eC,eO]=r.useState([...$]),eN=(0,u.N)(t);r.useEffect(()=>{$.length&&eO([...$])},[eN]);let ev=JSON.parse(JSON.stringify($.length&&G?$:eC)),eb=[];(R||C)&&eb.push((0,n.jsx)(X,{isHeader:!0,columnIndex:-1,...void 0!==T?{grid:T}:{},role:"columnheader",header:"",headerLabel:eS({id:"Row click action"}),index:-1,...(0,A.vL)()},"a11y"));let eM=!1,ew=(0,c.z)(e=>{ev.length&&ev[0][0]===e?ev[0][1]="asc"===ev[0][1]?"desc":"asc":(ev.unshift([e,K]),ev.splice(2)),G&&!1===G(ev)||eO(ev.slice(0)),eo&&ev&&e_(eo+"-sort","ui_click","TableColumnHeader",{primarySort:ev[0],secondarySort:ev[1],...er})}),eL=r.useMemo(()=>{let e=[];return eA.forEach((t,a)=>{t.isHidden||e.push(a)}),e},[eA]),[eD,eP]=r.useState(!1),ex=r.useCallback(e=>{let t=Array.from(e.querySelectorAll('[role="row"]')).find(e=>"columnheader"===e.firstElementChild.getAttribute("role")),a=e.querySelector('[role="rowgroup"]'),n=Array.from(t.children);(R||C)&&n.shift();let r=n.filter(e=>!!e.firstElementChild).map(({firstElementChild:e})=>e).map((e,t)=>ep(e)+20*!!eA[eL[t]].sortBy);return Array.from(a.children).forEach(e=>{let t=Array.from(e.childNodes);(R||C)&&t.shift(),t.forEach((e,t)=>{let a=e.firstElementChild;if(a){var n,s;r[t]=null!=(s=null==(n=eA[t])?void 0:n.width)?s:Math.max(r[t],Math.min(ep(a),250))}})}),eA.map((e,t)=>{let a=n.findIndex(a=>a.getAttribute("data-column-idx")===t.toString()||a.getAttribute("data-columnid")===e.id);return a>-1?r[a]:void 0})},[eL,eA,R,C]);r.useEffect(()=>{let e=eH.current;e&&et&&!eD&&e.clientHeight&&eP(ex(e))}),r.useEffect(()=>{if(!B(eA)||null===eH.current)return;let e=ex(eH.current);for(let t=0;t<eA.length;t++){let a=eA[t];if(!a.id)continue;let n=e[t],r=void 0===a.minWidth?250:eE(a.minWidth);n=Math.max(r,null!=n?n:0)||r||n;let s=j(a.id);eH.current.style.getPropertyValue(s)||(eH.current.style.setProperty(s,`${n}px`),null!==e5.current&&t===eI&&(e5.current.style.left=`${n}px`),null!=a.width&&(eH.current.style.setProperty(Q(a.id),"0"),eH.current.style.setProperty(H(a.id),"0")))}let t=eH.current;t&&et&&t.clientHeight?eP(e):eP(!1)},[eA,ex,eI,et]);let ek=r.useRef(void 0),eU=(0,c.z)(e=>{void 0!==e&&null!==eH.current&&void 0===ek.current&&(ek.current=!1)}),eF=(0,c.z)(({columnId:e,cellMinWidth:t,delta:a,columnIndex:n})=>{if(null===eH.current||void 0===ek.current)return;if(!ek.current){let e=new Map;for(let t=0;t<eA.length;t++){let a=eA[t].id;if(void 0===a)throw Error("cannot use resizability without column IDs");let n=eH.current.querySelector(`[role="columnheader"][data-columnid="${a}"]`);if(n){let t=n.offsetWidth;e.set(j(a),`${t}px`)}let r=t!==eA.length-1&&(0===t||"fixedLeftColumn"===ea)?"0":"1";e.set(Q(a),r),e.set(H(a),r)}if(!e.size)return;e.forEach((e,t)=>{var a;null==(a=eH.current)||a.style.setProperty(t,e)}),ek.current=!0}if("fixedLeftColumn"!==ea&&a>0){let e=[];for(let t=n+1;t<eA.length;t++){let a=eA[t].id;if(void 0===a)throw Error("cannot use resizability without column IDs");let n=eH.current.querySelector(`[role="columnheader"][data-columnid="${a}"]`),r=eA[t].minWidth;if(n&&r){let t=n.offsetWidth;e.push(t<=eE(r))}else e.push(!1)}if(e.reduce((e,t)=>t&&e,!0))return}let r=j(e),s=getComputedStyle(eH.current).getPropertyValue(r);if(!s)throw Error(`resizable var name not initialized: columnId=${e} varName=${r}`);let o=eh(s)+a,i=void 0===t?250:eE(t);void 0!==i&&o<i&&(o=i),eH.current.style.setProperty(r,`${o}px`),null!==e5.current&&-1!==eI&&eA[eI].id===e&&(e5.current.style.left=`${o}px`)}),eq=(0,c.z)(()=>{var e;null==(e=eH.current)||e.style.setProperty(V,"visible")}),e$=(0,c.z)(()=>{var e;null==(e=eH.current)||e.style.setProperty(V,"hidden")});eA.forEach((e,a)=>{var r;if(e.isHidden)return;void 0!==e.defaultSort&&(0===ev.length?("asc"===e.defaultSort||"desc"===e.defaultSort)&&ev.unshift([a,e.defaultSort]):$.length?console.error("You cannot specify the default sort of a column and the manual sort on the Table."):eM&&console.error("Setting defaultSort on more than one column. This is meant to identify the column to sort on initial load and can only be applied to one column."),eM=!0);let s=ev.length>0&&ev[0][0]===a&&"asc"===ev[0][1],o=ev.length>0&&ev[0][0]===a&&"desc"===ev[0][1];e.header||e.headerLabel||console.error("You must include a header or headerLabel for each column."),eb.push((0,n.jsx)(X,{isHeader:!0,...void 0!==T?{grid:T}:{},...void 0!==e.id?{columnId:e.id}:{},columnIndex:a,hasLeftPadding:Z||!eT(a),hasRightPadding:Z||!eR(a),...e.align?{align:e.align}:{},...void 0!==e.minWidth?{cellMinWidth:e.minWidth}:{},...void 0!==e.maxWidth?{cellMaxWidth:e.maxWidth}:{},...void 0!==e.width?{cellWidth:e.width}:{},role:"columnheader",autoSizeColumns:et,...eD&&eD[a]?{autoSizedColumnWidth:null!=(r=eD[a])?r:120}:{},header:e.header,headerLabel:e.headerLabel,index:a,...s?{sort:"asc"}:o?{sort:"desc"}:{},...e.sortBy&&ew?{onSort:ew}:{},fixedLeftColumn:"fixedLeftColumn"===ea,backgroundColor:ei,...e.resizable?{onResize:eF}:{},isLastColumn:a===eA.length-1,...k&&k(t[0])?{isFirstRowSelected:k&&k(t[0])}:{},...e.resizable?{onBeginResize:eU}:{},isFirstColumn:0===a,"data-testid":"table-header-cell"},a))});let eB=null,eG=t,eV=(0,n.jsx)(l.g,{...(0,A.y0)(eu.row,eu.headerRow,"selfContained"===ea?eu.manualHeaderSticky:{},"fixedLeftColumn"===ea?eu.fixedLeftHeader:{}),role:"row",onMouseEnter:eq,onMouseLeave:e$,borderBottomColor:A.Q2.borderColor,borderBottomStyle:"solid",borderBottomWidth:1,children:eb});"stickySection"===ea&&(eV=(0,n.jsx)(O.h,{backgroundColor:ei,children:eV})),t.length?eG=ev.length&&!$.length?t.map((e,t)=>[e,t]).sort((e,t)=>es(eA,ev,e[0],t[0],e[1],t[1])).map(e=>e[0]):t:!d&&h?eB=(0,n.jsxs)(l.g,{...(0,A.y0)(eu.root,"selfContained"===ea?eu.manualSticky:{}),role:ey?void 0:"table",...eg,children:[ey?void 0:eV,h]}):d&&(eG=Array(m).fill({}));let ej=[],eQ=eG.slice(0,et&&!eD?24:F);eQ.forEach((e,t,r)=>{let s,o=k&&k(e),i=t<r.length-1&&k&&k(r[t+1]),l=t>0&&k&&k(r[t-1]),u=function({isSelected:e=!1,isPreviousRowSelected:t=!1,isNextRowSelected:a=!1,isLastRow:n=!1,grid:r}){let s=e?A.Q2.tableSelectedBorderColor:A.Q2.borderColor;return{...(0,I.kK)(s),...(0,I._e)("solid"),borderTopWidth:t?0:2*!!e,borderBottomWidth:!n||r||e?a?+!!e:e?2:1:0,borderLeftWidth:2*!!e,borderRightWidth:2*!!e}}({isSelected:o,isPreviousRowSelected:l,isNextRowSelected:i,isFirstRow:0===t,isLastRow:t===r.length-1,grid:T});a&&!d&&(s="function"==typeof a?a(e):e[a]),null!=s||(s=t),ej.push((0,n.jsx)(J,{input:e,columns:eA,isLoading:!!d,index:t,rowHeight:y,...void 0!==T?{grid:T}:{},rowRenderer:d?void 0:M,onRowClick:R,rowLinkProps:d||null==C?void 0:C(e),...void 0!==o?{isSelected:o}:{},...void 0!==i?{isNextSelected:i}:{},...void 0!==l?{isPreviousSelected:l}:{},...void 0!==q?{isSelectable:q}:{},hasEdgePadding:Z,...void 0!==Y?{trackRowHovers:Y}:{},emptyCellValue:ee,autoSizeColumns:et,...eD?{maxColumnContentWidthList:eD}:{},fixedLeftColumn:"fixedLeftColumn"===ea,backgroundColor:ei,rowClickTelemetryData:null==en?void 0:en(e,t),telemetryName:eo&&eo+"-row-click",...u},s))});let eH=r.useRef(null),eW=r.useRef(window),eK=r.useRef(0),eJ=(0,p.N)(),ez=r.useCallback(()=>eH.current&&eJ(),[eH,eJ]),eY=em(y),eZ=k&&eQ.find(e=>k(e)),eX=eY*ej.length+2*!!eZ,e0=r.useRef(null);r.useEffect(()=>{let e=!eH.current||eH.current.clientHeight;if("fixedLeftColumn"!==ea)if(e){if(!et||eD){let e=eW.current;eW.current=U.r.byScrollableElement(eH.current),e!==eW.current&&(eK.current&&window.clearTimeout(eK.current),ez())}}else{let e=()=>{eK.current&&window.clearTimeout(eK.current),eK.current=window.setTimeout(()=>{var t;return(null==(t=eH.current)?void 0:t.clientHeight)?ez():e()},100)};e()}return()=>{eK.current&&window.clearTimeout(eK.current)}});let e1=r.useCallback(()=>{var e;if("number"!=typeof w)return;let t=em(y)*w;null==(e=eW.current)||e.scrollTo({top:t,left:0,behavior:"auto"})},[w,y]),e2=r.useCallback(()=>{let e=!eH.current||eH.current.clientHeight;return"number"==typeof w&&!e&&et&&!eD},[w,et,eD]);(0,E.i)(e2,e1),r.useEffect(()=>{if(L){var e;null==(e=eW.current)||e.scrollTo({top:0,left:0,behavior:"auto"})}},[eN,eC,L]);let e4=r.useCallback(()=>{let e="selfContained"===ea?e0.current:eH.current,t=x.d.getViewportDimensions(),a=e?P.t.getElementBounds(e,"viewport"):P.t.fromVectors(new x.d(0,0,"viewport"),t),n=Math.ceil(t.y/eY),r=Math.floor(-Math.min(0,a.top)/eY);return[Math.max(0,r-n),r+n+n]},[eY,ea]),[e3,e7]=r.useState(e4()),e6=r.useCallback(()=>{let e=e4();(e[0]!==e3[0]||e[1]!==e3[1])&&e7(e)},[e4,e3,e7]);(0,g.k)(e6,100,eW),(0,f.T)(e6,100,!1),(0,S.Y)(void 0===ed?()=>!1:ed,eW);let e5=r.useRef(null),e8=r.useRef(!1),e9=r.useCallback(()=>{"fixedLeftColumn"===ea&&eW.current&&(e8.current=!!eW.current.scrollLeft,e5.current&&(e5.current.style.opacity=e8.current?"1":"0"))},[ea]);(0,g.k)(e9,0,eW);let te=ej.slice(e3[0],e3[1]),tt=(0,n.jsx)(N.b,{stateName:d?"loading":"loaded",stateStrings:el||{loading:eS({id:"Table data reloading"}),loaded:eS({id:"Table data loaded"})}}),ta=r.useRef(d),tn=r.useRef(eB),tr=(0,_.h)(),ts=r.useMemo(()=>{var e,t,a;return eS({id:"Sorted by {header} {sortDirection, select, asc {ascending} other {descending}}"},{header:"string"==typeof(null==eA||null==(e=eA[null==ev||null==(t=ev[0])?void 0:t[0]])?void 0:e.header)?eA[ev[0][0]].header:"",sortDirection:null==ev||null==(a=ev[0])?void 0:a[1]})},[eS,eA,ev]),to=r.useRef(!0);if(r.useEffect(()=>{to.current||d||v.b.announce(ts),to.current=!1},[ts,d]),ta.current=d,tn.current=eB,r.useEffect(()=>()=>{ta.current&&!tn.current&&v.b.announce(eS({id:"The table was removed before loading finished"}))},[eS]),null!=eB)return(0,n.jsxs)(n.Fragment,{children:[eB,tt]});let ti=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b.a,{id:tr,children:ts}),(0,n.jsxs)(l.g,{ref:eH,...(0,A.y0)(eu.root,"selfContained"===ea?eu.manualSticky:"fixedLeftColumn"===ea?eu.fixedColumn:{}),role:"table","aria-labelledby":ec,"aria-describedby":tr,"data-action-name":"table",visibility:!et||eD?"visible":"hidden",backgroundColor:ei,..."fixedLeftColumn"===ea?{}:eg,children:[eV,(0,n.jsxs)(l.g,{ref:e0,role:"rowgroup",height:`${eX}px`,children:[(0,n.jsx)(l.g,{scopedCssVars:{"--group-height":`${e3[0]*eY}px`},height:"var(--group-height)"}),te]})]},"tableRef")]});if("fixedLeftColumn"===ea){var tl;ti=(0,n.jsxs)(l.g,{position:"relative",children:[(0,n.jsx)(l.g,{maxWidth:"100%",overflow:"auto",ref:eW,...eg,children:ti},"scrollRef"),(0,n.jsx)(l.g,{position:"absolute",width:1,backgroundColor:A.Q2.borderColor,top:0,bottom:0,left:`${null!=(tl=eA[0].width)?tl:0}px`,zIndex:2,ref:e5,opacity:+!!e8.current,transitionProperty:"opacity",transitionTimingFunction:"ease",transitionDuration:"0.15s",pointerEvents:"none"},"barRef")]})}let td=eG.length;if(td>F){let e=z?z(F,td):eS({id:"Showing {rowsDisplayed, number} of {totalRowCount, plural, one {# result} other {# results}}"},{rowsDisplayed:F,totalRowCount:td});ti=(0,n.jsxs)(l.g,{width:"100%",...ef,children:[ti,(0,n.jsx)(l.g,{paddingTop:16,textAlign:"center",children:(0,n.jsx)(D.x,{color:A.Q2.secondaryTextColor,size:"small",children:e})})]})}return(0,n.jsxs)(n.Fragment,{children:[ti,tt]})}function J(e){let t,a,{columns:o,input:d,rowHeight:u="default",grid:p,rowRenderer:E,isLoading:f,isSelected:g,isNextSelected:S,isPreviousSelected:I,onRowClick:T,rowLinkProps:C,index:O,isSelectable:N,trackRowHovers:v,hasEdgePadding:M=!0,emptyCellValue:D=" ",autoSizeColumns:P,maxColumnContentWidthList:x,fixedLeftColumn:U,rowClickTelemetryData:F,backgroundColor:q,telemetryName:$,...B}=e,G=r.useRef(null),V=(0,m.sU)(G),[j,Q]=(0,m.KK)(),H=(0,c.z)(e=>{(null==C?void 0:C.href)&&(e.target===G.current||!e.isDefaultPrevented())&&((0,k.qv)(e)||C.external?window.open(C.href,"_blank"):i.l.push(C.href))}),W=(0,y.k)((0,c.z)(e=>!f&&(null==T?void 0:T(d,e,O))),(0,s.Ci)("ui_click",$,"TableRow",{index:O,...F}),C?H:void 0),K=r.useRef(null),[J]=(0,h.X)(K),Y=[],Z=(0,_.h)();if(E)if(Array.isArray(t=E(d))){if(t.reduce((e,t)=>{var a;return e+(null!=(a=t.colSpan)?a:1)},0)!==o.length)throw Error("Number of columns returned in rowRenderer do not match number of props.columns");if(t.some(e=>{var t;return(null!=(t=e.colSpan)?t:1)<=0}))throw Error("colSpan need to be a positive number");let e=0,a=[];for(let n of t){let{colSpan:t=1}=n,r=e+t;a.push({originalColumnIndices:[e,r],rowRendererCell:n}),e=r}a.forEach(({originalColumnIndices:e,rowRendererCell:a},r)=>{let{align:s,cell:i,colSpan:l=1}=a,{minWidth:d,maxWidth:c,width:m,autoSizedColumnWidth:h}=function(e,t,a){let[n,r]=e,s=t.slice(n,r);ed(s,"maxWidth"),ed(s,"minWidth"),ed(s,"width");let o=t[n].minWidth,i=t[n].maxWidth,l=t[n].width,d=null==a?void 0:a[n];for(let e=n+1;e<r;e++){let n=t[e];!n.isHidden&&("number"==typeof o&&"number"==typeof n.minWidth&&(o+=n.minWidth+32),"number"==typeof i&&"number"==typeof n.maxWidth&&(i+=n.maxWidth+32),"number"==typeof l&&"number"==typeof n.width&&(l+=n.width+32),"number"==typeof d&&a&&"number"==typeof a[e]&&void 0!==a[e]&&(d+=a[e]+32))}return{width:l,minWidth:o,maxWidth:i,autoSizedColumnWidth:d}}(e,o,x);Y.push((0,n.jsx)(z,{columnIndex:r,rowIndex:O,hasLeftPadding:M||0!==r,hasRightPadding:M||r!==t.length-1,rowHeight:u,...void 0!==p?{grid:p}:{},...s?{align:s}:{},...void 0!==d?{cellMinWidth:d}:{},...void 0!==c?{cellMaxWidth:c}:{},...void 0!==m?{cellWidth:m}:{},emptyCellValue:D,...void 0!==P?{autoSizeColumns:P}:{},...void 0!==h?{autoSizedColumnWidth:h}:{},...void 0!==U?{fixedLeftColumn:U}:{},backgroundColor:"inherit",colSpan:l,id:r?void 0:Z,children:i},r))})}else t&&Y.push((0,r.createElement)(z,{rowHeight:u,...void 0!==p?{grid:p}:{},key:O,backgroundColor:q,id:Z},t));let X=r.useCallback(e=>o.slice(0,e).every(e=>e.isHidden),[o]),ee=r.useCallback(e=>o.slice(e+1).every(e=>e.isHidden),[o]),et=N&&("boolean"==typeof N?N:N(d));Y.length||o.forEach((e,t)=>{var a;let r;!e.isHidden&&(f||!0===e.isLoading||e.isLoading instanceof Function&&e.isLoading(d,O)?r=(0,n.jsx)(L.q,{width:`${ec[O*t%ec.length]}%`}):(null==(r=e.cell instanceof Function?e.cell(d,O,v?J:void 0):d[e.cell])||""===r)&&(r=D),Y.push((0,n.jsx)(z,{...void 0!==e.id?{columnId:e.id}:{},columnIndex:t,rowIndex:O,hasLeftPadding:M||!X(t),hasRightPadding:M||!ee(t),rowHeight:u,...void 0!==p?{grid:p}:{},...e.align?{align:e.align}:{},...void 0!==e.minWidth?{cellMinWidth:e.minWidth}:{},...void 0!==e.maxWidth?{cellMaxWidth:e.maxWidth}:{},...void 0!==e.width?{cellWidth:e.width}:{},emptyCellValue:D,...void 0!==P?{autoSizeColumns:P}:{},...x&&x[t]?{autoSizedColumnWidth:null!=(a=x[t])?a:120}:{},...void 0!==U?{fixedLeftColumn:U}:{},backgroundColor:"inherit",id:t?void 0:Z,isFirstColumn:0===t,isLastColumn:t===o.length-1,...void 0!==g?{isSelected:g}:{},...void 0!==S?{isNextRowSelected:S}:{},...void 0!==I?{isPreviousRowSelected:I}:{},children:r},t)))});let ea=g?A.Q2.tableSelectedHoverBackground:A.Q2.tableRowHoverColor,en=!f&&(et||T||C),er=!f&&(null==C?void 0:C.overlayLinkOnRow),es={...void 0!==v?{ref:K}:{},cursor:en?"pointer":"default",...(0,A.y0)(eu.row),backgroundColor:(V||j)&&en?ea:g?A.Q2.tableSelectedBackground:null!=q?q:A.Q2.level1Bg,color:A.Q2.primaryTextColor,display:"flex",...{":hover":en?{backgroundColor:ea}:{}},nonAccessibleOnClick:W,role:"row","aria-selected":et?g:void 0,position:er?"relative":void 0,...B},eo=(0,c.z)(e=>{if(e.preventDefault(),"keyup"===e.type)return W(e)});if(!f&&(C||T)){let e=C?{ref:G,href:C.href,onClick:eo,"aria-label":C.label,"aria-labelledby":C.label?void 0:Z}:void 0;a=er?(0,n.jsx)(l.g,{role:"cell",position:"absolute",top:0,bottom:0,left:0,right:0,children:(0,n.jsx)(w.r,{...e,display:"block",width:"100%",height:"100%"})}):(0,n.jsx)(b.a,{role:"cell",children:C?(0,n.jsx)(w.r,{...e}):(0,n.jsx)(R.zx,{ref:Q,onClick:eo,"aria-labelledby":Z})})}return(0,n.jsxs)(l.g,{...es,"data-testid":"table-row",children:[a,Y]})}K.displayName="Table",J.displayName="TableRow";let z=r.memo(function(e){let{columnId:t,columnIndex:a,rowIndex:r,isHeader:s=!1,cellMinWidth:o,cellMaxWidth:i,cellWidth:l,rowHeight:d="default",grid:u,align:c,children:m,hasLeftPadding:p=!0,hasRightPadding:h=!0,emptyCellValue:E=(0,n.jsx)(n.Fragment,{children:"\xa0"}),autoSizeColumns:y,autoSizedColumnWidth:f,fixedLeftColumn:g,backgroundColor:S=A.Q2.level1Bg,colSpan:_,isFirstColumn:R=!1,isLastColumn:C=!1,isSelected:O=!1,isNextRowSelected:N=!1,isPreviousRowSelected:v=!1,...b}=e,M=null!=m&&""!==m?m:E,w={maxWidth:void 0,minWidth:void 0,width:`${void 0!==_?100*_+(_-1)*32:132}px`};if(void 0!==o&&("number"==typeof o?w.minWidth=`${o}px`:w.minWidth=o),void 0!==i&&("number"==typeof i?w.maxWidth=`${i}px`:w.maxWidth=i),void 0!==l){let e=`${l}px`;t?w.width=`var(${j(t)}, ${e})`:w.width=e}else if(f){let e=`${f}px`;t?w.width=`var(${j(t)}, ${e})`:w.width=e}else t&&(w.width=`var(${j(t)}${void 0!==w.width?`, ${w.width}`:""})`);(w.flexGrow=null!=_?_:1,w.flexShrink=1,void 0!==t)&&(w.maxWidth=`var(${G}max-width-${t}${void 0!==w.maxWidth?`, ${w.maxWidth}`:""})`,w.flexGrow=`var(${Q(t)}${void 0!==w.flexGrow?`, ${w.flexGrow}`:""})`,w.flexShrink=`var(${H(t)}${void 0!==w.flexShrink?`, ${w.flexShrink}`:""})`);g&&(w.left=a?void 0:0,w.position=a?"static":"sticky",w.zIndex=a?void 0:1);let L=function(e,t,a,n,r,s,o,i,l){let d=0,u=0,c=0,m=0;t&&(r&&(c=2),s&&(m=2),a||(u=1),n||(d=1));let p=l?8:$[e].cellPadding;return[p-u,o?16-m:0,p-d,i?16-c:0].map(e=>`${e}px`)}(d,O,v,N,R,C,h,p,s),P=s?void 0:`${em(d)-1}px`,x=u?function(e,t,a){let n=+!!a;return{...(0,I._e)("solid"),...(0,I.NT)([n,1,n,+!!t]),...(0,I.kK)(e?A.Q2.tableSelectedBorderColor:A.Q2.borderColor)}}(O,R,s):{};return(0,n.jsx)(D.x,{alignItems:"center",backgroundColor:S,display:"flex",flexGrow:w.flexGrow,flexShrink:w.flexShrink,height:P,justifyContent:"left"===c?"flex-start":"center"===c?"center":"right"===c?"flex-end":"justify"===c?"space-between":void 0,left:w.left,maxHeight:`${P}px`,minWidth:w.minWidth,maxWidth:w.maxWidth,overflowX:"hidden",overflowY:"hidden",...(0,T.b)(L),position:w.position,textOverflow:"ellipsis",whiteSpace:"nowrap",width:w.width,wordBreak:"break-word",role:"cell",zIndex:w.zIndex,"data-testid":"table-cell","data-column-idx":a,...b,...x,children:y&&null==f?(0,n.jsx)("div",{children:M}):M})});z.displayName="TableCell";let Y=(0,n.jsx)(M.JO,{icon:"arrow-down-bold",marginLeft:4,transform:"rotate(180deg)"}),Z=(0,n.jsx)(M.JO,{icon:"arrow-down-bold",marginLeft:4}),X=r.memo(function(e){let{sort:t,onSort:a,index:s,header:o,headerLabel:i,fixedLeftColumn:d,grid:u,onResize:m,columnId:p,columnIndex:h,cellMinWidth:E,isFirstRowSelected:y,isLastColumn:f,onBeginResize:g,...S}=e,_=r.useRef(!1),[I,T]=r.useState(!1),R="asc"===t?Y:"desc"===t?Z:void 0,O=r.useCallback(()=>{_.current||null==a||a(s)},[a,s]),N=r.useCallback(e=>{O(),e.stopPropagation()},[O]),v=r.useRef(null),M=r.useMemo(()=>(0,n.jsx)(l.g,{ref:v,overflow:"hidden",children:"function"==typeof o?o(R):""!==o?(0,n.jsx)(C.O,{children:o}):i&&(0,n.jsx)(b.a,{children:i})}),[v,o,i,R]),w=r.useRef(null),L=(0,c.z)(e=>{if("function"!=typeof m||"string"!=typeof p||null===w.current||1!==e.buttons||void 0===h)return;let t=e.pageX-w.current;w.current=e.pageX,m({columnId:p,cellMinWidth:E,delta:t,columnIndex:h})}),D=(0,c.z)(e=>{function t(){document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",t),setImmediate(()=>{_.current=!1}),T(!1)}if(e.preventDefault(),0!==e.button||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)return void t();_.current=!0,w.current=e.pageX,T(!0),g&&void 0!==h&&g(h),document.addEventListener("mousemove",L),document.addEventListener("mouseup",t)});return(0,n.jsxs)(z,{...(0,A.y0)(eu.headerCell,a?eu.headerCellSortable:{},t?eu.headerCellSorted:{},d&&!s?eu.fixedLeftHeaderCell:{}),...void 0!==u?{grid:u}:{},nonAccessibleOnClick:O,...void 0!==d?{fixedLeftColumn:d}:{},"aria-sort":"asc"===t?"ascending":"desc"===t?"descending":void 0,...void 0!==p?{columnId:p}:{},...void 0!==E?{cellMinWidth:E}:{},...void 0!==y?{isNextRowSelected:y}:{},...void 0!==f?{isLastColumn:f}:{},...void 0!==h?{columnIndex:h}:{},"data-columnid":p,...S,children:[(0,n.jsxs)(ee,{sorted:!!t,onClick:a&&N,resizable:!!m,...(0,A.y0)(m&&"center"===S.align?eu.headerCellAlignedMiddle:{}),...m&&"center"===S.align&&!f?{paddingLeft:2*et+ea-en}:void 0,children:[M,"function"!=typeof o&&R]}),m&&(0,n.jsx)(er,{onMouseDown:D,resizing:I,...void 0!==f?{isLastColumn:f}:{}})]})});function ee(e){let{sorted:t,resizable:a,...s}=e,{tabbing:o}=r.useContext(d.w),i=o?{backgroundColor:A.Q2.buttonBg,...(0,I.kK)(A.Q2.borderColor),borderRadius:"6px",borderStyle:"solid",borderWidth:"1px",boxShadow:"none",height:"24px",padding:t?"0 12px 1px 12px":"0 12px 1px",margin:t?"-11px -13px -12px -13px":"-11px -13px -12px"}:{};return(0,n.jsx)(l.g,{alignItems:"center",display:"inline-flex",flexBasis:"0",maxWidth:a?"calc(100% - 6px)":"100%",...s,":focus":i})}let et=20,ea=2,en=35,er=r.memo(function(e){let{onMouseDown:t,resizing:a,isLastColumn:s}=e,[o,i]=r.useState(!1),d=r.useCallback(()=>{i(!0)},[]),u=r.useCallback(()=>{i(!1)},[]);return(0,n.jsx)(l.g,{cursor:"ew-resize",height:"100%",onMouseDown:t,...s?{}:{marginRight:`${-1*en}px`},marginLeft:"auto",visibility:`var(${V}, hidden)`,onMouseEnter:d,onMouseLeave:u,"data-testid":"core-ui-table-resizable-resizer",children:(0,n.jsx)(l.g,{backgroundColor:a?A.Q2.borderActiveColor:o?A.Q2.borderHoverColor:A.Q2.borderColor,width:`${ea}px`,height:"100%",marginRight:`${et}px`,marginLeft:`${et}px`})})});function es(e,t,a,n,r,s){let o,i,l=t.length?t[0]:void 0,d=t.length>1?t[1]:void 0;if(!l)return 0;let u=e[l[0]];if(!u&&d?(u=e[d[0]],l=d,d=void 0):d&&(o=e[d[0]]),!u&&!o)return 0;let c=u?u.sortBy:void 0;!c&&o?c=o.sortBy:o&&(i=o.sortBy);let m=c instanceof Function?c:null==c?()=>0:!0===c?ei(u):eo(c),p=el(u,m,a,n,r,s);if(p&&"desc"===l[1])p*=-1;else if(!p&&o&&i&&d){let e=i instanceof Function?i:null==i?()=>0:!0===i?ei(o):eo(i);(p=el(o,e,a,n,r,s))&&"desc"===d[1]&&(p*=-1)}return p}function eo(e){return(t,a)=>{let n=t[e],r=a[e];return n===r?0:null==n?-1:null==r?1:"number"==typeof n&&"number"==typeof r?n>r?1:-1:String(n).toLocaleLowerCase()>String(r).toLocaleLowerCase()?1:-1}}function ei(e){return(t,a,n,r)=>{let s=e.cell instanceof Function?e.cell(t,n):t[e.cell],o=e.cell instanceof Function?e.cell(a,r):a[e.cell];return s===o?0:null==s?-1:null==o?1:"string"==typeof s&&"string"==typeof o?String(s).toLocaleLowerCase()>String(o).toLocaleLowerCase()?1:-1:(("object"==typeof s||"object"==typeof o||"function"==typeof s||"function"==typeof o)&&console.error("Trying to sort a column by the cell value (by setting sortBy: true), but the cell contents are objects or functions (most likely React components). Instead, use a function to manually compare values or use a string key of the row data object."),s>o?1:-1)}}function el(e,t,a,n,r,s){if(!0===e.isLoading)return 0;if(e.isLoading instanceof Function){let t=e.isLoading(a,r),o=e.isLoading(n,s);if(t&&o)return 0;if(t)return -1;if(o)return 1}return t(a,n,r,s)}function ed(e,t){if(1!==e.length){if(e.some(e=>"string"===e[t]))throw Error(`${t} cannot be string for columns that a cell is spanning`);if(!e.every((e,a,n)=>typeof e[t]==typeof n[0][t]))throw Error(`${t} should be the same type across columns that a cell is spanning`)}}let eu={root:{display:"inline-block",maxWidth:"100%",minWidth:"100%"},manualSticky:{overflowY:"auto"},fixedColumn:{maxWidth:"initial"},row:{alignItems:"center",display:"inline-flex",minWidth:"100%",maxWidth:"100%"},headerRow:{alignItems:"stretch"},manualHeaderSticky:{position:"sticky",top:0,zIndex:2},fixedLeftHeader:{position:"sticky",top:0,zIndex:2},headerCell:{backgroundColor:A.Q2.level1Bg,color:A.Q2.secondaryTextColor,fontSize:"12px",fontWeight:600,letterSpacing:"0.05em",lineHeight:"16px",textTransform:"uppercase",whiteSpace:"normal",zIndex:1},fixedLeftHeaderCell:{zIndex:2},headerCellSorted:{color:A.Q2.tableHeaderSortColor},headerCellSortable:{cursor:"pointer"},headerCellAlignedMiddle:{justifyContent:"center",flexGrow:1}},ec=[68,55,67,46,43,65,70,57,65,51,65,58,43,50,47,63,54,55,66,51,67,70,59,48,53,57,54,46,40,45,59,52,69,47,57,50,53];function em(e){let t=$[e];return t.cellHeight+2*t.cellPadding+1}function ep(e){return x.d.getElementDimensions(e).x+32}function eh(e){return parseFloat(e)}function eE(e){if("number"==typeof e)return e;if(!e.endsWith("px"))throw Error("only pixel widths are currently supported");return eh(e)}},363672:function(e,t,a){a.d(t,{b:()=>o});var n=a(286204);a(847345);var r=a(801726),s=a(46145);let o=(0,r.t)("LiveRegion",(e,t)=>{let{stateName:a,stateStrings:r}=e;return(0,n.jsx)(s.a,{"aria-atomic":"true","aria-live":"error"===a?"assertive":"polite",ref:t,role:"error"===a?"alert":"status",children:r[a]})})},714294:function(e,t,a){a.d(t,{i:()=>c,t:()=>m});var n,r=a(286204),s=a(821215);a(847345);var o=a(801726),i=a(514227),l=a(357139),d=a(222182),u=a(78779),c=((n={}).DEFAULT="DEFAULT",n.SUCCESS="SUCCESS",n.ERROR="ERROR",n.ACTIVE="ACTIVE",n.ATTENTION="ATTENTION",n.INFO="INFO",n.CUSTOM="CUSTOM",n);let m=(0,o.t)("StatusPill",(e,t)=>{let{type:a,label:n,tooltip:o,prefixIcon:c,suffixIcon:m,...p}=e,h=s.lx.statusNeutralBackground,E=s.lx.statusNeutralText;switch(a){case"DEFAULT":h=s.lx.statusNeutralBackground,E=s.lx.statusNeutralText;break;case"SUCCESS":h=s.lx.statusSuccessBackground,E=s.lx.statusSuccessText;break;case"ERROR":h=s.lx.statusCriticalBackground,E=s.lx.statusCriticalText;break;case"ACTIVE":h=s.lx.componentStatusPillActiveBackground,E=s.lx.componentStatusPillActiveText;break;case"ATTENTION":h=s.lx.statusCautionBackground,E=s.lx.statusCautionText;break;case"INFO":h=s.lx.statusInfoBackground,E=s.lx.statusInfoText;break;case"CUSTOM":var y,f;e.backgroundColor||console.error("StatusPill: backgroundColor must be provided."),e.color||console.error("StatusPill: color must be provided."),h=null!=(y=e.backgroundColor)?y:h,E=null!=(f=e.color)?f:E;break;default:console.error(`StatusPill: Invalid StatusType, type=${a}`)}let g={backgroundColor:h,color:E,padding:["2px","6px","2px"],borderRadius:"4px",fontWeight:600,fontSize:"11px",height:"20px",display:"inline-block",lineHeight:1.5,maxWidth:"100%"},S=(0,r.jsxs)(r.Fragment,{children:[c&&(0,r.jsx)(d.JO,{marginRight:4,color:E,icon:c}),n,m&&(0,r.jsx)(d.JO,{marginLeft:4,color:E,icon:m})]});return o?(0,r.jsx)(l.u,{text:o,...g,...u.$,ref:t,...p,children:S}):(0,r.jsx)(i.O,{text:n,...g,ref:t,...p,children:S})})},339255:function(e,t,a){a.d(t,{P:()=>m,q:()=>l});var n=a(286204),r=a(847345),s=a(797325),o=a(314040),i=a(491002);let l=(0,a(801726).t)("Time",(e,t)=>{let a,l,{format:p,timestamp:h,relativeTo:E,granularity:y="seconds",specificity:f=2,type:g,includeTooltip:S=!0,..._}=e,A=Date.now();"string"==typeof E?"after-now"===E?(a=Math.max(0,h-A),l=new Date(A+a)):(a=Math.max(0,A-h),l=new Date(A-a)):void 0!==E?a=Math.abs(h-E):(a=Math.abs(h-A),l=new Date(h));let{formatMessage:I,formatDate:T}=(0,s.Z)(),R=(0,i.N)();r.useEffect(()=>{let e;if(l&&isFinite(a)){let t=a/1e3;"seconds"===y&&(t<u||3===f&&t<c)?e=window.setTimeout(()=>R(),1e3):t<c&&(e=window.setTimeout(R,1e3*d))}return()=>{e&&clearTimeout(e)}},[l,a,R,y,f]);let C=function(e){try{return e?e.toISOString():void 0}catch(e){return}}(l),O=T(l,{month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),N=S&&l&&C&&O?{tooltip:O,tooltipConfig:{delayMS:500,nonAccessible:!0}}:{};return(0,n.jsx)(o.g,{ref:t,role:"number"==typeof E?void 0:"timer",...N,..._,renderRoot:e=>(0,n.jsx)("time",{dateTime:C,...e}),children:m(I,Math.floor(a/1e3),p,y,f,g)})}),d=60,u=3600,c=86400;function m(e,t,a,n,r,s="standard"){if(!isFinite(t))return"—";if("seconds"===n&&t<1||"minutes"===n&&t<d||"hours"===n&&t<u)return e({id:"just now"});let o={years:Math.floor(t/31536e3),months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0};if(t-=31536e3*o.years,o.months=Math.floor(t/2592e3),t-=2592e3*o.months,o.weeks=Math.floor(t/604800),t-=604800*o.weeks,o.days=Math.floor(t/c),t-=o.days*c,o.hours=Math.floor(t/u),t-=o.hours*u,o.minutes=Math.floor(t/d),t-=o.minutes*d,o.seconds=Math.floor(t),o.years>0){if(1!==r&&(o.months||o.weeks))if(2!==r&&o.weeks){if(!o.months)if("ago"===s)return e("letter"===a?{id:"{years, number}y {weeks, number}w ago",description:"number of years and weeks ago"}:{id:"{years, plural, one {# year} other {# years}}, {weeks, plural, one {# week} other {# weeks}} ago"},o);else return e("letter"===a?{id:"{years, number}y {weeks, number}w",description:"number of years and weeks"}:{id:"{years, plural, one {# year} other {# years}}, {weeks, plural, one {# week} other {# weeks}}"},o)}else if("ago"===s)return e("letter"===a?{id:"{years, number}y {months, number}mo ago",description:"number of years and months ago"}:{id:"{years, plural, one {# year} other {# years}}, {months, plural, one {# month} other {# months}} ago"},o);else return e("letter"===a?{id:"{years, number}y {months, number}mo",description:"number of years and months"}:{id:"{years, plural, one {# year} other {# years}}, {months, plural, one {# month} other {# months}}"},o);else if("ago"===s)return e("letter"===a?{id:"{years, number}y ago",description:"number of years ago"}:{id:"{years, plural, one {# year} other {# years}} ago"},o);else return e("letter"===a?{id:"{years, number}y",description:"number of years"}:{id:"{years, plural, one {# year} other {# years}}"},o);return"ago"===s?e("letter"===a?{id:"{years, number}y {months, number}mo {weeks, number}w ago",description:"number of years, months, and weeks ago"}:{id:"{years, plural, one {# year} other {# years}}, {months, plural, one {# month} other {# months}}, {weeks, plural, one {# week} other {# weeks}} ago"},o):e("letter"===a?{id:"{years, number}y {months, number}mo {weeks, number}w",description:"number of years, months, and weeks"}:{id:"{years, plural, one {# year} other {# years}}, {months, plural, one {# month} other {# months}}, {weeks, plural, one {# week} other {# weeks}}"},o)}if(o.months>0){if(1!==r&&(o.weeks||o.days))if(2!==r&&o.days){if(!o.weeks)if("ago"===s)return e("letter"===a?{id:"{months, number}mo {days, number}d ago",description:"number of months and days ago"}:{id:"{months, plural, one {# month} other {# months}}, {days, plural, one {# day} other {# days}} ago"},o);else return e("letter"===a?{id:"{months, number}mo {days, number}d",description:"number of months and days"}:{id:"{months, plural, one {# month} other {# months}}, {days, plural, one {# day} other {# days}}"},o)}else if("ago"===s)return e("letter"===a?{id:"{months, number}mo {weeks, number}w ago",description:"number of months and weeks ago"}:{id:"{months, plural, one {# month} other {# months}}, {weeks, plural, one {# week} other {# weeks}} ago"},o);else return e("letter"===a?{id:"{months, number}mo {weeks, number}w",description:"number of months and weeks"}:{id:"{months, plural, one {# month} other {# months}}, {weeks, plural, one {# week} other {# weeks}}"},o);else if("ago"===s)return e("letter"===a?{id:"{months, number}mo ago",description:"number of months ago"}:{id:"{months, plural, one {# month} other {# months}} ago"},o);else return e("letter"===a?{id:"{months, number}mo",description:"number of months"}:{id:"{months, plural, one {# month} other {# months}}"},o);return"ago"===s?e("letter"===a?{id:"{months, number}mo {weeks, number}w {days, number}d ago",description:"number of months, weeks, and days ago"}:{id:"{months, plural, one {# month} other {# months}}, {weeks, plural, one {# week} other {# weeks}}, {days, plural, one {# day} other {# days}} ago"},o):e("letter"===a?{id:"{months, number}mo {weeks, number}w {days, number}d",description:"number of months, weeks, and days"}:{id:"{months, plural, one {# month} other {# months}}, {weeks, plural, one {# week} other {# weeks}}, {days, plural, one {# day} other {# days}}"},o)}if(o.weeks>0){if(1!==r&&(o.days||o.hours))if(2!==r&&o.hours){if(!o.days)if("ago"===s)return e("letter"===a?{id:"{weeks, number}w {hours, number}h ago",description:"number of weeks and hours ago"}:{id:"{weeks, plural, one {# week} other {# weeks}}, {hours, plural, one {# hour} other {# hours}} ago"},o);else return e("letter"===a?{id:"{weeks, number}w {hours, number}h",description:"number of weeks and hours"}:{id:"{weeks, plural, one {# week} other {# weeks}}, {hours, plural, one {# hour} other {# hours}}"},o)}else if("ago"===s)return e("letter"===a?{id:"{weeks, number}w {days, number}d ago",description:"number of weeks and days ago"}:{id:"{weeks, plural, one {# week} other {# weeks}}, {days, plural, one {# day} other {# days}} ago"},o);else return e("letter"===a?{id:"{weeks, number}w {days, number}d",description:"number of weeks and days"}:{id:"{weeks, plural, one {# week} other {# weeks}}, {days, plural, one {# day} other {# days}}"},o);else if("ago"===s)return e("letter"===a?{id:"{weeks, number}w ago",description:"number of weeks ago"}:{id:"{weeks, plural, one {# week} other {# weeks}} ago"},o);else return e("letter"===a?{id:"{weeks, number}w",description:"number of weeks"}:{id:"{weeks, plural, one {# week} other {# weeks}}"},o);return"ago"===s?e("letter"===a?{id:"{weeks, number}w {days, number}d {hours, number}h ago",description:"number of weeks, days, and hours ago"}:{id:"{weeks, plural, one {# week} other {# weeks}}, {days, plural, one {# day} other {# days}}, {hours, plural, one {# hour} other {# hours}} ago"},o):e("letter"===a?{id:"{weeks, number}w {days, number}d {hours, number}h",description:"number of weeks, days, and hours"}:{id:"{weeks, plural, one {# week} other {# weeks}}, {days, plural, one {# day} other {# days}}, {hours, plural, one {# hour} other {# hours}}"},o)}if(o.days>0){if(1!==r&&(o.hours||o.minutes))if("hours"!==n&&2!==r&&o.minutes){if(!o.hours)if("ago"===s)return e("letter"===a?{id:"{days, number}d {minutes, number}m ago",description:"number of days and minutes ago"}:{id:"{days, plural, one {# day} other {# days}}, {minutes, plural, one {# minute} other {# minutes}} ago"},o);else return e("letter"===a?{id:"{days, number}d {minutes, number}m",description:"number of days and minutes"}:{id:"{days, plural, one {# day} other {# days}}, {minutes, plural, one {# minute} other {# minutes}}"},o)}else if("ago"===s)return e("letter"===a?{id:"{days, number}d {hours, number}h ago",description:"number of days and hours ago"}:{id:"{days, plural, one {# day} other {# days}}, {hours, plural, one {# hour} other {# hours}} ago"},o);else return e("letter"===a?{id:"{days, number}d {hours, number}h",description:"number of days and hours"}:{id:"{days, plural, one {# day} other {# days}}, {hours, plural, one {# hour} other {# hours}}"},o);else if("ago"===s)return e("letter"===a?{id:"{days, number}d ago",description:"number of days ago"}:{id:"{days, plural, one {# day} other {# days}} ago"},o);else return e("letter"===a?{id:"{days, number}d",description:"number of days"}:{id:"{days, plural, one {# day} other {# days}}"},o);return"ago"===s?e("letter"===a?{id:"{days, number}d {hours, number}h {minutes, number}m ago",description:"number of days, hours, and minutes ago"}:{id:"{days, plural, one {# day} other {# days}}, {hours, plural, one {# hour} other {# hours}}, {minutes, plural, one {# minute} other {# minutes}} ago"},o):e("letter"===a?{id:"{days, number}d {hours, number}h {minutes, number}m",description:"number of days, hours, and minutes"}:{id:"{days, plural, one {# day} other {# days}}, {hours, plural, one {# hour} other {# hours}}, {minutes, plural, one {# minute} other {# minutes}}"},o)}if(o.hours>0){if("hours"!==n&&1!==r&&(o.minutes||o.seconds)&&("minutes"!==n||o.minutes))if("minutes"!==n&&2!==r&&o.seconds){if(!o.minutes)if("ago"===s)return e("letter"===a?{id:"{hours, number}h {seconds, number}s ago",description:"number of hours and seconds ago"}:{id:"{hours, plural, one {# hour} other {# hours}}, {seconds, plural, one {# second} other {# seconds}} ago"},o);else return e("letter"===a?{id:"{hours, number}h {seconds, number}s",description:"number of hours and seconds"}:{id:"{hours, plural, one {# hour} other {# hours}}, {seconds, plural, one {# second} other {# seconds}}"},o)}else if("ago"===s)return e("letter"===a?{id:"{hours, number}h {minutes, number}m ago",description:"number of hours and minutes ago"}:{id:"{hours, plural, one {# hour} other {# hours}}, {minutes, plural, one {# minute} other {# minutes}} ago"},o);else return e("letter"===a?{id:"{hours, number}h {minutes, number}m",description:"number of hours and minutes"}:{id:"{hours, plural, one {# hour} other {# hours}}, {minutes, plural, one {# minute} other {# minutes}}"},o);else if("ago"===s)return e("letter"===a?{id:"{hours, number}h ago",description:"number of hours ago"}:{id:"{hours, plural, one {# hour} other {# hours}} ago"},o);else return e("letter"===a?{id:"{hours, number}h",description:"number of hours"}:{id:"{hours, plural, one {# hour} other {# hours}}"},o);return"ago"===s?e("letter"===a?{id:"{hours, number}h {minutes, number}m {seconds, number}s ago",description:"number of hours, minutes, and seconds ago"}:{id:"{hours, plural, one {# hour} other {# hours}}, {minutes, plural, one {# minute} other {# minutes}}, {seconds, plural, one {# second} other {# seconds}} ago"},o):e("letter"===a?{id:"{hours, number}h {minutes, number}m {seconds, number}s",description:"number of hours, minutes, and seconds"}:{id:"{hours, plural, one {# hour} other {# hours}}, {minutes, plural, one {# minute} other {# minutes}}, {seconds, plural, one {# second} other {# seconds}}"},o)}else if(o.minutes>0){if("minutes"===n||1===r||!o.seconds)if("ago"===s)return e("letter"===a?{id:"{minutes, number}m ago",description:"number of minutes ago"}:{id:"{minutes, plural, one {# minute} other {# minutes}} ago"},o);else return e("letter"===a?{id:"{minutes, number}m",description:"number of minutes"}:{id:"{minutes, plural, one {# minute} other {# minutes}}"},o);return"ago"===s?e("letter"===a?{id:"{minutes, number}m {seconds, number}s ago",description:"number of minutes and seconds ago"}:{id:"{minutes, plural, one {# minute} other {# minutes}}, {seconds, plural, one {# second} other {# seconds}} ago"},o):e("letter"===a?{id:"{minutes, number}m {seconds, number}s",description:"number of minutes and seconds"}:{id:"{minutes, plural, one {# minute} other {# minutes}}, {seconds, plural, one {# second} other {# seconds}}"},o)}return"ago"===s?e("letter"===a?{id:"{seconds, number}s ago",description:"number of seconds ago"}:{id:"{seconds, plural, one {# second} other {# seconds}} ago"},o):e("letter"===a?{id:"{seconds, number}s",description:"number of seconds"}:{id:"{seconds, plural, one {# second} other {# seconds}}"},o)}},774528:function(e,t,a){function n(e,t){var a=t.length,n=e.length;if(n>a)return!1;if(n===a)return e===t;e:for(var r=0,s=0;r<n;r++){for(var o=e.charCodeAt(r);s<a;)if(t.charCodeAt(s++)===o)continue e;return!1}return!0}function r(e,t){var a=[],n=t.length,r=e.length;if(r>n)return null;if(r===n)if(e===t)return a.push([0,r]),a;else return null;e:for(var s=0,o=0,i=0;s<r;s++){for(var l=e.charCodeAt(s);o<n;)if(t.charCodeAt(o++)===l)continue e;else i+1!==o&&a.push([i,o-1]),i=o;return null}return a.push([i,o]),a}a.d(t,{Y:()=>r,s:()=>n})},396159:function(e,t,a){a.d(t,{Bh:()=>d,YS:()=>c,aj:()=>u,gJ:()=>m,i3:()=>l});var n,r=a(475501),s=a(891263),o=a(287483),i=a(299987),l=((n={}).STANDARD="STANDARD",n.ENTERPRISE="ENTERPRISE",n.BUSINESS_CRITICAL="BUSINESS_CRITICAL",n.VPS="VPS",n.PREMIER="PREMIER",n.PREMIER_PLUS_1="PREMIER_PLUS_1",n.PREMIER_PLUS_2="PREMIER_PLUS_2",n);let d=(e,t,a)=>{switch(e.toUpperCase()){case"STANDARD":return"Standard";case"ENTERPRISE":return"Enterprise";case"BUSINESS_CRITICAL":return"Business Critical";case"PREMIER":return"Premier";case"PREMIER_PLUS_1":return"Premier Plus 1";case"PREMIER_PLUS_2":return"Premier Plus 2";case"VPS":if(a)return t({id:"Virtual Private Snowflake (VPS)"});return t({id:"VPS"});default:return t({id:"Unknown"})}},u=(e,t,a,n)=>{if(!(null==a?void 0:a[t]))return"";let l=a[t].pricing;if(!l)return"";let d=e.toLowerCase();switch(d){case s.c.STANDARD:case s.c.ENTERPRISE:case s.c.BUSINESS_CRITICAL:if(l[o._.CREDIT][d][r.F.USD]&&l[o._.STORAGE][i.Z.ON_DEMAND][r.F.USD])return n({id:"- ${credit} Credit, ${storage} TB"},{credit:l[o._.CREDIT][d][r.F.USD],storage:l[o._.STORAGE][i.Z.ON_DEMAND][r.F.USD]});if(l[o._.CREDIT][d][r.F.USD])return n({id:"- ${credit} Credit"},{credit:l[o._.CREDIT][d][r.F.USD]});if(l[o._.STORAGE][i.Z.ON_DEMAND][r.F.USD])return n({id:"- ${storage} TB"},{storage:l[o._.STORAGE][i.Z.ON_DEMAND][r.F.USD]});return"";default:return""}};function c(e){return!!e&&("enterprise"===e.toLowerCase()||"business critical"===e.toLowerCase()||"vps"===e.toLowerCase())}function m(e){return"BUSINESS_CRITICAL"===e||"VPS"===e}},475501:function(e,t,a){a.d(t,{F:()=>r});var n,r=((n={}).USD="usd",n.EUR="eur",n.AUD="aud",n.GBP="gbp",n)},891263:function(e,t,a){a.d(t,{c:()=>r});var n,r=((n={}).STANDARD="standard",n.ENTERPRISE="enterprise",n.BUSINESS_CRITICAL="business_critical",n)},287483:function(e,t,a){a.d(t,{_:()=>r});var n,r=((n={}).CREDIT="credit",n.STORAGE="storage",n)},299987:function(e,t,a){a.d(t,{Z:()=>r});var n,r=((n={}).ON_DEMAND="ondemand",n.CAPACITY="capacity",n)},616975:function(e,t,a){a.d(t,{Db:()=>o,SL:()=>s,f1:()=>i,ki:()=>c});var n=a(399808),r=a(638356);function s(e){let t={keyId:e};return function(e){let{keyId:t}=e;if(null!=l[t])throw Error(`App state key ${t} already registered`);l[t]=e}(t),t}let o="only_one";function i(e){let t=(0,r.useStore)(),a=(0,r.useDispatch)();return{get:(a,n)=>{let r=u(e,a)(t.getState());if(n&&!r)throw Error(`State not found for key '${e.keyId}', id: ${a}`);return r},set:(t,n)=>{a({type:"SetAppState",key:e,id:t,value:n})},use(t,a){let n=u(e,t),s=(0,r.useSelector)(n);if(a&&!s)throw Error(`State not found for key '${e.keyId}', id: ${t}`);return s},update:(t,n)=>{a({type:"UpdateAppState",key:e,id:t,updater:n})}}}let l={};function d(e){let t=e.indexOf("/");return -1===t?{path:e}:{namespace:e.substring(0,t),path:e.substring(t+1)}}function u(e,t){let{namespace:a,path:n}=d(e.keyId);return e=>{var r,s,o;return null==a?null==(r=e.appstate[n])?void 0:r[t]:null==(o=e.appstate[a])||null==(s=o[n])?void 0:s[t]}}function c(e,t){return void 0===e?{}:"SetAppState"===t.type?function(e,t){let{key:a,id:r,value:s}=t,{namespace:o,path:i}=d(a.keyId);return(0,n.Uy)(e,e=>{m(e,o,i)[r]=s})}(e,t):"UpdateAppState"===t.type?function(e,t){let{key:a,id:r,updater:s}=t,{namespace:o,path:i}=d(a.keyId);return(0,n.Uy)(e,e=>{let t=m(e,o,i),a=t[r];t[r]=(0,n.Uy)(a,e=>{s(e)})})}(e,t):e}function m(e,t,a){let n=e;if(null!=t){var r;n[t]=null!=(r=n[t])?r:{},n=n[t]}return n[a]=n[a]||{},n[a]}},710296:function(e,t,a){a.d(t,{F:()=>r});var n,r=((n={}).HAS_SHOW_DEFAULT_EXPERIENCE_FEEDBACK_MODAL="HAS_SHOW_DEFAULT_EXPERIENCE_FEEDBACK_MODAL",n.HIDE_MONETIZATION_TERMS_BANNER="hide_monetization_terms_banner",n.MESSAGES_KEY="api_profiler_pinned_messages",n.SETTINGS_KEY="api_profiler_options",n.DISMISSED_PRICE_CHANGE_NOTIFICATIONS_KEY="DISMISSED_PRICE_CHANGE_NOTIFICATIONS",n.DISMISSED_LISTING_RETIREMENT_NOTIFICATIONS_KEY="DISMISSED_LISTING_RETIREMENT_NOTIFICATIONS",n.HAS_SEEN_FOLDER_ROLE_MIGRATION_BANNER="hasSeenFolderRoleMigration",n.SDT_TELEMETRY_CONFIG="telemetry-config",n.NAPE_APP_PACKAGE_STAGE_SELECTED_VALUE="NAPE_APP_PACKAGE_STAGE_SELECTED_VALUE",n.HAS_SEEN_ON_DEMAND_DIALOG="hasSeenOnDemandDialog",n.HAS_DISMISSED_ENABLE_ECO_BANNER="hasDismissedEnableECOBanner",n.NAX_APPS_LIST_DISPLAY_FORMAT="NAX_APPS_LIST_DISPLAY_FORMAT",n.NAX_APP_SPEC_WIZARD_DISMISS_TIMESTAMPS="snowflake-native-apps-configuration-dismiss-timestamps",n.ONBOARDING_HAS_SEEN_DATA_LOAD="onboardingHasSeenDataLoad",n.ONBOARDING_HAS_DISMISSED_HOME_BANNER="onboardingHasDismissedHomeBanner",n.ONBOARDING_HAS_SEEN_TUTORIAL="onboardingHasSeenTutorial",n.WORKSHEETS_ONE_MILLION_ROWS="WORKSHEETS_ONE_MILLION_ROWS",n.SNOWSIGHT_DEVELOPER_TOOLS="snowsight-developer-tools",n.FORCE_REDUX_DEVTOOLS_ON_IN_PROD="force-redux-devtools-on-in-prod",n.FORCE_REDUX_DEVTOOLS_OFF_IN_LOCAL="force-redux-devtools-off-in-local",n.HAS_SEEN_WELCOME_DIALOG="hasSeenWelcomeDialog",n.HAS_SEEN_AND_ACKNOWLEDEG_MFA_ENFORCEMENT_DIALOG_DATE="hasSeenAndAcknowledgedMfaEnforcementDialogDate",n.HAS_POSTPONED_ADDITIONAL_MFA="hasSeenAndPostponedAdditionalMfaDialogDate",n.HAS_SEEN_PRPR_DIALOG="hasSeenPrPrDialog",n.HAS_SEEN_CLASSIC_SUNSET_DIALOG="hasSeenClassicSunsetDialog",n.SNOWSIGHT_ACCESSIBILITY_CHECKER="snowsight-accessibility-checker",n.NOTEBOOKS_HAS_SEEN_DISMISSED_NAVIGATE_AWAY_PROMPT="NOTEBOOKS_HAS_SEEN_NAVIGATE_AWAY_PROMPT",n.NOTEBOOKS_HAS_SEEN_DISMISSED_SETTINGS_BUTTON_TIP="NOTEBOOKS_HAS_SEEN_DISMISSED_SETTINGS_BUTTON_TIP",n.NOTEBOOKS_HAS_DISMISSED_RECONNECT_EDUCATIONAL_POPOVER="NOTEBOOKS_HAS_DISMISSED_RECONNECT_EDUCATIONAL_POPOVER",n.NOTEBOOKS_HAS_DISMISSED_PYTHON_ENVIRONMENT_EDUCATIONAL_POPOVER="NOTEBOOKS_HAS_DISMISSED_PYTHON_ENVIRONMENT_EDUCATIONAL_POPOVER",n)},632463:function(e,t,a){a.d(t,{e:()=>n});function n(e){return e.filter(Boolean)}},650680:function(e,t,a){a.d(t,{RC:()=>l,XO:()=>o,eT:()=>r,rt:()=>m,sG:()=>d,vv:()=>i,zC:()=>c});let n=(0,a(747456).createSlice)({name:"account-replication-bulk-failover-slice",initialState:{failoverGroupStatusByName:{},successfulGroupsCount:0,successfulConnectionsCount:0,isFailoverInProgress:!1,isFailoverCompleted:!1,totalGroupsToFailover:0,totalConnectionsToFailover:0},reducers:{addFailedGroups:(e,t)=>{t.payload.forEach(({groupName:t,status:a})=>{e.failoverGroupStatusByName[t]=a})},setSuccessfulGroupsCount:(e,t)=>{e.successfulGroupsCount=t.payload},setSuccessfulConnectionsCount:(e,t)=>{e.successfulConnectionsCount=t.payload},markGroupsAsSuccessful:(e,t)=>{t.payload.forEach(t=>{delete e.failoverGroupStatusByName[t]}),e.successfulGroupsCount=Math.min(e.successfulGroupsCount+t.payload.length,e.totalGroupsToFailover)},startFailover:(e,t)=>{e.isFailoverInProgress=!0,e.successfulGroupsCount=0,e.successfulConnectionsCount=0,e.totalGroupsToFailover=t.payload.totalGroups,e.totalConnectionsToFailover=t.payload.totalConnections},markFailoverEnded:e=>{e.isFailoverInProgress=!1},markFailoverAsCompleted:e=>{e.isFailoverInProgress=!1,e.isFailoverCompleted=!0},clearPendingGroups:e=>{e.failoverGroupStatusByName={}}}}),{addFailedGroups:r,setSuccessfulGroupsCount:s,setSuccessfulConnectionsCount:o,markGroupsAsSuccessful:i,startFailover:l,markFailoverEnded:d,markFailoverAsCompleted:u,clearPendingGroups:c,bulkFailoverSliceReducer:m}={...n.actions,bulkFailoverSliceReducer:n.reducer}},512289:function(e,t,a){a.d(t,{OQ:()=>o,ZP:()=>r,gY:()=>s});let n=(0,a(747456).createSlice)({name:"cost-anomaly-slice",initialState:{selectedAnomalyData:null,topSpendAccountData:null},reducers:{setSelectedAnomalyData:(e,t)=>{t.payload&&(e.selectedAnomalyData=t.payload)},setTopSpendAccountData:(e,t)=>{t.payload&&(e.topSpendAccountData=t.payload)}}}),r=n.reducer,{setSelectedAnomalyData:s,setTopSpendAccountData:o}=n.actions},695501:function(e,t,a){a.d(t,{H8:()=>y,ZP:()=>h,_g:()=>E,aA:()=>f,mt:()=>g});var n=a(747456),r=a(411733),s=a(457845),o=a(30619),i=a(879865),l=a(576223);let d=(e,t,a)=>{t in e[o.bb]||(e[o.bb][t]={});let{snowflakeRequestId:n}=a;"string"==typeof n&&""!==n?e[o.bb][t][n]=a:r.cM.warn("bobaSlice",`query model with a missing request id: '${a.snowflakeRequestId}'`)},u=(e,t)=>{delete e[o.bb][t]},c=(e,t,a)=>{let{snowflakeRequestId:n}=a;if("string"==typeof n&&""!==n){let r=Object.freeze(a),i=(0,s.d)(t);i in e[o.Uq]||(e[o.Uq][i]={}),e[o.Uq][i][n]=r}else r.cM.warn("bobaSlice","Received Query Results Model w/o request id",a)},m=(e,t)=>{delete e[o.Uq][t]},p=(0,n.createSlice)({name:"boba",initialState:{[o.CA]:{},[o.Uq]:{},[o.bb]:{}},reducers:{batchServerModelsSet:(e,t)=>{let{models:a}=t.payload;for(let[t,n]of Object.entries(a))for(let[a,s]of Object.entries(n))switch(t){case"queries":d(e,a,s);break;case"queryResults":c(e,a,s);break;case"drafts":e[o.CA][a]=s;break;default:r.cM.error(Error(`unexpected model type sent to reducer: ${t}`))}},serverModelSet:(e,t)=>{let{payload:a}=t;switch(a.namespace){case i.TV:d(e,a.id,a.value);break;case i.xe:c(e,a.id,a.value);break;case i.ui:e[o.CA][a.id]=a.value}},serverModelRemoved:(e,t)=>{let{payload:a}=t;switch(a.namespace){case i.xe:case i.TV:u(e,a.id),m(e,a.id);break;case i.ui:delete e[o.CA][a.id]}},statsUpdated:(e,t)=>{var a,n;let{payload:r}=t,s=(0,l.b)(e,r.id);if(null==s||null==(a=s.sheet)?void 0:a.cols)for(let[e,t]of Object.entries(s.sheet.cols))(null==(n=r.stats)?void 0:n[e])&&(t.stats=r.stats[e])}}}),h=p.reducer,{serverModelSet:E,serverModelRemoved:y,statsUpdated:f,batchServerModelsSet:g}=p.actions},469581:function(e,t,a){a.d(t,{$U:()=>l,ZP:()=>i});var n=a(747456),r=a(880002),s=a(141257);let o=(0,n.createSlice)({name:"displayOptions",initialState:{},reducers:{resizeColsApplied:(e,t)=>{let{payload:a}=t,{queryId:n,columnIndex:r,updatedWidth:s}=a;void 0===e[n]&&(e[n]={columnSizes:{}}),e[n].columnSizes[r]={width:s}}},extraReducers:e=>{e.addMatcher(s.Z.endpoints.coldbrewGetQueryMetadata.matchFulfilled,(e,t)=>{var a;let{queryId:n,result:s,status:o}=t.payload;(null==o?void 0:o.summary)===r.F.summary.SUCCESS&&(null==s||null==(a=s.displayOptions)?void 0:a.columnSizes)&&(void 0===e[n]&&(e[n]={columnSizes:{}}),e[n].columnSizes=s.displayOptions.columnSizes)})}}),i=o.reducer,{resizeColsApplied:l}=o.actions},635725:function(e,t,a){a.d(t,{X:()=>n});let n=(0,a(747456).createAction)("executionRunRequested")},541111:function(e,t,a){a.d(t,{z5:()=>B,bm:()=>D,xy:()=>Q,VS:()=>w,pk:()=>L,kM:()=>q,Ii:()=>j,Gt:()=>G,pV:()=>R,aJ:()=>P,g7:()=>k,wJ:()=>C,R1:()=>x,Km:()=>J,Mc:()=>F,pc:()=>b,fu:()=>O,zi:()=>K,Cv:()=>M,VX:()=>$,ZP:()=>T,P5:()=>v,o_:()=>U,Ol:()=>V,lw:()=>W});var n=a(747456),r=a(954104),s=a(411733),o=a(875934),i=a.n(o),l=a(601562),d=a(315183),u=a(896032),c=a(695501),m=a(781708),p=a(457845),h=a(610327),E=a(741974),y=a(570052),f=a(876466);function g(e){return e.clientUUID?e:{...e,clientUUID:m.Z()}}function S(e,t){let a=e||{};if(!t.length)return a;let n=new Map;return t.forEach(t=>{var r,s,o,i,l,d;let{pid:u,...c}=t,m=new E.e(u,c),f=function(e){var t,a;let{snowflakeRequestId:n,snowflakeQueryId:r,startDate:s,endDate:o,gsQueryMetadata:i,error:l,queryRange:d,queryContext:u,version:c,runnable:m,runner:h,query:E,chartInfos:f,hasRequiredRole:g,resultsViewable:S,requiredRoles:_}=e,A=s?new Date(s).getTime():0,I=o?new Date(o).getTime():0,{status:T,statesDuration:R,selectedFragmentCount:C,warehouseName:O,totalDuration:N,stats:v,warehouseExternalSize:b,state:M,sqlText:w,errorMessage:L,errorCode:D}=i||{},{pid:P}=e,x={worksheetId:(0,p.d)(P),snowflakeQueryId:r,snowflakeRequestId:n,startDate:A,endDate:I,status:T,statesDuration:"string"==typeof R?(0,y.f)(R):R,selectedFragmentCount:C,warehouseName:O,totalDuration:N,stats:v,queryContext:u,queryRange:d,error:l,gsErrorMessage:L,gsErrorCode:D,version:c,runnable:m,runner:h,warehouseExternalSize:b,rows:null!=(t=null==v?void 0:v.producedRows)?t:0,state:M,queryText:w,chartInfos:f,hasRequiredRole:g,resultsViewable:S,requiredRoles:_};return!x.queryText&&E&&(x.queryText=E.slice(null!=(a=null==d?void 0:d.start)?a:0,null==d?void 0:d.end)),x}(m),{snowflakeRequestId:g,startDate:S,worksheetId:_}=f,A=null==(r=e[_])?void 0:r.queries[g];if(m&&A&&function(e,t){let a=(0,h.o)(e);return(0,h.o)(t)&&!a}({status:null==(s=m.gsQueryMetadata)?void 0:s.status,snowflakeRequestId:m.snowflakeRequestId},A))return;let[,I=0]=null!=(d=n.get(_))?d:function(e,t){var a,n,r,s;let o=null==(a=t[e])?void 0:a.currentExecution;if(!o)return[void 0,void 0];{let a=null==(s=t[e])||null==(r=s.queries)||null==(n=r[o])?void 0:n.startDate;return[o,a||void 0]}}(_,a);S&&I<S&&n.set(_,[g,S]),a[_]={...(null==a?void 0:a[_])||{},queries:{...(null==a||null==(o=a[_])?void 0:o.queries)||{},[g]:{...(null==a||null==(l=a[_])||null==(i=l.queries)?void 0:i[g])||{},...f}}}}),n.size&&(a=function(e,t){let a={...e};for(let[n,[r]]of t.entries())(0,f.o)()?void 0===e[n].currentExecution&&(a[n].currentExecution=r):a[n].currentExecution=r;return a}(a,n)),a}let _={[l.P]:{queryIdByPid:{},requestIdByPid:{},mostRecentlyExecutedPid:void 0,newQueriesByPid:{},queryAPIErrorsByPid:{},fileDownloadError:void 0,queriesAwaitingAPIByPid:{},pidWithMostRecentExecutionCompletion:null,resultsNotFoundPids:[],notFoundPids:[],currentUserSelectionsByPid:{},displayModesByPid:{}},executionsByWorksheet:{}},A=(0,n.createSlice)({name:"executions",initialState:_,reducers:{updateDisplayModeForPid:(e,t)=>{let{pid:a,mode:n}=t.payload;e[l.P].displayModesByPid[a]=n},updateMostRecentlyExecutedPid:(e,t)=>{e[l.P].mostRecentlyExecutedPid=t.payload.pid},updateQueryIdByPid:(e,t)=>{let{pid:a,queryId:n}=t.payload;e[l.P].queryIdByPid[a]=n},deleteQueryIdByPid:(e,t)=>{delete e[l.P].queryIdByPid[t.payload.pid]},updateRequestIdByPid:(e,t)=>{let{pid:a,requestId:n}=t.payload;e[l.P].requestIdByPid[a]=n},updateNewQueriesByPid:(e,t)=>{let{pid:a,value:n}=t.payload;e[l.P].newQueriesByPid[a]=n},deleteNewQueriesByPid:(e,t)=>{let{pid:a}=t.payload;delete e[l.P].newQueriesByPid[a]},updateQueryAPIErrorsByPid:(e,t)=>{let{pid:a,error:n}=t.payload;e[l.P].queryAPIErrorsByPid[a]=n},updateFileDownloadError:(e,t)=>{let{value:a}=t.payload;e[l.P].fileDownloadError=a},updateQueriesAwaitingAPIByPid:(e,t)=>{let{pid:a,value:n}=t.payload;e[l.P].queriesAwaitingAPIByPid[a]=n},deleteQueriesAwaitingAPIByPid:(e,t)=>{var a;let{pid:n}=t.payload;null==(a=e[l.P].queriesAwaitingAPIByPid)||delete a[n]},updatePidWithMostRecentExecutionCompletion:(e,t)=>{let{pid:a}=t.payload;e[l.P].pidWithMostRecentExecutionCompletion=a},updateNotFoundPids:(e,t)=>{let{pid:a}=t.payload;-1===e[l.P].notFoundPids.indexOf(a)&&e[l.P].notFoundPids.push(a)},deleteNotFoundPids:(e,t)=>{let{pid:a}=t.payload,n=e[l.P].notFoundPids.indexOf(a);-1!==n&&e[l.P].notFoundPids.splice(n,1)},updateResultsNotFoundPids:(e,t)=>{let{pid:a}=t.payload;-1!==e[l.P].resultsNotFoundPids.indexOf(a)&&e[l.P].resultsNotFoundPids.push(a)},deleteResultsNotFoundPids:(e,t)=>{let{pid:a}=t.payload,n=e[l.P].resultsNotFoundPids.indexOf(a);-1!==n&&e[l.P].resultsNotFoundPids.splice(n,1)},updateCurrentExecution:(e,t)=>{var a,n,o;let{worksheetId:d,requestId:u,executionContext:c,collidedRequestId:m,query:p}=t.payload;if(e[l.$][d]||(e[l.$][d]={queries:{}}),m){let t=e[l.$][d].queries[m];return t?(t.snowflakeRequestId=u,e[l.$][d].queries[u]=t,delete e[l.$][d].queries[m],void(e[l.$][d].currentExecution===m&&(e[l.P].requestIdByPid[d]=u,e[l.$][d].currentExecution=u))):void s.cM.error(Error(`fail to apply collision-resolved request id (${u}) to nil execution id'd by ${m}.`))}let h=e[l.P].currentUserSelectionsByPid[d],E=null!=(n=null==h?void 0:h.currentIndex)?n:0,y=e[l.$][d].currentSelectionForQueryRun,f=null==h?void 0:h.queryRanges[E],S=(null==y||null==(a=y.queryRanges)?void 0:a[y.currentIndex])||f,{chartInfos:_=[],hasRequiredRole:A=!1,resultsViewable:I=!1,requiredRoles:T=null}=e[l.$][d].queries[null!=(o=e[l.$][d].currentExecution)?o:""]||{};e[l.P].requestIdByPid[d]=u,e[l.$][d]={queries:{...e[l.$][d].queries,[u]:{snowflakeRequestId:u,startDate:Date.now(),status:r.QueryStatus.INIT,queryRange:S,worksheetId:d,queryContext:c,queryText:p&&S?p.slice(S.start,S.end):"",runnable:!0,...{chartInfos:_,hasRequiredRole:A,resultsViewable:I,requiredRoles:T}}},currentExecution:u,currentSelectionForQueryRun:i()(y)?g({...h,isPendingForCancellationConfirmation:!1}):g(y)}},updateCurrentUserSelectionByPid:(e,t)=>{let{pid:a,queryRanges:n,currentIndex:r,worksheetContentsSnapshot:s}=t.payload;e[l.P].currentUserSelectionsByPid[a]={...e[l.P].currentUserSelectionsByPid[a]||{},queryRanges:n,currentIndex:null!=r?r:0,worksheetContentsSnapshot:s}},updateCurrentExecutionIdForWorksheet:(e,t)=>{let{worksheetId:a,requestId:n}=t.payload,r=e[l.$][a];r&&n in r.queries&&(r.currentExecution=n)},updateSelectionForQueryRunFromUserSelection:(e,t)=>{let{pid:a}=t.payload;e[l.$][a]||(e[l.$][a]={queries:{}}),e[l.$][a].currentSelectionForQueryRun=g(e[l.P].currentUserSelectionsByPid[a])},updateSelectionForQueryRun:(e,t)=>{var a,n;let{pid:r,currentIndex:s}=t.payload;e[l.$][r]||(e[l.$][r]={queries:{}}),i()(null==(n=e[l.$])||null==(a=n[r])?void 0:a.currentSelectionForQueryRun)?e[l.$][r].currentSelectionForQueryRun=g(e[l.P].currentUserSelectionsByPid[r]):e[l.$][r].currentSelectionForQueryRun={...e[l.$][r].currentSelectionForQueryRun,currentIndex:s}},resetSelectionForQueryRun:(e,t)=>{let{pid:a}=t.payload;e[l.$][a]&&(e[l.$][a].currentSelectionForQueryRun={})},currentExecutionCancellationRequested:(e,t)=>{var a;let{worksheetId:n}=t.payload,{currentSelectionForQueryRun:r}=null!=(a=e[l.$][n])?a:{};r&&(r.isPendingForCancellationConfirmation=!0)},currentExecutionCancellationConcluded:(e,t)=>{var a;let{worksheetId:n}=t.payload,{currentSelectionForQueryRun:r}=null!=(a=e[l.$][n])?a:{};r&&(r.isPendingForCancellationConfirmation=!1)},setExecutionError:(e,t)=>{let{worksheetId:a,requestId:n,error:r}=t.payload;e[l.$][a].queries[n].error=r},setExecutionErrorStatus:(e,t)=>{let{worksheetId:a,requestId:n,errorStatus:r}=t.payload;e[l.$][a].queries[n].errorStatus=r}},extraReducers:e=>{e.addCase(c._g,(e,t)=>{(0,u.g)(t)&&I(t.payload.value)&&(e.executionsByWorksheet=S(e.executionsByWorksheet,[t.payload.value]))}),e.addCase(c.mt,(e,t)=>{let{models:a}=t.payload;if(a.queries){let t=Object.values(a.queries).filter(e=>I(e));e.executionsByWorksheet=S(e.executionsByWorksheet,function(e){var t;let a=null==(t=d.IL.services.ambientUserContext.user())?void 0:t.id;return e.filter(e=>e.runner===a)}(t))}})}});function I(e){return e.snowflakeRequestId&&e.version>1}let T=A.reducer,{updateDisplayModeForPid:R,updateMostRecentlyExecutedPid:C,updateQueryIdByPid:O,deleteQueryIdByPid:N,updateRequestIdByPid:v,updateNewQueriesByPid:b,deleteNewQueriesByPid:M,updateQueryAPIErrorsByPid:w,updateFileDownloadError:L,updateQueriesAwaitingAPIByPid:D,deleteQueriesAwaitingAPIByPid:P,updatePidWithMostRecentExecutionCompletion:x,updateNotFoundPids:k,updateResultsNotFoundPids:U,deleteNotFoundPids:F,deleteResultsNotFoundPids:q,updateCurrentExecution:$,updateCurrentExecutionIdForWorksheet:B,updateCurrentUserSelectionByPid:G,updateSelectionForQueryRun:V,resetSelectionForQueryRun:j,setExecutionError:Q,setExecutionErrorStatus:H,updateSelectionForQueryRunFromUserSelection:W,currentExecutionCancellationRequested:K,currentExecutionCancellationConcluded:J}=A.actions},825746:function(e,t,a){a.d(t,{l:()=>n.l,TE:()=>u,XG:()=>d,CN:()=>S,ci:()=>n.ci,iw:()=>n.iw,kx:()=>n.kx,Zi:()=>n.Zi,IV:()=>n.IV,nA:()=>f,$w:()=>n.$w,AS:()=>n.AS,hI:()=>n.hI,pX:()=>n.pX,rE:()=>n.rE,UH:()=>n.UH,Ry:()=>n.Ry,wN:()=>n.wN,_N:()=>E,JU:()=>g});var n=a(48110),r=a(594696),s=a(457845),o=a(601562),i=a(612620),l=a(543936);let d=(0,r.createSelector)([l.$,(e,t)=>(0,s.d)(t)],(e,t)=>{var a;return null==(a=e[o.$][t])?void 0:a.currentExecution}),u=(0,r.createSelector)([e=>e,d,(e,t)=>(0,s.d)(t)],(e,t,a)=>t?(0,i.s)(e,a,t):void 0),c=(0,r.createSelector)([l.$,(e,t)=>(0,s.d)(t)],(e,t)=>{var a;let n=null==(a=e[o.$][t])?void 0:a.queries;if(n)return Object.values(n).sort((e,t)=>t.startDate-e.startDate).shift()}),m=(0,r.createSelector)([u,c],(e,t)=>!!(t&&(null==e?void 0:e.snowflakeRequestId)===t.snowflakeRequestId));var p=a(610327),h=a(528834);let E=(e,t)=>{let a=u(e,t);return!!a&&(!(0,p.o)(a)&&!(0,h.M_)(a)||(0,n.JX)(e,t))};var y=a(954104);(0,r.createSelector)([m,n.AU,u],(e,t,a)=>e&&(t||(null==a?void 0:a.status)===y.QueryStatus.ABORTING));let f=(0,r.createSelector)([i.s],e=>{var t;let a=null==e?void 0:e.error;return null!=(t=null==a?void 0:a.message)?t:(null==e?void 0:e.gsErrorMessage)||void 0});a(371818);let g=(0,r.createSelector)([l.$,(e,t)=>(0,s.d)(t)],(e,t)=>{var a;return null==(a=e[o.$][t])?void 0:a.queries}),S=(0,r.createSelector)([l.$,(e,t)=>t],(e,t)=>{var a,n;let r=null!=(n=null==(a=e[o.$][t])?void 0:a.queries)?n:{},s=[];for(let e of Object.values(r))(0,p.o)(e)||(0,h.M_)(e)||s.push(e.snowflakeRequestId);return s})},48110:function(e,t,a){a.d(t,{$w:()=>l,AS:()=>u,AU:()=>A,IV:()=>E,JX:()=>_,Ry:()=>p,UH:()=>c,V6:()=>S,Zi:()=>m,ci:()=>f,hI:()=>s,iw:()=>y,kw:()=>i,kx:()=>r,l:()=>h,pX:()=>o,rE:()=>g,wN:()=>d});var n=a(601562);let r=e=>e.analytics.executions[n.P].mostRecentlyExecutedPid,s=(e,t)=>{var a;return null==(a=e.analytics.executions[n.P].queryIdByPid)?void 0:a[t]},o=(e,t)=>{var a;return null==(a=e.analytics.executions[n.P].requestIdByPid)?void 0:a[t]},i=(e,t)=>e.analytics.executions[n.P].displayModesByPid[t],l=e=>e.analytics.executions[n.P].fileDownloadError,d=(e,t)=>{var a;return null==(a=e.analytics.executions[n.P].newQueriesByPid)?void 0:a[t]},u=(e,t)=>{var a;return null==(a=e.analytics.executions[n.P].queryAPIErrorsByPid)?void 0:a[t]},c=(e,t)=>{var a;return null==(a=e.analytics.executions[n.P].queriesAwaitingAPIByPid)?void 0:a[t]},m=e=>e.analytics.executions[n.P].pidWithMostRecentExecutionCompletion,p=(e,t)=>-1!==e.analytics.executions[n.P].notFoundPids.indexOf(t),h=(e,t)=>-1!==e.analytics.executions[n.P].resultsNotFoundPids.indexOf(t),E=(e,t)=>e.analytics.executions[n.P].currentUserSelectionsByPid[t],y=(e,t)=>{var a;return null==(a=e.analytics.executions[n.$][t])?void 0:a.currentSelectionForQueryRun},f=(e,t)=>{let{currentSelectionForQueryRun:a}=e.analytics.executions[n.$][t]||{};if(!a)return{};let{currentIndex:r,queryRanges:s}=a;return s?s[r]:{}},g=(e,t)=>{var a,r;return null==(r=e.analytics.executions[n.$][t])||null==(a=r.currentSelectionForQueryRun)?void 0:a.currentIndex},S=(e,t)=>{var a,r;let s=null==(a=e.analytics.executions[n.$][t])?void 0:a.currentSelectionForQueryRun,o=null==s||null==(r=s.queryRanges)?void 0:r.length,i=null==s?void 0:s.currentIndex;return"number"==typeof o&&"number"==typeof i&&o>1&&i<o-1},_=(e,t)=>{var a,r;let s=null==(a=e.analytics.executions[n.$][t])?void 0:a.currentSelectionForQueryRun,o=null==s||null==(r=s.queryRanges)?void 0:r.length,i=null==s?void 0:s.currentIndex;return"number"==typeof o&&"number"==typeof i&&o>1&&i<o},A=(e,t)=>{var a,r;return!!(null==(r=e.analytics.executions[n.$][t])||null==(a=r.currentSelectionForQueryRun)?void 0:a.isPendingForCancellationConfirmation)}},612620:function(e,t,a){a.d(t,{s:()=>o});var n=a(594696),r=a(601562),s=a(543936);let o=(0,n.createSelector)([s.$,(e,t,a)=>[t,a]],(e,[t,a])=>{var n;return t?null==(n=e[r.$][t])?void 0:n.queries[a]:void 0})},371818:function(e,t,a){a.d(t,{q:()=>i});var n=a(594696),r=a(457845),s=a(601562),o=a(543936);let i=(0,n.createSelector)([o.$,(e,t)=>t],(e,t)=>{let a=(0,r.d)(t),n=e[s.$][a];if(!n)return;if(a!==t){let e=parseInt(t.split("@")[1],10);return Object.values(n.queries).find(t=>t.version===e)}let o=n.currentExecution;return o?n.queries[o]:void 0})},543936:function(e,t,a){a.d(t,{$:()=>s});var n=a(594696),r=a(119231);let s=(0,n.createSelector)([r.e],e=>e.executions)},860821:function(e,t,a){a.d(t,{k:()=>n});let n=e=>{if(0===e.length)return;let t=e.filter(e=>"startDate"in e).sort((e,t)=>new Date(t.startDate).getTime()-new Date(e.startDate).getTime());return t.length>0?t.shift():e.sort((e,t)=>new Date(t.modified).getTime()-new Date(e.modified).getTime()).shift()}},595527:function(e,t,a){a.d(t,{G:()=>o});var n=a(954104),r=a(454582),s=a(610327);let o=(e,t)=>!(!e||(0,r.q0)(e))&&(!t||e.snowflakeRequestId!==t.snowflakeRequestId||!t.sheet||!t.populated&&(e.status===n.QueryStatus.SUCCESS||!(0,s.o)(e)))},528834:function(e,t,a){a.d(t,{M_:()=>o});var n=a(954104);let r=[n.QueryStatus.ABORTED,n.QueryStatus.DISCONNECTED,n.QueryStatus.FAILED_WITH_ERROR,n.QueryStatus.FAILED_WITH_INCIDENT],s=[n.QueryHistoryState.FAILED,n.FailedQueryStates.FAILED_EXECUTION,n.FailedQueryStates.FAILED_NORMAL,n.FailedQueryStates.FAILED_WITH_INCIDENT],o=e=>!!e.error&&"rowdata"!==e.error.stage||(e.state?s.includes(e.state):r.includes(e.status))},876466:function(e,t,a){a.d(t,{o:()=>o});var n=a(700577),r=a(209268),s=a(315183);let o=()=>{let e=s.IL.services.featureFlags.isEnabled("UI_ENABLE_APEX_FEATURE_29"),t=localStorage.getItem(r.eM)===r.aw;return n.i.UI_ENABLE_APEX_FEATURE_23()&&e&&t}},998382:function(e,t,a){a.d(t,{Z:()=>r});var n=a(641182);let r=e=>{if(!e)return!1;let{populated:t,error:a,ready:r}=e;return t&&!r&&!a&&!n.J.isSheetResultTooLargeForStatsOrSearch(e._unprocessedSheet)}},133318:function(e,t,a){a.d(t,{ZP:()=>i,kh:()=>l,xb:()=>d});var n=a(747456),r=a(682858),s=a(486311);let o=(0,n.createSlice)({name:"selection",initialState:{},reducers:{selectionApplied:(e,t)=>{let{payload:a}=t,{rows:n=[],columns:r=[],cells:s}=a.selection;e[a.queryId]={rows:n,columns:r,cells:s}},selectionCleared:(e,t)=>{let{payload:a}=t;delete e[a.queryId]}},extraReducers:e=>{e.addCase(s.NL,(e,t)=>{let{queryId:a}=t.payload,n=e[a];n&&!(0,r.c7)(n)&&delete e[a]}),e.addCase(s.Vw,(e,t)=>{let{queryId:a}=t.payload,n=e[a];n&&!(0,r.M$)(n)&&delete e[a]}),e.addCase(s.Jr,(e,t)=>{let{queryId:a}=t.payload,n=e[a];n&&!(0,r.M$)(n)&&delete e[a]})}}),i=o.reducer,{selectionApplied:l,selectionCleared:d}=o.actions},587722:function(e,t,a){a.d(t,{v:()=>s});var n=a(594696),r=a(119231);let s=(0,n.createSelector)([r.e],e=>e.boba)},277334:function(e,t,a){a.d(t,{V:()=>o});var n=a(594696),r=a(119231);let s=(0,n.createSelector)([r.e],e=>e.displayOptions),o=(0,n.createSelector)([s,(e,t)=>t],(e,t)=>{var a;return null==(a=e[t])?void 0:a.columnSizes})},904605:function(e,t,a){a.d(t,{w:()=>s});var n=a(594696),r=a(442321);let s=(0,n.createSelector)([r.C,(e,t)=>t],(e,t)=>{var a;return(null==(a=e[t])?void 0:a.formats)?e[t].formats:null})},269802:function(e,t,a){a.d(t,{r:()=>d});var n=a(594696);class r extends Error{constructor(){super("object is not a Sheet"),this.name="SHEET_PARSE_ERROR"}}class s extends Error{constructor(e){super(`object is not a QueryResult${e?`: ${e}`:""}`),this.name="QUERY_RESULTS_PARSE_ERROR"}}function o(e){if("object"!=typeof e||null===e||!("snowflakeQueryId"in e)||"string"!=typeof e.snowflakeQueryId)throw new s;if("sheet"in e)try{var t=e.sheet;if("object"!=typeof t||null===t||"rows"in t&&("object"!=typeof t.rows||null===t.rows)||"cols"in t&&("object"!=typeof t.cols||null===t.cols)||"maxRow"in t&&"number"!=typeof t.maxRow)throw new r}catch(e){if(e instanceof r)throw new s("sheet field is not a sheet");throw e}}var i=a(587722),l=a(576223);(0,n.createSelector)([i.v,(e,t)=>t],(e,t)=>{let a=(0,l.b)(e,t);if(!a)throw Error(`no results for pid: "${t}"`);return o(a),a});let d=(0,n.createSelector)([i.v,(e,t)=>t,(e,t,a)=>a],(e,t,a)=>{var n,r,s;let i=(0,l.b)(e,t,a);return"object"!=typeof(n=null==i?void 0:i.sheet)||null===n||"rows"in n&&("object"!=typeof n.rows||null===n.rows)||"cols"in n&&("object"!=typeof n.cols||null===n.cols)||"maxRow"in n&&"number"!=typeof n.maxRow||i.canceled?{isResultsAvailable:!1,results:null,error:null==i?void 0:i.error,canceled:null!=(r=null==i?void 0:i.canceled)&&r,ready:null!=(s=null==i?void 0:i.ready)&&s}:(o(i),{isResultsAvailable:!0,results:i})})},576223:function(e,t,a){a.d(t,{S:()=>l,b:()=>d});var n=a(594696),r=a(457845),s=a(30619),o=a(587722),i=a(569447);let l=(0,n.createSelector)([o.v,(e,t)=>t,(e,t,a)=>a],(e,t,a)=>d(e,t,a)),d=(e,t,a)=>{var n,o,l,d,u;let c=(0,r.d)(t);if(c!==t){let a=parseInt(null==(n=t.split("@"))?void 0:n[1],10);if("number"==typeof a&&(null==(o=e[s.Uq])?void 0:o[c])){for(let t of Object.values(null==(l=e[s.Uq])?void 0:l[c]))if(t.version===a)return t}return null}if(a)return(null==(u=e[s.Uq])||null==(d=u[t])?void 0:d[a])||null;{let a=e[s.Uq][t];if(!a)return null;let n=(0,i.z)(e,t);return n&&a[n.snowflakeRequestId]||null}}},569447:function(e,t,a){a.d(t,{Z:()=>i,z:()=>l});var n=a(594696),r=a(30619),s=a(860821),o=a(587722);let i=(0,n.createSelector)([o.v,(e,t)=>t,(e,t,a)=>a],(e,t,a)=>l(e,t,a)),l=(e,t,a)=>{if(a){var n,o;return(null==(o=e[r.bb])||null==(n=o[t])?void 0:n[a])||null}{let a=e[r.bb][t];return a&&(0,s.k)(Object.values(a))||null}}},442321:function(e,t,a){a.d(t,{C:()=>s});var n=a(594696),r=a(119231);let s=(0,n.createSelector)([r.e],e=>e.transforms)},730598:function(e,t,a){a.d(t,{d:()=>n});let n=(0,a(747456).createAction)("getQueryMetadataFailed")},783665:function(e,t,a){a.d(t,{r:()=>n});let n=e=>{let t={};return null!==e.filter&&void 0!==e.filter&&(t.filter=e.filter),null!==e.hideColumns&&void 0!==e.hideColumns&&(t.hideColumns=e.hideColumns),null!==e.search&&void 0!==e.search&&(t.search=e.search),null!==e.sort&&void 0!==e.sort&&(t.sort=e.sort),t}},115791:function(e,t,a){a.d(t,{Q:()=>u,q:()=>d});var n=a(847345),r=a(880002),s=a(46225),o=a(682524),i=a(442321),l=a(486311);let d={status:r.Xr.status.ABORTING},u=(e,t=!0)=>{var a;let[r]=(0,o.j7)(),u=(0,s.CG)(e=>(0,i.C)(e))[null!=e?e:""],c=null==u?void 0:u.lastSucceededTransformsState,m=null!=(a=null==u?void 0:u.transformsQueryId)?a:null,p=(0,s.TL)();return n.useCallback(()=>{e&&m&&(null==c?void 0:c.queryResponseId)!==m&&(r({queryId:m,requestBody:d}),t&&(r({queryId:e,requestBody:{mostRecentTransform:c||{}}}),p((0,l.hY)({queryId:e}))))},[p,c,e,r,t,m])}},486311:function(e,t,a){a.d(t,{le:()=>v,hY:()=>x,H4:()=>w,Jr:()=>D,Vw:()=>M,k5:()=>P,T0:()=>k,MI:()=>F,ZP:()=>N,R1:()=>U,k2:()=>R,Ob:()=>L,NL:()=>b});var n=a(747456),r=a(777334),s=a.n(r),o=a(880002),i=a(141257),l=a(337902),d=a(66172),u=a.n(d);let c=e=>e.formatType===o.W0.formatType.DATE,m=e=>u()(e,e=>c(e)?{...e,formatType:"date"}:{...e,formatType:"number"}),p=[[">",o.JX.op.GREATER_THAN],["<",o.JX.op.LESS_THAN],["==",o.JX.op.EQUAL_TO],[">=",o.JX.op.GREATER_THAN_OR_EQUAL],["<=",o.JX.op.LESS_THAN_OR_EQUAL],["isnull",o.JX.op.IS_NULL],["json haskey",o.JX.op.HAS_KEY]],h=[["!=",o.JX.op.EQUAL_TO],["not isnull",o.JX.op.IS_NULL],["not json haskey",o.JX.op.HAS_KEY]],E={object:o.JX.op.IS_OBJECT,string:o.JX.op.IS_STRING,array:o.JX.op.IS_ARRAY,number:o.JX.op.IS_NUMBER,boolean:o.JX.op.IS_BOOLEAN},y=e=>{let t,{op:a,val:n}=e;if(!a)return null;let r=!1;for(let e=0;e<h.length;e++){let[n,s]=h[e];if(n===a){t=s,r=!0;break}}for(let e=0;e<p.length;e++){let[n,r]=p[e];if(n===a){t=r;break}}if("string"==typeof n){let e=E[n];if(e)return{op:e,negate:a.startsWith("not")}}return t?{op:t,negate:r,...n&&{value:String(n)}}:null},f=(e,t)=>{if(!e||!t)return null;let a=e.findIndex(e=>e.name===t);return -1!==a?a+1:null},g=new Set(["or","==","json haskey","json istype"]),S=new Set(["and","!=","not json haskey","not json istype"]),_=(e,t)=>{let a,{col:n,op:r,val:s}=e,i=f(t,n);if(null===i||!r)return null;let l=[];g.has(r)?a=o.yJ.op.OR:S.has(r)&&(a=o.yJ.op.AND);let d=[];return(s||(d.push({op:r}),a=o.yJ.op.AND),Array.isArray(s)&&(null==s?void 0:s.length)&&s.forEach(e=>{if(e)if("string"==typeof e)d.push({op:"==",val:String(e)});else{let{op:t,val:a}=e,n=Array.isArray(a);t&&!a?d.push({op:t}):n?a.forEach(e=>{t&&d.push({op:t,val:e})}):void 0!==a&&d.push({op:null!=t?t:"==",val:a})}}),d.forEach(e=>{let t=y(e);t&&l.push(t)}),a)?{colIndex:i,op:a,values:l}:null},A=(e,t)=>{if(!e||!t)return null;let a=[];return e.forEach((e,n)=>{t.has(e.name)&&a.push(n+1)}),a},I=(e,t)=>{if(!(null==e?void 0:e.length))return null;let a={formats:null,hideColumns:null,search:null,sort:null,transformId:null,transformsQueryId:null,previousTransformQueryId:null},n=Object.values(t);return e.forEach(e=>{if(!e)return;let{type:t}=e;if("sort"===t)a.sort=function(e,t){let{col:a,desc:n}=e,r=f(t,a);return null===r?null:{columnIndex:r,direction:n?o.Uq.direction.DESC:o.Uq.direction.ASC}}(e,n);else if("search"===t)a.search=function(e,t){let{cols:a,ignoreCase:n,searchTerm:r}=e,s=A(t,new Set(a));return r?{searchTerm:r,ignoreCase:!!n,...s&&{columnIndices:s}}:null}(e,n);else if("hideCols"===t)a.hideColumns=function(e,t){let{cols:a}=e,n=A(t,new Set(a));return(null==n?void 0:n.length)?{columnIndices:n}:null}(e,n);else if("formatCol"===t){a.formats||(a.formats={});let t=function(e,t){let{col:a,colType:n}=e,r=f(t,a);if(!(null==n?void 0:n.id)||null===r)return null;let s=null;if("date"===n.id){let e,{format:t,showTime:a}=n.date;s={columnIndex:r,formatType:"date",dateFormat:"month"===t?o.BB.dateFormat.LOCAL_MONTH_YEAR:"iso"===t&&a?o.BB.dateFormat.ISO_DATETIME_SEP_BY_SPACE:o.BB.dateFormat.ISO_DATE}}else if("number"===n.id&&n.number){let{thousandsSep:e,isPercent:t,showFullPrecision:a,precision:o}=n.number;s={columnIndex:r,formatType:"number",thousandsSep:e,isPercent:t,showFullPrecision:a,precision:o}}return s}(e,n);t&&(a.formats={...a.formats,[t.columnIndex]:t})}else if("filter"===t){let t=_(e,n);t&&(a.filter=t)}}),a};var T=a(783665);function R(e){return["transforms/sortApplied","transforms/hideColsApplied","transforms/searchApplied","transforms/filterApplied","transforms/filterReset"].includes(e.type)}let C=(e,t)=>{e[t]={...e[t],sort:null,hideColumns:null,search:null,transformsQueryId:null,transformId:null},delete e[t].filter,delete e[t].serverTransformedResults,e[t].isAwaitingLegacyTransforms=!1},O=(0,n.createSlice)({name:"transforms",initialState:{},reducers:{sortApplied:(e,t)=>{let{payload:a}=t;e[a.queryId]={...e[a.queryId],sort:a.sort}},hideColsApplied:(e,t)=>{let{payload:a}=t;if(""!==a.queryId){var n;let t=a.hideColumns;e[a.queryId]={...e[a.queryId],hideColumns:t};let r=e[a.queryId].filter;(null==r?void 0:r.colIndex)!==void 0&&(null==t||null==(n=t.columnIndices)?void 0:n.includes(r.colIndex))&&delete e[a.queryId].filter}},searchApplied:(e,t)=>{let{payload:a}=t;""!==a.queryId&&(e[a.queryId]={...e[a.queryId],search:a.search})},formatsApplied:(e,t)=>{var a;let{payload:n}=t,{queryId:r,formats:s}=n;e[r]={...e[r],formats:{...null==(a=e[r])?void 0:a.formats,[s.columnIndex]:s}}},formatsReset:(e,t)=>{var a,n;let{payload:r}=t,{queryId:s,columnIndex:o}=r;null==(n=e[s])||null==(a=n.formats)||delete a[o]},filterApplied:(e,t)=>{let{payload:a}=t;e[a.queryId]={...e[a.queryId],filter:a.filter},e[a.queryId].search&&(e[a.queryId].search=null)},filterReset:(e,t)=>{let{payload:a}=t,{queryId:n}=a;e[n]&&(delete e[n].filter,delete e[n].serverTransformedResults)},applyingTransformsInvalidated:(e,t)=>{let{queryId:a}=t.payload,{lastSucceededTransformsState:n}=e[a];if((null==n?void 0:n.transformSpec)&&(null==n?void 0:n.queryResponseId)){var r,s,o;let{transformSpec:t,queryResponseId:i,transformId:l}=n;e[a].sort=null!=(r=t.sort)?r:null,e[a].search=null!=(s=t.search)?s:null,e[a].hideColumns=null!=(o=t.hideColumns)?o:null,t.filter?e[a].filter=t.filter:delete e[a].filter,e[a].transformsQueryId=i,e[a].transformId=null!=l?l:null}else C(e,a)},localLegacyTransformsApplied:(e,t)=>{let{queryId:a,transformSpec:n}=t.payload;e[a]&&(e[a].lastSucceededTransformsState={transformSpec:n})},legacySheetLoaded:(e,t)=>{let{legacySheet:a,queryModel:n}=t.payload;if(!a||!n)return;let r=n.snowflakeQueryId;if(!r||"string"!=typeof r)return;let s=n.transforms,o=a.cols;if(s&&o&&!e[r]){let t=I(s,o);t&&(e[r]=t)}},transformsAppliedOnLegacyResults:(e,t)=>{let{queryId:a}=t.payload;e[a]&&(e[a].isAwaitingLegacyTransforms=!0,delete e[a].serverTransformedResults)}},extraReducers:e=>{e.addMatcher(R,(e,t)=>{var a;let{queryId:n}=t.payload;""!==n&&e[n]&&(e[n].previousTransformQueryId=null!=(a=e[n].transformsQueryId)?a:null,e[n].transformsQueryId=null,e[n].transformId=null,0===Object.keys((0,T.r)(e[n])).length&&delete e[n].lastSucceededTransformsState)}),e.addMatcher(i.Z.endpoints.coldbrewGetQueryMetadata.matchFulfilled,(e,t)=>{var a,n,r,s,i,l;let{queryId:d,result:u,status:c}=t.payload;if((null==c?void 0:c.summary)===o.F.summary.SUCCESS){if((null==u||null==(a=u.displayOptions)?void 0:a.formats)&&(e[d]={...e[d],formats:m(u.displayOptions.formats)}),(null==u||null==(n=u.mostRecentTransform)?void 0:n.transformSpec)&&(null==u||null==(r=u.mostRecentTransform)?void 0:r.queryResponseId)){let{transformSpec:t,queryResponseId:a,transformId:n}=u.mostRecentTransform;e[d]={...e[d],sort:null!=(s=t.sort)?s:null,hideColumns:null!=(i=t.hideColumns)?i:null,search:null!=(l=t.search)?l:null,transformsQueryId:a,transformId:null!=n?n:null},t.filter?e[d].filter=t.filter:delete e[d].filter;return}Object.entries(e).forEach(t=>{let[a,n]=t,{transformsQueryId:r,transformId:s}=n;r===d&&(e[a]={...e[a],lastSucceededTransformsState:{transformSpec:(0,T.r)(e[a]),queryResponseId:r,...s?{transformId:s}:{}}})})}}),e.addMatcher(i.Z.endpoints.coldbrewCreateTransformIfNotExists.matchFulfilled,(e,t)=>{let{queryId:a,requestBody:n}=t.meta.arg.originalArgs,{transformSpec:r}=n,{transformId:i,queryResponseId:l,queryResponseStatus:d}=t.payload;s()(r,(0,T.r)(e[a]))&&(l&&(e[a].transformsQueryId=l,e[a].transformId=i),(null==d?void 0:d.summary)===o.F.summary.SUCCESS&&r&&(e[a].lastSucceededTransformsState={transformSpec:r,queryResponseId:l,transformId:i}))}),e.addMatcher(l.OJ.endpoints.updateLegacyTransforms.matchFulfilled,(e,t)=>{let{queryId:a,transformSpec:n}=t.meta.arg.originalArgs;e[a].isAwaitingLegacyTransforms=!1,e[a].lastSucceededTransformsState={transformSpec:n}}),e.addMatcher(l.OJ.endpoints.updateLegacyTransforms.matchRejected,(e,t)=>{let{queryId:a}=t.meta.arg.originalArgs;C(e,a)}),e.addMatcher(l.OJ.endpoints.applyFullEvalLegacyTransforms.matchFulfilled,(e,t)=>{if(!t.payload)return;let{transformedResults:a}=t.payload,{queryId:n,transformSpec:r}=t.meta.arg.originalArgs;e[n].isAwaitingLegacyTransforms=!1,e[n].lastSucceededTransformsState={transformSpec:r},e[n].serverTransformedResults=Object.freeze(a)}),e.addMatcher(l.OJ.endpoints.applyFullEvalLegacyTransforms.matchRejected,(e,t)=>{let{queryId:a}=t.meta.arg.originalArgs;C(e,a)})}}),N=O.reducer,{sortApplied:v,hideColsApplied:b,searchApplied:M,formatsApplied:w,formatsReset:L,filterApplied:D,filterReset:P,applyingTransformsInvalidated:x,legacySheetLoaded:k,localLegacyTransformsApplied:U,transformsAppliedOnLegacyResults:F}=O.actions},22322:function(e,t,a){a.d(t,{W1:()=>o,Al:()=>i.Al,jV:()=>l,Dn:()=>i.Dn});var n=a(594696),r=a(119231);let s=(0,n.createSelector)([r.e],e=>e.worksheets),o=(0,n.createSelector)([s],e=>e.activeWorksheet);var i=a(171944);let l=(e,t)=>{var a;return null==(a=(0,i.Al)(e,t))?void 0:a.executionContext}},171944:function(e,t,a){a.d(t,{Al:()=>r,Dn:()=>s,_M:()=>o,yE:()=>i});var n=a(578073);let r=(e,t)=>{var a;return null==(a=e.analytics.worksheets[n.J])?void 0:a[t]},s=(e,t)=>{var a;return null==(a=r(e,t))?void 0:a.queryLanguage},o=(e,t)=>{var a;return null==(a=r(e,t))?void 0:a.slug},i=(e,t)=>{var a;return null==(a=r(e,t))?void 0:a.runnable}},682524:function(e,t,a){a.d(t,{$U:()=>i,Ef:()=>s,Hi:()=>r,PS:()=>d,j7:()=>o});var n=a(41598);let{useColdbrewGetQueryChunkQuery:r,useColdbrewCreateTransformIfNotExistsMutation:s,useColdbrewPatchQueryMetadataMutation:o,useColdbrewCreateDownloadTokenMutation:i,useColdbrewGetQueryMetadataQueryStatusRefactorQuery:l}=n.h,d=(e,{pollingInterval:t}={})=>n.h.useColdbrewGetQueryMetadataQuery(e,t?{pollingInterval:t}:{})},141257:function(e,t,a){a.d(t,{Z:()=>n});let n=a(41598).h},337902:function(e,t,a){a.d(t,{G3:()=>l,Kf:()=>i,OJ:()=>o,j3:()=>d});var n=a(315183),r=a(41598),s=a(548810);let o=r.h.injectEndpoints({endpoints:e=>({updateLegacyTransforms:e.mutation({queryFn:async({worksheetId:e,contextKey:t,transformSpec:a,notificationName:r})=>{try{let{queryStoreBridge:s}=n.IL.services;return{data:await s.updateLegacyTransforms(e,t,a,r)}}catch(e){return{error:(0,s.L)(e)}}}}),applyFullEvalLegacyTransforms:e.mutation({queryFn:async({worksheetId:e,sourceSheet:t,contextKey:a,notificationName:r,transformSpec:o,shouldSaveTransforms:i})=>{try{let{queryStoreBridge:s}=n.IL.services;return{data:await s.applyFullEvalLegacyTransforms({pid:e,sourceSheet:t,contextKey:a,notificationName:r,transformSpec:o,shouldSaveTransforms:i})}}catch(e){return{error:(0,s.L)(e)}}}}),createFileProxyRequest:e.mutation({queryFn:async e=>{try{let{queryStoreBridge:t}=n.IL.services;return{data:await t.createFileProxyRequest(e)}}catch(e){return{error:(0,s.L)(e)}}}})})}),{useUpdateLegacyTransformsMutation:i,useApplyFullEvalLegacyTransformsMutation:l,useCreateFileProxyRequestMutation:d}=o},609513:function(e,t,a){a.d(t,{$N:()=>O,$e:()=>V,B7:()=>C,CW:()=>x,Hr:()=>E,IU:()=>F,MX:()=>B,MY:()=>T,Nv:()=>N,OE:()=>z,PE:()=>l,PN:()=>U,QU:()=>W,S4:()=>G,Th:()=>M,UG:()=>H,Wx:()=>Q,ZP:()=>_,ZT:()=>d,Zm:()=>w,_8:()=>g,d:()=>q,dG:()=>j,eB:()=>$,eZ:()=>P,ed:()=>k,i7:()=>v,j6:()=>I,jZ:()=>J,mX:()=>D,np:()=>o,pi:()=>K,r9:()=>b,rJ:()=>i,uo:()=>L,zy:()=>A});var n=a(747456),r=a(761118),s=a(171924);let o=50,i=440,l=320,d=800,u={sessions:{},streamingEnabled:!0,overrides:{},smartTagKeys:[],semanticModelFiles:[],sampleDataUsedToggleState:r.FX.DISABLED,referenceWorksheetUsedToggleState:r.FX.DISABLED,referenceWorksheetMetaData:void 0,isFirstRun:{notebook:!1,notebook_agent:!1,streamlit:!1,worksheet:!1,costManagement:!1,marketplaceListing:!1,homepage:!1,fullpage:!1,governance:!1,notebook_editor:!1},sessionRequestStatus:"idle",sidePanel:{width:i,shown:!1},shouldFocusChatForm:!0},c=function(e,t,a,n,s){return{sessionId:t,surfaceType:e,context:n,model:a,messages:[],attachments:[],messageFetchParams:{offset:0,hasNextPageOfMessages:!1},completionStatus:r.Bw.Completed,isFirstSession:s,loadedFirstPage:!1}};function m(e,t,a,n){var s,o,i,l,d,u,m,p,h,E;let y=function(e,t,a){if(!a||!(t in e.sessions))return{context:{contextToUse:"undefined"},executionContext:{role:"",warehouse:"",database:"",schema:""}};let n=e.sessions[t],r={role:"",warehouse:"",database:"",schema:""};return("notebook"===n.surfaceType||"streamlit"===n.surfaceType||"worksheet"===n.surfaceType||"notebook_editor"===n.surfaceType)&&(r=n.executionContext),{context:n.context,executionContext:r}}(e,t.payload.surfaceId,n),f=(null==y?void 0:y.context.contextToUse)==="semanticModel"?r.Me.SNOWFLAKE_SEMANTIC:t.payload.model;switch(t.payload.surfaceType){case"worksheet":e.sessions[t.payload.surfaceId]=(s=t.payload.sessionId,{...c("worksheet",s,f,y.context,a),executionContext:y.executionContext});break;case"notebook":e.sessions[t.payload.surfaceId]=(o=t.payload.sessionId,{...c("notebook",o,f,y.context,a),executionContext:y.executionContext});break;case"governance":e.sessions[t.payload.surfaceId]=(i=t.payload.sessionId,{...c("governance",i,f,y.context,a),executionContext:y.executionContext});break;case"streamlit":e.sessions[t.payload.surfaceId]=(l=t.payload.sessionId,{...c("streamlit",l,f,y.context,a),executionContext:y.executionContext});break;case"costManagement":e.sessions[t.payload.surfaceId]=(d=t.payload.sessionId,{...c("costManagement",d,f,y.context,a)});break;case"marketplaceListing":e.sessions[t.payload.surfaceId]=(u=t.payload.sessionId,m=r.Me.MARKETPLACE,{...c("marketplaceListing",u,m,y.context,a)});break;case"homepage":e.sessions[t.payload.surfaceId]=(p=t.payload.sessionId,{...c("homepage",p,f,y.context,a)});break;case"fullpage":e.sessions[t.payload.surfaceId]=(h=t.payload.sessionId,{...c("fullpage",h,f,y.context,a)});break;case"notebook_editor":e.sessions[t.payload.surfaceId]=(E=t.payload.sessionId,{...c("notebook_editor",E,f,y.context,a),executionContext:y.executionContext})}}function p(e,t){t.payload.surfaceId in e.sessions||m(e,t,!0)}function h(e,t){e.sessions[t].lastUserMessage=void 0,e.sessions[t].messages.forEach(a=>{let n;(0,s.l3)(a)&&(e.sessions[t].lastUserMessage=a.content[0].data);let r=a.content.findLastIndex(s.Ps);-1!==r&&(n=a.content[r].data),n&&(e.sessions[t].context.lastContextLogLine={messageId:a.id,hasPreceedingUserMessage:void 0!==e.sessions[t].lastUserMessage},"executionContext"===n.type&&(e.sessions[t].context.lastUsedDatabase=n.database,e.sessions[t].context.lastUsedSchema=n.schema))})}let E="onboarding-message";function y(e,t,a){e.sessions[a].messages.push(...t),h(e,a)}function f(e,t){let a=e.sessions[t.payload.surfaceId];a.context.contextToUse="undefined",a.context.semanticModel=void 0,a.context.lastUsedDatabase="",a.context.lastUsedSchema="",a.model=t.payload.model,("notebook"===a.surfaceType||"streamlit"===a.surfaceType||"notebook_editor"===a.surfaceType)&&(a.executionContext.database=null,a.executionContext.schema=null)}function g(e,t){return!!(e&&t)}let S=(0,n.createSlice)({name:"copilot",initialState:u,reducers:{sessionStateCreated:(e,t)=>{m(e,t,!(t.payload.surfaceId in e.sessions),t.payload.shouldCopyCurrentContext)},historySessionLoaded:(e,t)=>{var a,n,s,i,l,d;if(p(e,t),e.sessions[t.payload.surfaceId].loadedFirstPage=!0,0===t.payload.msgOffset&&(i=t.payload.lastUsedDatabase,l=t.payload.lastUsedSchema,i&&l)){e.sessions[t.payload.surfaceId].context.lastUsedDatabase=t.payload.lastUsedDatabase,e.sessions[t.payload.surfaceId].context.lastUsedSchema=t.payload.lastUsedSchema;let a=e.sessions[t.payload.surfaceId];("notebook"===a.surfaceType||"streamlit"===a.surfaceType||"notebook_editor"===a.surfaceType)&&(a.executionContext.database=null!=(n=t.payload.lastUsedDatabase)?n:"",a.executionContext.schema=null!=(s=t.payload.lastUsedSchema)?s:"")}let u=[];u.unshift(...t.payload.messages);let c=null==(a=t.payload.messages.at(0))?void 0:a.timestamp;if(c){let e={id:`timestamp-log-line-${c}`,author:"hidden",timestamp:c,allowFeedback:!1,content:[{kind:"LogLine",data:{type:"timestamp",message:c}}]};u.unshift(e)}d=t.payload.surfaceId,e.sessions[d].messages.unshift(...u),h(e,d),e.sessions[t.payload.surfaceId].messageFetchParams={offset:t.payload.msgOffset+o,hasNextPageOfMessages:t.payload.messages.length===o},e.sessions[t.payload.surfaceId].isFirstSession=t.payload.isFirstSession,e.sessions[t.payload.surfaceId].context.contextToUse=t.payload.contextToUse,"semanticModel"===t.payload.contextToUse&&(e.sessions[t.payload.surfaceId].context.semanticModel=t.payload.lastUsedSemanticModel,e.sessions[t.payload.surfaceId].model="marketplaceListing"===t.payload.surfaceType?r.Me.MARKETPLACE:r.Me.SNOWFLAKE_SEMANTIC)},messageAdded:(e,t)=>{p(e,t),(t.payload.chatMessage.id!==E||0===e.sessions[t.payload.surfaceId].messages.filter(e=>e.id===E).length)&&(y(e,[t.payload.chatMessage],t.payload.surfaceId),e.sessions[t.payload.surfaceId].messageFetchParams.offset+=1)},attachmentAdded:(e,t)=>{var a,n;p(e,t),a=[t.payload.chatMessage],n=t.payload.surfaceId,e.sessions[n].attachments.push(...a),h(e,n)},attachmentCleared:(e,t)=>{var a;t.payload.surfaceId in e.sessions&&(a=t.payload.surfaceId,e.sessions[a].attachments=[],h(e,a))},executionContextLogLineAdded:(e,t)=>{p(e,t),e.sessions[t.payload.surfaceId].context.contextToUse="executionContext";let a=(0,s.VN)(),n={id:`db-schema-updated-${a}`,author:"hidden",timestamp:a,allowFeedback:!1,content:[{kind:"LogLine",data:{type:"executionContext",database:t.payload.database,schema:t.payload.schema}}]},r=function(e,t){for(let a=0;a<e.sessions[t].messages.length;a++){let n=e.sessions[t].messages[a];if(n.id===E&&"assistant"===n.author)return a}}(e,t.payload.surfaceId);r===e.sessions[t.payload.surfaceId].messages.length-1?e.sessions[t.payload.surfaceId].messages.splice(r,0,n):y(e,[n],t.payload.surfaceId),h(e,t.payload.surfaceId),e.sessions[t.payload.surfaceId].context.lastUsedDatabase=t.payload.database,e.sessions[t.payload.surfaceId].context.lastUsedSchema=t.payload.schema,e.sessions[t.payload.surfaceId].messageFetchParams.offset+=1},messageUpserted:(e,t)=>{p(e,t);let a=e.sessions[t.payload.surfaceId].messages.findIndex(e=>e.id===t.payload.chatMessage.id);a>=0?(e.sessions[t.payload.surfaceId].messages[a].content=t.payload.chatMessage.content,e.sessions[t.payload.surfaceId].messages[a].allowFeedback=t.payload.chatMessage.allowFeedback,e.sessions[t.payload.surfaceId].messages[a].loadingMessage=t.payload.chatMessage.loadingMessage,t.payload.chatMessage.debug&&(e.sessions[t.payload.surfaceId].messages[a].debug={...t.payload.chatMessage.debug})):(e.sessions[t.payload.surfaceId].messages.push(t.payload.chatMessage),e.sessions[t.payload.surfaceId].messageFetchParams.offset+=1)},messageAgentUpserted:(e,t)=>{p(e,t);let a=e.sessions[t.payload.surfaceId].messages.findIndex(e=>e.id===t.payload.chatMessage.id);if(a>=0){let{progress:n,solution:r}=t.payload.chatMessage.content[0].data,s=e.sessions[t.payload.surfaceId].messages[a].content[0].data;(null==n?void 0:n.length)&&s.progress&&s.progress.push(n[0]),r&&(s.solution=r),e.sessions[t.payload.surfaceId].messages[a].allowFeedback=t.payload.chatMessage.allowFeedback,e.sessions[t.payload.surfaceId].messages[a].loadingMessage=t.payload.chatMessage.loadingMessage,t.payload.chatMessage.debug&&(e.sessions[t.payload.surfaceId].messages[a].debug={...t.payload.chatMessage.debug})}else e.sessions[t.payload.surfaceId].messages.push(t.payload.chatMessage),e.sessions[t.payload.surfaceId].messageFetchParams.offset+=1},modelTypeChanged:(e,t)=>{p(e,t),e.sessions[t.payload.surfaceId].model=t.payload.model},statusChanged:(e,t)=>{p(e,t),e.sessions[t.payload.surfaceId].completionStatus=t.payload.status},firstSessionStatusChanged:(e,t)=>{p(e,t),e.sessions[t.payload.surfaceId].isFirstSession=t.payload.isFirstSession},overrideAdded:(e,t)=>{e.overrides[t.payload.key]=t.payload.value},smartTagKeysUpdated:(e,t)=>{e.smartTagKeys.includes(t.payload.smartTagKeys)||e.smartTagKeys.push(t.payload.smartTagKeys)},smartTagKeysRemoved:e=>{e.smartTagKeys=[]},sampleDataUsedChanged:(e,t)=>{e.sampleDataUsedToggleState=t.payload.newToggleState},referenceWorksheetUseChanged:(e,t)=>{e.referenceWorksheetUsedToggleState=t.payload.newToggleState},referenceWorksheetSet:(e,t)=>{e.referenceWorksheetMetaData=t.payload},isFirstRunUpdated:(e,t)=>{e.isFirstRun[t.payload.surfaceType]=t.payload.isFirstRun},sessionRequestStatusChanged:(e,t)=>{e.sessionRequestStatus=t.payload.status},contextToUseSet:(e,t)=>{p(e,t),e.sessions[t.payload.surfaceId].context.contextToUse=t.payload.contextType},setSessionExecutionContext:(e,t)=>{p(e,t),f(e,t);let a=e.sessions[t.payload.surfaceId];("notebook"===a.surfaceType||"streamlit"===a.surfaceType||"worksheet"===a.surfaceType||"notebook_editor"===a.surfaceType)&&(a.executionContext=t.payload.executionContext);let{database:n,schema:r}=t.payload.executionContext;(null==n?void 0:n.trim())&&(null==r?void 0:r.trim())&&(e.sessions[t.payload.surfaceId].context.contextToUse="executionContext"),e.sessions[t.payload.surfaceId].context.lastUsedDatabase=t.payload.executionContext.database,e.sessions[t.payload.surfaceId].context.lastUsedSchema=t.payload.executionContext.schema},setSemanticModel:(e,t)=>{if(p(e,t),f(e,t),e.sessions[t.payload.surfaceId].context.contextToUse="semanticModel",e.sessions[t.payload.surfaceId].context.semanticModel=t.payload.semanticModel,"marketplaceListing"===t.payload.surfaceType)return;let a=(0,s.VN)();y(e,[{id:`semantic-model-updated-${a}`,author:"hidden",timestamp:a,allowFeedback:!1,content:[{kind:"LogLine",data:{type:"semanticModel",message:t.payload.semanticModel.label}}]}],t.payload.surfaceId),e.sessions[t.payload.surfaceId].messageFetchParams.offset+=1,h(e,t.payload.surfaceId)},semanticModelFilesUpdated:(e,t)=>{e.semanticModelFiles=t.payload.semanticModelFiles},contextReset:(e,t)=>{let a;p(e,t);let n=(0,s.VN)(),r="",o=e.sessions[t.payload.surfaceId];switch(o.context.contextToUse){case"semanticModel":var i,l;r=null!=(l=null==(i=o.context.semanticModel)?void 0:i.label)?l:"",a="semanticModel";break;case"executionContext":{let{lastUsedDatabase:e,lastUsedSchema:t}=o.context;r=`${e}.${t}`,("notebook"===o.surfaceType||"streamlit"===o.surfaceType||"notebook_editor"===o.surfaceType)&&(r=`${o.executionContext.database}.${o.executionContext.schema}`),a="executionContext";break}default:r="context",a="undefined"}y(e,[{id:`context-reset-${n}`,author:"hidden",timestamp:n,allowFeedback:!1,content:[{kind:"LogLine",data:{type:"noContext",contextType:a,contextName:r}}]}],t.payload.surfaceId),f(e,t)},setSidePanelShown:(e,t)=>{e.sidePanel.shown=t.payload.sidePanelShown,e.sidePanel.startedBy=t.payload.sidePanelShown?t.payload.startedBy:void 0},setPanelWidth:(e,t)=>{e.sidePanel.width=t.payload.panelWidth},updateCodeBlockQueryResult:(e,t)=>{p(e,t);let a=e.sessions[t.payload.surfaceId].messages.findIndex(e=>e.id===t.payload.messageId);if(-1===a)return;let n=e.sessions[t.payload.surfaceId].messages[a].content.map(e=>{if("Code"===e.kind)return e.data}).findIndex(e=>(null==e?void 0:e.codeBlockIdx)===t.payload.codeBlockIdx);n>0&&(e.sessions[t.payload.surfaceId].messages[a].content[n].data.runStats.queryId=t.payload.queryId,e.sessions[t.payload.surfaceId].messages[a].content[n].data.resultsState=t.payload.resultState)},setShouldFocusChatForm:(e,t)=>{e.shouldFocusChatForm=t.payload.shouldFocusChatForm},addCellActionLogLine:(e,t)=>{let a=(0,s.VN)();y(e,[{id:`cell-action-logline-${a}`,author:"hidden",timestamp:a,allowFeedback:!1,content:[{kind:"LogLine",data:{type:"cellAction",cellAction:t.payload.cellAction,cellName:t.payload.cellName}}]}],t.payload.surfaceId)},addEditorActionLogLine:(e,t)=>{let a=(0,s.VN)();y(e,[{id:`editor-action-logline-${a}`,author:"hidden",timestamp:a,allowFeedback:!1,content:[{kind:"LogLine",data:{type:"editorAction",editorAction:t.payload.editorAction}}]}],t.payload.surfaceId)}}}),_=S.reducer,{sessionStateCreated:A,historySessionLoaded:I,messageAdded:T,attachmentAdded:R,attachmentCleared:C,executionContextLogLineAdded:O,messageUpserted:N,messageAgentUpserted:v,modelTypeChanged:b,statusChanged:M,firstSessionStatusChanged:w,overrideAdded:L,smartTagKeysUpdated:D,smartTagKeysRemoved:P,sampleDataUsedChanged:x,referenceWorksheetUseChanged:k,referenceWorksheetSet:U,isFirstRunUpdated:F,sessionRequestStatusChanged:q,contextToUseSet:$,setSessionExecutionContext:B,setSemanticModel:G,semanticModelFilesUpdated:V,contextReset:j,setSidePanelShown:Q,setPanelWidth:H,updateCodeBlockQueryResult:W,setShouldFocusChatForm:K,addCellActionLogLine:J,addEditorActionLogLine:z}=S.actions},171924:function(e,t,a){a.d(t,{Ps:()=>o,Uy:()=>s,VN:()=>r,l3:()=>i});var n=a(249724);let r=()=>(0,n.Z)(new Date,"yyyy-MM-dd'T'HH:mm:ss.SSS");function s(e){let t=e.split("\n"),a={},n="";for(let[e,r]of t.entries()){let[t,...s]=r.split(":"),o=t.trim(),i=s.join(":").trim();if("event"===o)a.event=i;else if("data"===o)try{JSON.parse(i),a.data=i}catch(e){n+=i}else 0===e&&r&&(n+=`${r}
`)}return""!==n&&(a.leftover=n),a}function o(e){return"LogLine"===e.kind&&("executionContext"===e.data.type||"semanticModel"===e.data.type)}function i(e){return"user"===e.author&&e.content.length>0&&("Text"===e.content[0].kind||"Markdown"===e.content[0].kind)}},688253:function(e,t,a){a.d(t,{z5:()=>v,CX:()=>ea,Vr:()=>A,dy:()=>W,mA:()=>U,CO:()=>g,TR:()=>D,bz:()=>w,e4:()=>J,ff:()=>_,Qy:()=>Z,VU:()=>es,So:()=>et,Gi:()=>ed,kQ:()=>eo,z2:()=>k,Nv:()=>T,ZP:()=>f,RA:()=>G,MD:()=>V,k2:()=>ei,DR:()=>el,Wl:()=>b,eE:()=>X,WK:()=>er,$Z:()=>x,BH:()=>H,O_:()=>Q,KG:()=>z,km:()=>j,qZ:()=>O,zC:()=>F,dY:()=>C,Yf:()=>S,bM:()=>ee,gA:()=>K,tB:()=>B,o8:()=>$,Qo:()=>M,WF:()=>N,kx:()=>Y,Eg:()=>eu,xQ:()=>en,Ai:()=>L,MY:()=>I,i0:()=>P,ub:()=>q,LJ:()=>R});var n=a(747456),r=a(824607),s=a(323144);function o(e){let{table:t,columnsToAdd:a}=e;if(!a.length)return;t.primaryKey||(t.primaryKey={columns:[]});let n=[...new Set([...t.primaryKey.columns||[],...a])];t.primaryKey.columns=n}function i(e){return{leftColumns:(null==e?void 0:e.map(e=>e.leftColumn).filter(e=>void 0!==e))||[],rightColumns:(null==e?void 0:e.map(e=>e.rightColumn).filter(e=>void 0!==e))||[]}}function l(e,t,a){return e?{leftTableIndex:e.findIndex(e=>e.name===t),rightTableIndex:e.findIndex(e=>e.name===a)}:{leftTableIndex:-1,rightTableIndex:-1}}function d(e,t,a,n,r,s){var o;return e&&-1!==t?((null==(o=e[t].primaryKey)?void 0:o.columns)||[]).filter(e=>{var t,o,i,l;return!n.includes(e)||(t=a,o=e,i=r,!!(l=s)&&l.some(e=>{var a;return e!==i&&(null==(a=e.relationshipColumns)?void 0:a.some(a=>e.leftTable===t?a.leftColumn===o:e.rightTable===t&&a.rightColumn===o))}))}):[]}var u=a(889692),c=a.n(u),m=a(328446),p=a.n(m);function h(e){switch(e.type){case"sql":var t;return{type:"sql",statement:e.statement_delta,verifiedQueryUsed:(null==(t=e.confidence)?void 0:t.verified_query_used)?p()(e.confidence.verified_query_used,(e,t)=>c()(t)):void 0};case"suggestions":return{type:"suggestions",suggestions:[e.suggestions_delta.suggestion_delta]};case"error":return{type:"error",errorMessage:e.message};default:return{type:"text",text:e.text_delta}}}function E(e){return{id:e,messages:[],streamingStatus:""}}let y=(0,n.createSlice)({name:"cortexAnalyst",initialState:{sessions:{},lastUserMessage:"",suggestionsDialog:{showDialog:!1},verifiedQueryDialog:{showDialog:!1},suggestions:{allSuggestions:void 0,dismissedSuggestionIds:[],reviewedSuggestionIds:[],isLoading:!1,activeIndex:0},semanticModel:{editorMode:"gui_editor",selectedTab:"chat"},role:"",warehouse:"",database:"",schema:"",stage:"",username:"",chatCollapsed:!1,sampleToFetch:{},sampleFetchQueryAborted:!1,searchService:{}},reducers:{selectedTabUpdated:(e,t)=>{e.semanticModel.selectedTab=t.payload.tab},cortexAnalystInitialized:(e,t)=>{let a=E((0,n.nanoid)());e.sessions={[a.id]:a},e.semanticModel.editorMode||(e.semanticModel.editorMode="gui_editor")},executionContextInitialized:(e,t)=>{let{role:a,secondaryRoles:n,warehouse:r,username:s}=t.payload;e.role=a,e.secondaryRoles=n,e.warehouse=r,e.username=s},semanticModelInitialized:(e,t)=>{let{sessionId:a}=t.payload;a in e.sessions&&(e.sessions={[a]:E(a)},e.suggestions={allSuggestions:void 0,dismissedSuggestionIds:[],reviewedSuggestionIds:[],isLoading:!1,activeIndex:0}),e.semanticModel={},e.sampleToFetch={},e.searchService={}},chatCollapsed:(e,t)=>{let{chatCollapsed:a}=t.payload;e.chatCollapsed=a},chatHistoryCleared:(e,t)=>{let{sessionId:a}=t.payload;a in e.sessions&&(e.sessions[a].messages=[])},messageAdded:(e,t)=>{let{sessionId:a,message:n}=t.payload;if(a in e.sessions&&(e.sessions[a].messages.push(n),"user"===n.role&&"text"===n.content[0].type)){var r;e.lastUserMessage=null!=(r=n.content[0].text)?r:""}},messageUpserted:(e,t)=>{var a,n,r,s;let{sessionId:o,messageId:i,type:l}=t.payload;o in e.sessions||(e.sessions[o]=E(o));let d=e.sessions[o],u=function(e,t){let a=e.messages.findLastIndex(e=>e.id===t);if(-1===a)return;let n=e.messages[a];if("analyst"===n.role)return n}(e.sessions[o],i);if(!u)return void d.messages.push(function(e){let{messageId:t,type:a}=e,n={id:t,role:"analyst",content:[]};if("stream-content-delta"===a){let{messageData:t}=e;if(!t)return n;let a=h(t);n.content.push(a)}else if("warnings"===a){let{warningData:t}=e;n.warnings=null==t?void 0:t.warnings.flatMap(e=>e.message)}else if("response_metadata"===a){let{responseMetadataData:t}=e;n.responseMetadata=t}return n}(t.payload));"stream-content-delta"===l&&t.payload.messageData?(a=u.content,u.content=(n=t.payload.messageData).index>=a.length?[...a,h(n)]:a.map((e,t)=>{if(t!==n.index)return e;if("text"===e.type&&"text"===n.type)return{...e,text:e.text+n.text_delta};if("sql"===e.type&&"sql"===n.type)return{...e,statement:e.statement+n.statement_delta,verifiedQueryUsed:n.confidence?{...e.verifiedQueryUsed,name:n.confidence.verified_query_used.name,question:n.confidence.verified_query_used.question,sql:n.confidence.verified_query_used.sql,verifiedAt:n.confidence.verified_query_used.verified_at,verifiedBy:n.confidence.verified_query_used.verified_by}:void 0};if("suggestions"===e.type&&"suggestions"===n.type){let t=[...e.suggestions];if(n.suggestions_delta.index>=e.suggestions.length){let a=Array(n.suggestions_delta.index-e.suggestions.length+1).fill("");t.push(...a)}return t[n.suggestions_delta.index]+=n.suggestions_delta.suggestion_delta,{...e,suggestions:t}}return"error"===e.type&&"error"===n.type?{...e,error:e.errorMessage+n.message}:e})):"warnings"===l&&t.payload.warningData?u.warnings=null!=(s=null==(r=t.payload.warningData)?void 0:r.warnings.flatMap(e=>e.message))?s:[]:"response_metadata"===l&&t.payload.responseMetadataData&&(u.responseMetadata=t.payload.responseMetadataData)},streamingStatusUpdated:(e,t)=>{let{streamData:a,sessionId:n}=t.payload;n in e.sessions&&(e.sessions[n].streamingStatus=a.status_message)},semanticModelStatusUpdated:(e,t)=>{let{status:a,validationError:n}=t.payload;e.semanticModel.status=a,e.semanticModel.validationError=n},messageContentSqlUpdated:(e,t)=>{let{sessionId:a,messageId:n,type:r}=t.payload;if(!(a in e.sessions))return;let s=function(e,t){let a=e.messages.findLastIndex(e=>e.id===t);if(-1===a)return;let n=e.messages[a];if("analyst"===n.role||"user"===n.role)return n}(e.sessions[a],n);if(!s)return;let o=s.content.findLast(e=>"sql"===e.type);if((null==o?void 0:o.type)==="sql"){if("semanticQueryUpdated"===r){let{semanticQuery:e,getSemanticQueryError:a}=t.payload;o.semanticQuery=null!=e?e:"",o.getSemanticQueryError=null!=a?a:""}else if("sqlResultsUpdated"===r){let{result:e,resultError:a}=t.payload;o.result=e,o.resultError=a}else if("vqrDialogDataUpdated"===r){let{verifiedQuery:e}=t.payload;o.vqrDialogData=e}}},semanticModelFileLocationUpdated:(e,t)=>{e.semanticModel.fileLocation=t.payload.fileLocation,e.semanticModel.status=void 0,e.semanticModel.validationError=void 0},semanticModelYamlUpdated:(e,t)=>{let{content:a}=t.payload;e.semanticModel.content=a,e.semanticModel.yamlString=(0,r.z)(a),e.semanticModel.verifiedQueryRepository=void 0},semanticModelYamlStringUpdated:(e,t)=>{let{yamlString:a}=t.payload;e.semanticModel.yamlString=a},roleChanged:(e,t)=>{e.role=t.payload.role},warehouseChanged:(e,t)=>{e.warehouse=t.payload.warehouse},databaseChanged:(e,t)=>{e.database=t.payload.database},schemaChanged:(e,t)=>{e.schema=t.payload.schema},stageChanged:(e,t)=>{e.stage=t.payload.stage,e.semanticModel.fileLocation=void 0},yamlHeaderChanged:(e,t)=>{let{name:a,description:n}=t.payload;e.semanticModel.content||(e.semanticModel.content={}),e.semanticModel.content.name=a,e.semanticModel.content.description=n},updateCustomInstructions:(e,t)=>{let{customInstructions:a}=t.payload;e.semanticModel.content||(e.semanticModel.content={}),e.semanticModel.content.customInstructions=a},newSemanticModelCreated:(e,t)=>{let{role:a,warehouse:n,database:r,schema:s,stage:o,fileLocation:i}=t.payload;e.role=a,e.warehouse=n,e.database=r,e.schema=s,e.stage=o,e.semanticModel.fileLocation=i,e.semanticModel.lastSavedSemanticModel=void 0},suggestionsDialogUpdated:(e,t)=>{let a={showDialog:t.payload.shouldShow,suggestion:void 0===t.payload.suggestion?t.payload.shouldShow?{suggestionId:"new_query",currentQuestion:"",currentSql:"",suggestion:{score:0,vq_to_add:{name:"",question:"",sql:""}},usage:"add"}:void 0:t.payload.suggestion};t.payload.source&&(a.source=t.payload.source),t.payload.onSuggestionAccepted&&(a.onSuggestionAccepted=t.payload.onSuggestionAccepted),e.suggestionsDialog=a},verifiedQueryDialogUpdated:(e,t)=>{var a,n;e.verifiedQueryDialog={showDialog:t.payload.shouldShow,question:null!=(a=t.payload.question)?a:"",sql:null!=(n=t.payload.sql)?n:""}},verifiedQueryValidationStatusUpdated:(e,t)=>{let{sql:a,validationResult:n}=t.payload;void 0===e.semanticModel.verifiedQueryRepository&&(e.semanticModel.verifiedQueryRepository={}),e.semanticModel.verifiedQueryRepository[a]=n},yamlEditorModeChanged:(e,t)=>{let{yamlEditorMode:a}=t.payload;e.semanticModel.editorMode=a},yamlIdToScrollToChanged:(e,t)=>{let{idToScrollTo:a}=t.payload;e.semanticModel.idToScrollTo=a},yamlArrayEdited:{reducer:(e,t)=>{var a;e.semanticModel.content=null!=(a=e.semanticModel.content)?a:{};let{editAction:n,accessor:s}=t.payload,{array:o,update:i}=s(e),l=o||[];switch(n){case"add":l.push(t.payload.item),i(l);break;case"remove":t.payload.index<l.length&&(l.splice(t.payload.index,1),i(l));break;case"update":t.payload.index<l.length&&(l[t.payload.index]=t.payload.item,i(l))}e.semanticModel.yamlString=(0,r.z)(e.semanticModel.content)},prepare:e=>({payload:e})},yamlFieldUpdated:{reducer:(e,t)=>{var a;e.semanticModel.content=null!=(a=e.semanticModel.content)?a:{};let{accessor:n,newValue:s}=t.payload,{update:o}=n(e);o(s),e.semanticModel.yamlString=(0,r.z)(e.semanticModel.content)},prepare:e=>({payload:e})},sampleStateInitialized:(e,t)=>{e.sampleToFetch={...e.sampleToFetch,allowQueryingSampleValues:t.payload.allowQueryingSampleValues,totalColumnsToFetch:t.payload.totalColumnsToFetch},t.payload.reset&&(e.sampleToFetch.sampleValues=void 0,e.sampleToFetch.isProgressCardDismissed=void 0)},sampleValuesFetchAborted:(e,t)=>{e.sampleFetchQueryAborted=t.payload},sampleValuesFetchProgressCardDismissed:(e,t)=>{e.sampleToFetch.isProgressCardDismissed=t.payload.dismissed},sampleValuesFetchStateUpdated:(e,t)=>{e.sampleToFetch.sampleValues||(e.sampleToFetch.sampleValues=[]),e.sampleToFetch.sampleValues.push(t.payload)},setLastSavedSemanticModel:(e,t)=>{e.semanticModel.lastSavedSemanticModel=t.payload.semanticModelYaml},relationshipUpdated:(e,t)=>{!function(e,t){if(void 0===e.semanticModel.content)return;let{relationships:a,tables:n}=e.semanticModel.content;if(("update"===t.payload.type||"remove"===t.payload.type)&&a&&function(e){var t;let{draft:a,tables:n,relationships:r,currentRelationship:o}=e;if((null==(t=a.semanticModel.content)?void 0:t.tables)===void 0)return;let{leftTable:u="",rightTable:c="",relationshipType:m}=o,p=l(n,u,c),{leftColumns:h,rightColumns:E}=i(o.relationshipColumns);switch(m){case s.nm.many_to_one:if(E.length){let e=d(n,p.rightTableIndex,c,E,o,r);a.semanticModel.content.tables[p.rightTableIndex].primaryKey={columns:e}}break;case s.nm.one_to_one:default:if(h.length){let e=d(n,p.leftTableIndex,u,h,o,r);a.semanticModel.content.tables[p.leftTableIndex].primaryKey={columns:e}}if(E.length){let e=d(n,p.rightTableIndex,c,E,o,r);a.semanticModel.content.tables[p.rightTableIndex].primaryKey={columns:e}}}}({draft:e,tables:n,relationships:a,currentRelationship:a[t.payload.index]}),"remove"!==t.payload.type){let{newRelationship:a}=t.payload;!function(e){var t;let{draft:a,tables:n,relationship:r}=e;if((null==(t=a.semanticModel.content)?void 0:t.tables)===void 0)return;let{leftTable:d="",rightTable:u="",relationshipType:c}=r,m=l(n,d,u),{leftColumns:p,rightColumns:h}=i(r.relationshipColumns);switch(c){case s.nm.many_to_one:h.length&&o({table:a.semanticModel.content.tables[m.rightTableIndex],columnsToAdd:h});break;case s.nm.one_to_one:default:p.length&&o({table:a.semanticModel.content.tables[m.leftTableIndex],columnsToAdd:p}),h.length&&o({table:a.semanticModel.content.tables[m.rightTableIndex],columnsToAdd:h})}}({draft:e,tables:n,relationship:a})}var r,u={draft:e,payload:t.payload};let{draft:c,payload:m}=u;if((null==(r=c.semanticModel.content)?void 0:r.tables)!==void 0)switch(m.type){case"add":c.semanticModel.content.relationships||(c.semanticModel.content.relationships=[]),c.semanticModel.content.relationships.push(m.newRelationship);break;case"update":c.semanticModel.content.relationships&&(c.semanticModel.content.relationships[m.index]=m.newRelationship);break;case"remove":c.semanticModel.content.relationships&&c.semanticModel.content.relationships.splice(m.index,1)}}(e,t)},nativeSemanticUpdated:(e,t)=>{e.semanticModel.nativeSemantic=t.payload.nativeSemantic},wasOpenedFromFileWizardUpdated:(e,t)=>{e.semanticModel.wasOpenedFromFileWizard=t.payload.wasOpenedFromFileWizard},isFreshLoadUpdated:(e,t)=>{e.semanticModel.isFreshLoad=t.payload},suggestionsLoading:(e,t)=>{e.suggestions.isLoading=t.payload.isLoading},suggestionsLoaded:(e,t)=>{e.suggestions.allSuggestions=t.payload.suggestions,e.suggestions.isLoading=!1,t.payload.warnings&&(e.suggestions.warnings=t.payload.warnings)},suggestionsError:(e,t)=>{t.payload.error&&(e.suggestions.fetchError=t.payload.error),t.payload.warnings&&(e.suggestions.warnings=t.payload.warnings),e.suggestions.isLoading=!1},suggestionDismissed:(e,t)=>{let{suggestionId:a}=t.payload;e.suggestions.dismissedSuggestionIds.includes(a)||e.suggestions.dismissedSuggestionIds.push(a)},suggestionReviewed:(e,t)=>{let{suggestionId:a}=t.payload;e.suggestions.reviewedSuggestionIds.includes(a)||e.suggestions.reviewedSuggestionIds.push(a)},suggestionsReset:e=>{e.suggestions.allSuggestions=void 0,e.suggestions.dismissedSuggestionIds=[],e.suggestions.reviewedSuggestionIds=[],e.suggestions.isLoading=!1,delete e.suggestions.fetchError,delete e.suggestions.warnings},activeSuggestionIndexUpdated:(e,t)=>{let{activeIndex:a}=t.payload;e.suggestions&&(e.suggestions.activeIndex=a)},semanticModelLogLineAdded:(e,t)=>{var a,r;let{sessionId:s}=t.payload;if(!s||!e.sessions[s])return;let o=e.sessions[s];if(!(null==(a=o.messages)?void 0:a.length)||!o.messages.some(e=>"user"===e.role))return;let i=o.messages[o.messages.length-1];if("system"===i.role&&(null==(r=i.content[0])?void 0:r.type)==="semantic_model_update")return;let l={id:(0,n.nanoid)(),role:"system",content:[{type:"semantic_model_update"}]};o.messages.push(l)},searchServicesInitiated:(e,t)=>{e.searchService.services?e.searchService.services.push(...t.payload.searchServices):e.searchService.services=t.payload.searchServices}}}),f=y.reducer,{cortexAnalystInitialized:g,executionContextInitialized:S,semanticModelInitialized:_,chatHistoryCleared:A,messageAdded:I,messageUpserted:T,streamingStatusUpdated:R,semanticModelStatusUpdated:C,messageContentSqlUpdated:O,semanticModelFileLocationUpdated:N,semanticModelYamlUpdated:v,semanticModelYamlStringUpdated:b,roleChanged:M,warehouseChanged:w,databaseChanged:L,schemaChanged:D,stageChanged:P,yamlHeaderChanged:x,suggestionsDialogUpdated:k,verifiedQueryDialogUpdated:U,newSemanticModelCreated:F,chatCollapsed:q,verifiedQueryValidationStatusUpdated:$,sampleStateInitialized:B,sampleValuesFetchAborted:G,sampleValuesFetchProgressCardDismissed:V,sampleValuesFetchStateUpdated:j,setLastSavedSemanticModel:Q,yamlEditorModeChanged:H,yamlIdToScrollToChanged:W,relationshipUpdated:K,nativeSemanticUpdated:J,updateCustomInstructions:z,wasOpenedFromFileWizardUpdated:Y,isFreshLoadUpdated:Z,suggestionsLoading:X,suggestionsLoaded:ee,suggestionsError:et,suggestionDismissed:ea,suggestionReviewed:en,suggestionsReset:er,activeSuggestionIndexUpdated:es,semanticModelLogLineAdded:eo,searchServicesInitiated:ei,selectedTabUpdated:el}=y.actions,ed=y.actions.yamlArrayEdited,eu=y.actions.yamlFieldUpdated},833753:function(e,t,a){a.d(t,{q:()=>l});var n=a(329322),r=a(36534),s=a(483845);let o=e=>"string"==typeof e?(0,r.i)(e).inlineRepr:JSON.stringify(e);function i(e){let t=(0,s.y)(e,"snake_case");return{bindingsJSONRepr:JSON.stringify(t),inlineRepr:function e(t){if(null===t||"object"!=typeof t)return o(t);if(Array.isArray(t))return`[${t.map(t=>e(t)).join(",")}]`;let a=Object.entries(t).map(([t,a])=>`${o(t)}:${e(a)}`);return`{${a.join(",")}}`}(t)}}function l(e){let{shouldInlineVariables:t,model:a,messages:s,guardrails:o,...l}=e,d={...l,...o&&{guardrails:o.enabled}};return new n.L(`SELECT SNOWFLAKE.CORTEX.COMPLETE({}, ${t?"{}":"to_array(parse_json(?))"}, ${t?"{}":"to_object(parse_json(?))"})`,(0,r.i)(a),i(s.map(e=>({role:e.role,content:e.content}))),i({...d})).toQuery()}},472418:function(e,t,a){a.d(t,{V:()=>r});var n=a(483845);function r(e){let t=JSON.parse(e.rows[0][0]);return(0,n.y)(t,"camelCase")}},483845:function(e,t,a){a.d(t,{y:()=>function e(t,a){return null===t||"object"!=typeof t?t:Array.isArray(t)?t.map(t=>e(t,a)):Object.fromEntries(Object.entries(t).map(([t,n])=>[(0,o[a])(t),e(n,a)]))}});var n=a(889692),r=a.n(n),s=a(114858);let o={snake_case:a.n(s)(),camelCase:r()}},466473:function(e,t,a){a.d(t,{ZP:()=>r,zI:()=>l,el:()=>d,Ob:()=>o});let n=(0,a(747456).createSlice)({name:"cortexSearch",initialState:{mainPage:{filters:{database:"",schema:"",search:""},selectedServices:[]},detailsPage:{parentPage:"main"},playgroundPage:{parentPage:"main"}},reducers:{resetCortexSearchMainPageFilters:e=>{e.mainPage.filters={database:"",schema:"",search:""}},setCortexSearchMainPageFilter:(e,t)=>{e.mainPage.filters[t.payload.key]=t.payload.value},setSelectedServices:(e,t)=>{let a=e.mainPage.selectedServices,n=t.payload;a.includes(n)?e.mainPage.selectedServices=a.filter(e=>e!==n):e.mainPage.selectedServices=[...a,n]},setCortexSearchDetailsParentPage:(e,t)=>{e.detailsPage.parentPage=t.payload},setCortexSearchPlaygroundParentPage:(e,t)=>{e.playgroundPage.parentPage=t.payload}}}),r=n.reducer,{resetCortexSearchMainPageFilters:s,setCortexSearchMainPageFilter:o,setSelectedServices:i,setCortexSearchDetailsParentPage:l,setCortexSearchPlaygroundParentPage:d}=n.actions},152066:function(e,t,a){a.d(t,{ZP:()=>r,sN:()=>s});let n=(0,a(747456).createSlice)({name:"featureStore",initialState:{},reducers:{mostRecentlyVisitedFeatureStoreChanged:(e,t)=>{let{database:a,schema:n}=t.payload;e.mostRecentlyVisitedFeatureStore={database:a,schema:n}}}}),r=n.reducer,{mostRecentlyVisitedFeatureStoreChanged:s}=n.actions},735546:function(e,t,a){a.d(t,{W3:()=>s,pd:()=>r,uF:()=>n,yt:()=>o});let n=(0,a(335363).b)(),r=n.getSelectors(),s=n.getSelectors(e=>e.chats),o=n.getSelectors(e=>e.snowflakeIntelligence.chats)},736652:function(e,t,a){a.d(t,{U:()=>r,e:()=>n});let n="__SNOWFLAKE_INTELLIGENCE_DEBUG_START",r="__SNOWFLAKE_INTELLIGENCE_DEBUG_END"},841741:function(e,t,a){a.d(t,{g:()=>n});function n(e){let t=[];for(let a of e)switch(a.role){case"user":{let e=[];a.file&&e.push({index:0,type:"text",text:`Here are the file contents for a file named ${a.file.name}:
\`\`\`${a.file.content}
\`\`\`\`
`}),e.push(...a.content.map((e,t)=>({...e,index:a.file?t+1:t}))),t.push({role:"user",content:e});break}case"assistant":{let e=a.content.filter(e=>"thinking"!==e.type);e.length>0&&t.push({role:"assistant",content:e})}}return t}},292271:function(e,t,a){a.d(t,{K:()=>n});function n(){return{confidenceThreshold:1.5}}},996111:function(e,t,a){a.d(t,{Vb:()=>m,rs:()=>h,nA:()=>c});var n=a(632189),r=a(141257),s=a(318265),o=a(880735),i=a(483845),l=a(98527);let d=r.Z.injectEndpoints({endpoints:e=>({getAgentsConfig:e.query({queryFn:(0,n.V)(async({sqlQueryBackend:e},t)=>{var a;let{role:n,warehouse:r}=t;return{data:(a=await e.query({sqlQuery:{sqlText:"SELECT * FROM snowflake_intelligence.agents.config",bindingsJSON:[]},desc:"si-agent-config",isInternal:!0,role:n,warehouse:r})).rows.map(e=>{var t;let n=e.map((e,t)=>{var n;let r=a.cols[t],s=null!=(n=(0,l.r)(e,r.type))?n:null;return[r.name.toLowerCase(),s]}),r=n.findIndex(([e])=>"response_instruction"===e),s=null==(t=n.find(([e])=>"response_instruction"===e))?void 0:t[1];if(s){let e=s.split("[ORCHESTRATION_INSTRUCTION]").map(e=>e.trim());n[r]=["response_instruction",e[0]],e.length>1&&n.push(["orchestration_instruction",e[1]])}return Object.fromEntries(n)})}})})})});function u(e,t,a){e.push({fileName:t.fileName,filePath:t.filePath,error:a})}let c=d.injectEndpoints({endpoints:e=>({getAgentConfig:e.query({queryFn:async(e,t)=>{var a;let{agentName:n,...r}=e;return{data:null!=(a=(await t.dispatch(d.endpoints.getAgentsConfig.initiate(r)).unwrap()).find(e=>e.agent_name===n))?a:null}}}),readYamlFiles:e.mutation({queryFn:(0,n.V)(async({cortexAnalystSupport:e,ambientUserContext:t},a,n)=>{n.dispatch((0,s.KY)({chatId:a.chatId,semanticModelsLoadingStatus:!0}));let r=[],l=[];for(let n of a.yamlFiles)try{var d;let a=await e.readStageFile({stage:n.stageIdStr,path:n.fileLocation.filePath,fileName:n.fileLocation.fileName,requestContext:{...t.requestContext(),role:null!=(d=t.currentRole())?d:""}});if(a.content)try{let e=function(e){var t;let a=(0,o.zD)(e);return(t=(0,i.y)(a,"camelCase")).tables?{...t,tables:t.tables.map(e=>{if(!e.measures)return e;let t={...e,facts:[...e.facts||[],...e.measures]};return delete t.measures,t})}:t}(a.content);r.push(e)}catch(t){let e=t instanceof Error?t.message:"Failed to parse YAML file";u(l,n.fileLocation,e)}else a.error&&u(l,n.fileLocation,a.error.toString())}catch(t){let e=t instanceof Error?t.message:"Failed to read YAML file";u(l,n.fileLocation,e)}return n.dispatch((0,s.OH)({chatId:a.chatId,semanticModels:r})),l.length>0&&n.dispatch((0,s.qN)({chatId:a.chatId,errors:l})),n.dispatch((0,s.KY)({chatId:a.chatId,semanticModelsLoadingStatus:!1})),{data:r}})})})}),{useGetAgentsConfigQuery:m,useGetAgentConfigQuery:p,useReadYamlFilesMutation:h}=c},14897:function(e,t,a){a.d(t,{N:()=>I,ur:()=>v,rV:()=>C,WD:()=>R,pV:()=>O,kx:()=>T});var n=a(80127),r=a(747456),s=a(632189),o=a(515963),i=a(329322),l=a(36534),d=a(141257),u=a(854290),c=a(384549),m=a(632025),p=a(769851),h=a(318265),E=a(735546),y=a(841741),f=a(292271);let g=(e,t)=>new Promise(a=>{setTimeout(()=>a(e),t)}),S="snowflake-intelligence/Chat",_=new Map,A=d.Z.enhanceEndpoints({addTagTypes:[S]}).injectEndpoints({endpoints:e=>({loadChats:e.query({providesTags:[S],queryFn:async()=>({data:await g([],50)})}),updateChat:e.mutation({queryFn:async(e,t)=>{await g(null,50);let a=E.yt.selectChatById(t.getState(),e.id);return{data:a&&{...a,...e}}}}),generateAnalystSQLExecResults:e.mutation({queryFn:(0,s.V)(async({coldbrew:e},t)=>{let{chatId:a,content:n}=t,r=n.tool_use.input.query,s=await e.client().snowflakeQueryApi.createQuery({sqlText:r,deadlineInMs:45e3},`generate-si-chart-chat-${a}`);return{data:{index:0,type:"tool_results",tool_results:{name:n.tool_use.name,tool_use_id:n.tool_use.tool_use_id,content:[{type:"json",json:{query_id:s.queryId}}],status:"success"},tool_type:"cortex_analyst_sql_exec"}}})})})}),I=A.injectEndpoints({endpoints:e=>({generateSICompletion:e.mutation({queryFn:(0,s.V)(async({snowflakeIntelligenceService:e},t,a)=>{var r,s,i;let{messages:l,chatId:d,settings:c,agentConfig:E}=t,f=a.getState().snowflakeIntelligence.reasoningAgentEnabled;a.dispatch((0,h.wb)({chatId:d,shouldCollapseIntoPrevious:null==(r=l.at(-1))?void 0:r.isHidden}));try{let t=null!=(s=E.tools)?s:[],r=t.some(e=>{var t;return(null==(t=e.tool_spec)?void 0:t.type)==="cortex_analyst_text_to_sql"}),u=new AbortController;_.set(d,u);let g=e.stream({model:"claude-3-5-sonnet",...E.response_instruction&&{response_instruction:E.response_instruction},messages:(0,y.g)(l),experimental:{snowflakeIntelligence:!0,enableChartAndTableContent:!0,searchResultConfidenceThreshold:{enabled:!0,threshold:c.confidenceThreshold},enableStepTrace:!0,...f&&{enableSSEAsString:!0,reasoningAgentToolConfig:{orchestrationType:"reasoning"}}},tools:r?t.concat({tool_spec:{type:"cortex_analyst_sql_exec",name:"sql_exec"}}):t,tool_resources:null!=(i=E.tool_resources)?i:{},...E.tool_choice&&{tool_choice:E.tool_choice}},{signal:u.signal}),S=!1,A=!1;for await(let e of g)switch(e.object){case o.f.messageDelta:S||"step_trace"===e.id||(S=!0,n.v.addAction("SNOWFLAKE_INTELLIGENCE_FIRST_TOKEN_RECEIVED",{chatId:d})),a.dispatch((0,h.HH)({chatId:d,event:e}));break;case o.f.error:a.dispatch((0,h.Y0)({chatId:d,errorMessage:e.message}));break;case o.f.done:A=!0}let I=(0,m.P)(a.getState()),T=(0,p.v)(I.chats,d);return n.v.addAction(A?"SNOWFLAKE_INTELLIGENCE_STREAM_FINISHED":"SNOWFLAKE_INTELLIGENCE_STREAM_CUT_OFF",{chatId:d}),{data:T}}catch(t){if(t instanceof Error&&"AbortError"===t.name){let e=(0,m.P)(a.getState()),t=(0,p.v)(e.chats,d);if(0===t.content.length){let e=[{index:0,type:"text",text:"Response cancelled"}];return a.dispatch((0,h.HH)({chatId:d,event:{object:o.f.messageDelta,delta:{content:e},id:"stream-cancelled-message"}})),{data:{...t,content:e}}}return{data:t}}let e=String(t);if(t instanceof Object&&Object.hasOwn(t,"message")){e=t.message;try{let t=JSON.parse(e);Object.hasOwn(t,"message")&&(e=t.message)}catch(e){}}return a.dispatch((0,h.Y0)({chatId:d,errorMessage:e})),n.v.addAction("SNOWFLAKE_INTELLIGENCE_STREAM_ERROR",{chatId:d}),{error:(0,u.m)(t)}}finally{_.delete(d),a.dispatch((0,h.U5)({chatId:d}))}})}),abortSICompletion:e.mutation({queryFn:e=>{let{chatId:t}=e,a=_.get(t);return a&&(a.abort(),_.delete(t)),{data:{success:!0}}}}),createChat:e.mutation({queryFn:async e=>{let{title:t,agent:a,settings:n}=e,s={id:(0,r.nanoid)(),title:t||"New Chat",messages:[],settings:null!=n?n:(0,f.K)(),agent:a};return{data:await g(s,100)}}}),loadChat:e.query({providesTags:[S],queryFn:async(e,t)=>{let{id:a}=e,n=await t.dispatch(A.endpoints.loadChats.initiate()).unwrap();return{data:await g(n.find(e=>e.id===a),100)}}}),generateTitle:e.mutation({queryFn:(0,s.V)(async({sqlQueryBackend:e,ambientUserContext:t},a,n)=>{var r;let{chatId:s}=a,o=E.yt.selectAllMessages(n.getState(),s)[0],d=`Here is a conversation between a Snowflake Intelligence agent and a user. ${JSON.stringify([o])} Please provide a concise title for this conversation using no more than 6 words. Only return the title. Avoid using phrases like "user asks" or "conversation about", instead write it as if it were the title of a document or note. Aim for clarity, relevance, and a casual, human tone.
          `,u=await e.query({desc:"snowflake-intelligence-generate-title",sqlQuery:new i.L("SELECT SNOWFLAKE.CORTEX.COMPLETE('llama3.1-8b', ?)",(0,l.i)(d)).toQuery(),role:null!=(r=t.currentRole())?r:"",isInternal:!0}),c=u.rows[0][0].trim();return await n.dispatch(A.endpoints.updateChat.initiate({id:s,title:c})).unwrap(),{data:u.rows[0][0]}})}),generateAnalystSQLExecResultsForMessage:e.mutation({queryFn:async(e,t)=>{let{chatId:a,messageId:n}=e,r=(0,c.F)(t.getState(),a,n,"cortex_analyst_sql_exec").map(async e=>await t.dispatch(A.endpoints.generateAnalystSQLExecResults.initiate({chatId:a,messageId:n,content:e})).unwrap());return{data:await Promise.all(r)}}})})}),{useCreateChatMutation:T,useLoadChatQuery:R,useLoadChatsQuery:C,useUpdateChatMutation:O,useGenerateAnalystSQLExecResultsMutation:N,useAbortSICompletionMutation:v}=I},100138:function(e,t,a){a.d(t,{_:()=>s});var n=a(594696),r=a(411151);let s=(0,n.createSelector)([r.g,(e,t)=>t],(e,t)=>null==e?void 0:e.find(e=>e.agent_name===t))},411151:function(e,t,a){a.d(t,{g:()=>r});var n=a(101129);let r=e=>(0,n.d)(e).data},101129:function(e,t,a){a.d(t,{d:()=>i});var n=a(799787),r=a(632189),s=a(996111),o=a(115533);let i=(0,r.V)(({ambientUserContext:e},t)=>{var a;let r=(0,n.h)(e.currentRole()),i=null!=(a=(0,o.p)(t))?a:"";return s.nA.endpoints.getAgentsConfig.select({role:r,warehouse:i})(t)})},249064:function(e,t,a){a.d(t,{T:()=>o});var n=a(594696),r=a(799787),s=a(100138);let o=(0,n.createSelector)([s._],e=>{var t,a;return null!=(a=null==e||null==(t=e.tools)?void 0:t.map(e=>{var t;return(0,r.h)(null==(t=e.tool_spec)?void 0:t.name)}))?a:[]})},974587:function(e,t,a){a.d(t,{B:()=>r});var n=a(216973);let r=(e,t)=>{var a;return null==(a=(0,n.y)(e,t))?void 0:a.name}},476331:function(e,t,a){a.d(t,{S:()=>i});var n=a(594696),r=a(249064),s=a(974587),o=a(216973);let i=(0,n.createSelector)([o.y,(e,t)=>{let a=(0,s.B)(e,t);return a?(0,r.T)(e,a):[]}],(e,t)=>{var a;if(e)return{...e,enabledToolNames:null!=(a=e.enabledToolNames)?a:t}})},88760:function(e,t,a){a.d(t,{v:()=>s});var n=a(594696),r=a(735546);let s=(0,n.createSelector)([r.yt.selectMessageById,(e,t,a,n)=>n],(e,t)=>{if((null==e?void 0:e.role)==="assistant"||(null==e?void 0:e.role)==="user")return e.content.filter(e=>e.type===t)})},384549:function(e,t,a){a.d(t,{F:()=>s});var n=a(594696),r=a(88760);let s=(0,n.createSelector)([(e,t,a)=>(0,r.v)(e,t,a,"tool_use"),(...e)=>e[3]],(e,t)=>e.filter(e=>e.tool_type===t))},216973:function(e,t,a){a.d(t,{y:()=>r});var n=a(735546);let r=(e,t)=>{var a;return null==(a=n.yt.selectChatById(e,t))?void 0:a.agent}},632025:function(e,t,a){a.d(t,{P:()=>n});let n=e=>e.snowflakeIntelligence},115533:function(e,t,a){a.d(t,{p:()=>r});var n=a(632025);let r=e=>(0,n.P)(e).warehouse},769851:function(e,t,a){a.d(t,{v:()=>r});var n=a(735546);function r(e,t){let a=n.pd.selectMessageIds(e,t).at(-1);if(void 0!==a)return n.pd.selectMessageById(e,t,a)}},318265:function(e,t,a){a.d(t,{OH:()=>P,bm:()=>R,U5:()=>w,qN:()=>b,Nd:()=>O,fP:()=>S,IS:()=>D,fF:()=>g,Y0:()=>L,lv:()=>y,Xm:()=>h,hT:()=>C,Z8:()=>E,wb:()=>M,KY:()=>v,ZP:()=>p,EW:()=>f,HH:()=>T,g0:()=>x,$o:()=>_,q4:()=>N});var n=a(747456),r=a(799787),s=a(735546),o=a(736652),i=a(292271),l=a(996111),d=a(14897),u=a(769851);function c(e,t){let a=(0,r.h)((0,u.v)(e,t));return"assistant"===a.role?a:{id:a.id+1,role:"assistant",content:[],responseStartTimestamp:Date.now()}}let m=(0,n.createSlice)({name:"snowflakeIntelligence",initialState:{chats:s.uF.getInitialState(),activeChatId:"",defaultAgentName:"",warehouse:null,isInitialized:!1,reasoningAgentEnabled:!1},reducers:{siInitialized:(e,t)=>{let{warehouse:a}=t.payload;e.isInitialized=!0,e.warehouse=a},activeChatChanged:(e,t)=>{e.activeChatId=t.payload},messageAdded:(e,t)=>{let{chatId:a,message:n}=t.payload;s.uF.addOneMessage(e.chats,a,{...n,id:s.W3.selectTotalMessages(e,a)})},userMessageAdded:(e,t)=>{let{chatId:a,...n}=t.payload;m.caseReducers.messageAdded(e,m.actions.messageAdded({chatId:a,message:{role:"user",...n}}))},lastMessageResent:(e,t)=>{var a;let{chatId:n}=t.payload,r=s.W3.selectAllMessages(e,n),o=r.findLastIndex(e=>"user"===e.role&&!e.isHidden),i=r[o],l=r.slice(o).map(e=>e.id);s.uF.removeManyMessages(e.chats,n,l);let d=null==(a=s.W3.selectChatById(e,n))?void 0:a.currentlyOpenRightPane;l.forEach(t=>{(null==d?void 0:d.type)==="canvas"&&d.id.messageId===t&&m.caseReducers.changeOpenCanvas(e,m.actions.changeOpenCanvas({chatId:n,canvasId:void 0}))}),m.caseReducers.userMessageAdded(e,m.actions.userMessageAdded({chatId:n,content:i.content}))},streamStarted:(e,t)=>{let{chatId:a,shouldCollapseIntoPrevious:n}=t.payload,r=c(e.chats,a);s.uF.upsertOneMessage(e.chats,a,{...r,responseStartTimestamp:Date.now(),shouldCollapseIntoPrevious:n}),s.uF.updateOneChat(e.chats,{id:a,changes:{streamStatus:"processing"}})},streamFinished:(e,t)=>{let{chatId:a}=t.payload,n=(0,r.h)((0,u.v)(e.chats,a));s.uF.updateOneChat(e.chats,{id:a,changes:{streamStatus:void 0}}),s.uF.updateOneMessage(e.chats,a,{id:n.id,changes:{responseEndTimestamp:Date.now()}})},streamErrorEncountered:(e,t)=>{let{chatId:a,errorMessage:n}=t.payload,o=(0,r.h)((0,u.v)(e.chats,a));s.uF.updateOneMessage(e.chats,a,{id:o.id,changes:{errorMessage:n}})},messageFragmentEventReceived:(e,t)=>{var a,n,r;let{chatId:i,event:l}=t.payload,d=c(e.chats,i),u=structuredClone(d.content),m=u.at(-1),p=null!=(n=structuredClone(d.debugContent))?n:[],h=null!=(r=structuredClone(d.thinkingContent))?r:[];for(let t of l.delta.content){let a=u.length;"text"===t.type&&t.text&&t.text.includes(o.e)?p.push(t):u.length?(null==m?void 0:m.type)==="text"&&"text"===t.type?m.text+=t.text||"":(null==m?void 0:m.type)==="thinking"&&"thinking"===t.type?m.thinking.text+=t.thinking.text||"":u.push({...t,index:a}):u.push({...t,index:a}),s.uF.updateOneMessage(e.chats,i,{id:d.id,changes:{content:u,debugContent:p,thinkingContent:h}})}let E=(null==d?void 0:d.content.length)===0||(null==d||null==(a=d.content.at(-1))?void 0:a.type)==="tool_use"?"processing":"streaming";s.uF.updateOneChat(e.chats,{id:i,changes:{streamStatus:E}})},loadingStatusChanged:(e,t)=>{let{chatId:a,loadingStatus:n}=t.payload;s.uF.updateOneChat(e.chats,{id:a,changes:{streamStatus:n}})},settingsChanged:(e,t)=>{let{chatId:a,settings:n}=t.payload;s.uF.updateOneChat(e.chats,{id:a,changes:{settings:n}})},settingsReset:(e,t)=>{let{chatId:a}=t.payload;m.caseReducers.settingsChanged(e,m.actions.settingsChanged({chatId:a,settings:(0,i.K)()}))},agentChanged:(e,t)=>{let{chatId:a,agent:n}=t.payload;s.uF.updateOneChat(e.chats,{id:a,changes:{agent:n}})},enabledAgentToolsChanged:(e,t)=>{let{chatId:a,enabledToolNames:n}=t.payload;s.uF.updateOneChat(e.chats,{id:a,changes:{agent:{...(0,r.h)(s.W3.selectChatById(e,a)).agent,enabledToolNames:n}}})},semanticModelsLoadingStatusChanged:(e,t)=>{let{chatId:a,semanticModelsLoadingStatus:n}=t.payload;s.uF.updateOneChat(e.chats,{id:a,changes:{semanticModelsLoading:n}})},semanticModelsLoaded:(e,t)=>{let{chatId:a,semanticModels:n}=t.payload;s.uF.updateOneChat(e.chats,{id:a,changes:{semanticModels:n}})},semanticModelsErrorEncountered:(e,t)=>{let{chatId:a,errors:n}=t.payload;s.uF.updateOneChat(e.chats,{id:a,changes:{semanticModelsErrors:n}})},chatRightPaneChanged:(e,t)=>{let{chatId:a,currentlyOpenRightPane:n}=t.payload;s.uF.updateOneChat(e.chats,{id:a,changes:{currentlyOpenRightPane:n}})},chatMessageFeedbackUpdated:(e,t)=>{let{chatId:a,messageId:n,feedback:r}=t.payload;s.uF.updateOneMessage(e.chats,a,{id:n,changes:{feedback:r}})},changeOpenCanvas:(e,t)=>{let{chatId:a,canvasId:n}=t.payload;s.uF.updateOneChat(e.chats,{id:a,changes:{currentlyOpenRightPane:n&&{type:"canvas",id:n,mode:"chart"}}})},changeOpenCanvasMode:(e,t)=>{let{chatId:a,canvasId:n,mode:r}=t.payload;s.uF.updateOneChat(e.chats,{id:a,changes:{currentlyOpenRightPane:{type:"canvas",id:n,mode:r}}})},reasoningAgentEnabledChanged:(e,t)=>{let{reasoningAgentEnabled:a}=t.payload;e.reasoningAgentEnabled=a}},extraReducers:e=>{e.addMatcher(d.N.endpoints.createChat.matchFulfilled,(e,t)=>{s.uF.addOneChat(e.chats,t.payload)}),e.addMatcher(d.N.endpoints.loadChat.matchFulfilled,(e,t)=>{let a=t.payload;if(!a){e.activeChatId=void 0;return}s.uF.upsertOneChat(e.chats,a)}),e.addMatcher(d.N.endpoints.loadChats.matchFulfilled,(e,t)=>{s.uF.upsertManyChats(e.chats,t.payload)}),e.addMatcher(d.N.endpoints.updateChat.matchFulfilled,(e,t)=>{let a=t.payload;if(!a){e.activeChatId=void 0;return}s.uF.upsertOneChat(e.chats,a)}),e.addMatcher(l.nA.endpoints.getAgentsConfig.matchFulfilled,(e,t)=>{e.defaultAgentName=t.payload[0].agent_name})}}),p=m.reducer,{activeChatChanged:h,agentChanged:E,changeOpenCanvas:y,changeOpenCanvasMode:f,chatRightPaneChanged:g,enabledAgentToolsChanged:S,lastMessageResent:_,loadingStatusChanged:A,messageAdded:I,messageFragmentEventReceived:T,reasoningAgentEnabledChanged:R,settingsChanged:C,settingsReset:O,siInitialized:N,semanticModelsLoadingStatusChanged:v,semanticModelsErrorEncountered:b,streamStarted:M,streamFinished:w,streamErrorEncountered:L,userMessageAdded:D,semanticModelsLoaded:P,chatMessageFeedbackUpdated:x}=m.actions},624206:function(e,t,a){a.d(t,{qG:()=>y,vd:()=>f,g1:()=>E});var n=a(315183),r=a(141257),s=a(782269),o=a(420174),i=a(329322),l=a(903542),d=a(159771),u=a(113939),c=a(511714),m=a(36534);function p(e){return({[c.h.CortexML]:"CORTEX_ML",[c.h.CortexFineTuned]:"CORTEX_FINETUNED",[c.h.DocIntelligence]:"DOC_INTELLIGENCE",[c.h.UserModel]:"USER_MODEL",[c.h.DocumentAI]:"DOC_AI"})[e]}var h=a(483845);let E=r.Z.injectEndpoints({endpoints:e=>({showModelsInAccount:e.query({queryFn:async e=>{let t=function(e=[]){return new i.L("SELECT SYSTEM$SHOW_MODELS_IN_ACCOUNT(").addConditionally(!!e.length,"{}",(0,m.i)(e.map(p).join(", "))).add(")").toQuery()}(e.modelTypes);return{data:function(e){let t=JSON.parse(e.rows[0][0]);return(0,h.y)(t,"camelCase").map(e=>({name:e.name,createdOn:e.createdOn,comment:e.comment,owner:e.owner,modelType:e.modelType,id:{database:e.databaseName,schema:e.schemaName,name:e.name,type:o.M.ML_MODEL}}))}(await n.IL.services.sqlQueryBackend.query({sqlQuery:t,role:e.role,isInternal:!0,desc:"system-show-models-in-account"}))}}}),getModelVersionFiles:e.query({queryFn:async e=>{let t=new i.L("LIST 'snow://model/{}/versions/{}';",(0,d.M)({type:o.M.ML_MODEL,name:(0,l.H)(e.modelId.name)}),(0,u.V)(e.versionName)).toQuery(),a=await n.IL.services.sqlQueryBackend.query({sqlQuery:t,role:e.role,database:e.modelId.database,schema:e.modelId.schema,isInternal:!0,desc:"show-files-in-model-version"});return{data:(0,s.S)(a)}}})})}),{useShowModelsInAccountQuery:y,useGetModelVersionFilesQuery:f}=E},465304:function(e,t,a){a.d(t,{av:()=>eu,hu:()=>es,sN:()=>ep,Ly:()=>ei,pC:()=>em,vb:()=>ey,AO:()=>eE,an:()=>ec,UX:()=>eo,tV:()=>eh,QH:()=>el});var n,r=a(315183),s=a(632189),o=a(141257),i=a(548810),l=a(782269),d=a(932897),u=a(329322),c=a(36534);let m=(e,t)=>{let a=new u.L;return a.add("COMMENT ON EXTERNAL AGENT IDENTIFIER(?) IS ?",(0,c.i)(e),(0,c.i)(t)),a.toQuery()},p=e=>{let t=new u.L;return t.add("CREATE EXTERNAL AGENT IDENTIFIER(?)",(0,c.i)(e)),t.toQuery()};var h=a(420174),E=a(159771);let y=e=>{let t=new u.L;return t.add("DROP EXTERNAL AGENT IDENTIFIER(?)",(0,E.M)({name:e,type:h.M.ML_MODEL})),t.toQuery()};var f=a(217386),g=a(338997);let S=(e,t,a,n,r,s)=>{let o=new u.L;return o.add(`
WITH OBJECT_IDS AS (
        SELECT PARSE_JSON(SYSTEM$GET_OBJECT_IDS_FOR_AI_EVAL(?, ?, ?, ?, ?)) AS IDS
),
EVAL_ROOT_SPANS AS (
    SELECT
        *
    FROM
        TABLE(snowflake.local.GET_AI_OBSERVABILITY_EVENTS(?, ?, ?, ?))
    JOIN OBJECT_IDS ON TRUE
    WHERE
        RECORD_ATTRIBUTES:"${g.cN.SPAN_TYPE}" = '${g.wb.EVAL_ROOT}' AND
        RECORD_ATTRIBUTES:"${g.cN.RUN_ID}" = OBJECT_IDS.IDS:run.id AND
        RECORD_ATTRIBUTES:"${g.cN.EVAL_TARGET_RECORD_ID}" = (?)
),
EVAL_SPANS AS (
    SELECT
        RECORD_ATTRIBUTES:"${g.cN.EVAL_EVAL_ROOT_ID}" AS ROOT_ID,
        ARRAY_AGG(
            OBJECT_CONSTRUCT(
                'criteria', TO_VARCHAR(RECORD_ATTRIBUTES:"${g.cN.EVAL_CRITERIA}"),
                'explanation', TO_VARCHAR(RECORD_ATTRIBUTES:"${g.cN.EVAL_EXPLANATION}"),
                'score', RECORD_ATTRIBUTES:"${g.cN.EVAL_SCORE}",
                'raw', RECORD_ATTRIBUTES
            )
        ) AS CHILD_ATTRIBUTES
    FROM
        TABLE(snowflake.local.GET_AI_OBSERVABILITY_EVENTS(?, ?, ?, ?))
    JOIN OBJECT_IDS ON TRUE
    WHERE
        RECORD_ATTRIBUTES:"${g.cN.SPAN_TYPE}" = '${g.wb.EVAL}' AND
        RECORD_ATTRIBUTES:"${g.cN.RUN_ID}" = OBJECT_IDS.IDS:run.id
    GROUP BY
        ROOT_ID
)
    SELECT
        rs.RECORD_ATTRIBUTES:"${g.cN.EVAL_EVAL_ROOT_ID}" as ID,
        rs.RECORD_ATTRIBUTES:"${g.cN.EVAL_FEEDBACK_NAME}" AS NAME,
        rs.RECORD_ATTRIBUTES:"${g.cN.EVAL_ROOT_SCORE}" AS SCORE,
        rs.RECORD_ATTRIBUTES:"${g.cN.EVAL_ROOT_ERROR}" AS ERROR,
        COALESCE(cs.CHILD_ATTRIBUTES, []) AS CALLS
    FROM EVAL_ROOT_SPANS rs LEFT JOIN EVAL_SPANS cs ON rs.RECORD_ATTRIBUTES:"${g.cN.EVAL_EVAL_ROOT_ID}" = cs.ROOT_ID
        ;`,(0,c.i)((0,f.P)(a)),(0,c.i)(s),(0,c.i)((0,f.P)(e)),(0,c.i)((0,f.P)(t)),(0,c.i)(n),(0,c.i)((0,f.P)(e)),(0,c.i)((0,f.P)(t)),(0,c.i)((0,f.P)(a)),(0,c.i)(s),(0,c.i)(r),(0,c.i)((0,f.P)(e)),(0,c.i)((0,f.P)(t)),(0,c.i)((0,f.P)(a)),(0,c.i)(s)),o.toQuery()},_=(e,t,a,n)=>{let r=new u.L;return r.add(`
WITH EVAL_RESULTS AS (
    SELECT 
        RECORD_ATTRIBUTES:"${g.cN.OBJECT_NAME}" AS APP_NAME,
        RECORD_ATTRIBUTES:"${g.cN.OBJECT_VERSION}" AS APP_VERSION,
        RECORD_ATTRIBUTES:"${g.cN.RUN_NAME}" AS RUN_NAME,
        RECORD_ATTRIBUTES:"${g.cN.RECORD_ID}" AS RECORD_ID,
        RECORD_ATTRIBUTES:"${g.cN.EVAL_FEEDBACK_NAME}" AS FEEDBACK_NAME,
        AVG(RECORD_ATTRIBUTES:"${g.cN.EVAL_ROOT_SCORE}") AS AVERAGE_SCORE,
    FROM TABLE(snowflake.local.GET_AI_OBSERVABILITY_EVENTS(?, ?, ?, ?))
    WHERE
        APP_VERSION IS NOT NULL AND 
        RUN_NAME IS NOT NULL AND 
        RECORD_ID IS NOT NULL
    GROUP BY 
        APP_NAME,
        APP_VERSION,
        RUN_NAME,
        RECORD_ID,
        FEEDBACK_NAME
),
AGGREGATED_EVAL_RESULTS AS (
    SELECT 
        APP_NAME,
        APP_VERSION,
        RUN_NAME,
        FEEDBACK_NAME,
        AVG(AVERAGE_SCORE) AS AVERAGE_SCORE_FOR_APP
    FROM EVAL_RESULTS
    GROUP BY APP_NAME, APP_VERSION, RUN_NAME, FEEDBACK_NAME
),
AGGREGATED_EVAL_RESULTS_BY_RUN AS (
    SELECT 
        APP_NAME,
        APP_VERSION,
        RUN_NAME,
        ARRAY_AGG(OBJECT_CONSTRUCT('name', FEEDBACK_NAME, 'result', AVERAGE_SCORE_FOR_APP)) AS METRICS
    FROM 
        AGGREGATED_EVAL_RESULTS 
    GROUP BY APP_NAME, APP_VERSION, RUN_NAME
),
RECORD_COUNTS AS (
    SELECT 
        RECORD_ATTRIBUTES:"${g.cN.OBJECT_NAME}" AS APP_NAME,
        RECORD_ATTRIBUTES:"${g.cN.OBJECT_VERSION}" AS APP_VERSION,
        RECORD_ATTRIBUTES:"${g.cN.RUN_NAME}" AS RUN_NAME,
        COUNT(*) AS COUNT
    FROM
        TABLE(snowflake.local.GET_AI_OBSERVABILITY_EVENTS(?, ?, ?, ?))
    WHERE
        APP_NAME IS NOT NULL AND 
        APP_VERSION IS NOT NULL AND 
        RUN_NAME IS NOT NULL AND 
        RECORD_ATTRIBUTES:"${g.cN.SPAN_TYPE}" = '${g.wb.RECORD_ROOT}'
    GROUP BY
        APP_NAME, APP_VERSION, RUN_NAME
)
SELECT 
    AER.APP_NAME,
    AER.APP_VERSION,
    AER.RUN_NAME,
    RC.COUNT AS NUM_RECORDS,
    AER.METRICS,
FROM 
    AGGREGATED_EVAL_RESULTS_BY_RUN AER 
        LEFT JOIN 
    RECORD_COUNTS RC 
        ON AER.APP_NAME = RC.APP_NAME AND AER.APP_VERSION = RC.APP_VERSION AND AER.RUN_NAME = RC.RUN_NAME
;`,(0,c.i)((0,f.P)(e)),(0,c.i)((0,f.P)(t)),(0,c.i)((0,f.P)(a)),(0,c.i)(n),(0,c.i)((0,f.P)(e)),(0,c.i)((0,f.P)(t)),(0,c.i)((0,f.P)(a)),(0,c.i)(n)),r.toQuery()};var A=a(700577);let I=()=>{let e=new u.L,t="SHOW EXTERNAL AGENTS";return A.i.UI_ENABLE_AI_ML_FEATURE_40()?t="SELECT SYSTEM$SHOW_EXTERNAL_AGENTS_IN_ACCOUNT()":A.i.UI_ENABLE_AI_ML_FEATURE_36()&&(t="SHOW EXTERNAL AGENTS IN ACCOUNT"),e.add(t),e.toQuery()},T=({application:e,run:t,objectType:a,version:n})=>{let r=new u.L;return r.add("SELECT SYSTEM$AIML_RUN_OPERATION('GET', ?) AS RUN_JSON;",(0,c.i)(JSON.stringify({object_name:(0,f.P)(e),run_name:t,object_type:a,object_version:n}))),r.toQuery()},R=({application:e,objectType:t})=>{let a=new u.L;return a.add("SELECT SYSTEM$AIML_RUN_OPERATION('LIST', ?) AS RUN_JSON;",(0,c.i)(JSON.stringify({object_name:(0,f.P)(e),object_type:t}))),a.toQuery()},C=(e,t,a,n,r)=>{let s=new u.L;return s.add(`
WITH 
    OBJECT_IDS AS (
        SELECT PARSE_JSON(SYSTEM$GET_OBJECT_IDS_FOR_AI_EVAL(?, ?, ?, ?, ?)) AS IDS
    ),
    RECORD_ROOT_SPANS AS (
        SELECT 
            RECORD_ATTRIBUTES:"${g.cN.RECORD_ID}" as ID,
            RECORD_ATTRIBUTES:"${g.cN.INPUT_ID}" as INPUT_ID,
            TIMESTAMP,
            TIMESTAMPDIFF('millisecond', START_TIMESTAMP, TIMESTAMP) AS DURATION,
            COALESCE(RECORD_ATTRIBUTES:"${g.cN.RECORD_ROOT_INPUT}", '') as INPUT,
            COALESCE(RECORD_ATTRIBUTES:"${g.cN.RECORD_ROOT_OUTPUT}", '') as OUTPUT,
            COALESCE(RECORD_ATTRIBUTES:"${g.cN.RECORD_ROOT_ERROR}", '') as ERROR,
            COALESCE(RECORD_ATTRIBUTES:"${g.cN.RECORD_ROOT_GROUND_TRUTH_OUTPUT}", '') as EXPECTED_OUTPUT,
        FROM
            TABLE(snowflake.local.GET_AI_OBSERVABILITY_EVENTS(?, ?, ?, ?))
        JOIN OBJECT_IDS ON TRUE
        WHERE
            ID IS NOT NULL AND
            RECORD_ATTRIBUTES:"${g.cN.RUN_ID}" = OBJECT_IDS.IDS:run.id AND
            RECORD_ATTRIBUTES:"${g.cN.EVAL_EVAL_ROOT_ID}" IS NULL AND 
            RECORD_ATTRIBUTES:"${g.cN.SPAN_TYPE}" = '${g.wb.RECORD_ROOT}'
    ),
    EVAL_RESULTS AS (
        SELECT 
            RECORD_ATTRIBUTES:"${g.cN.RECORD_ID}" AS RECORD_ID,
            RECORD_ATTRIBUTES:"${g.cN.EVAL_FEEDBACK_NAME}" AS FEEDBACK_NAME,
            AVG(RECORD_ATTRIBUTES:"${g.cN.EVAL_ROOT_SCORE}") AS AVERAGE_SCORE,
        FROM
            TABLE(snowflake.local.GET_AI_OBSERVABILITY_EVENTS(?, ?, ?, ?))
        JOIN OBJECT_IDS ON TRUE
        WHERE
            RECORD_ID IS NOT NULL AND
            FEEDBACK_NAME IS NOT NULL AND
            RECORD_ATTRIBUTES:"${g.cN.RUN_ID}" = OBJECT_IDS.IDS:run.id AND
            RECORD_ATTRIBUTES:"${g.cN.SPAN_TYPE}" = '${g.wb.EVAL_ROOT}'
        GROUP BY 
            RECORD_ID,
            FEEDBACK_NAME
    ),
    AGGREGATED_EVAL_RESULTS AS (
        SELECT 
            RECORD_ID,
            ARRAY_AGG(OBJECT_CONSTRUCT('name', feedback_name, 'result', average_score)) AS METRICS
        FROM EVAL_RESULTS
        GROUP BY RECORD_ID
    )
SELECT
    R.*,
    COALESCE(E.METRICS, []) AS METRICS
FROM 
    RECORD_ROOT_SPANS R LEFT JOIN AGGREGATED_EVAL_RESULTS E ON R.ID = E.RECORD_ID
ORDER BY R.TIMESTAMP;`,(0,c.i)((0,f.P)(a)),(0,c.i)(r),(0,c.i)((0,f.P)(e)),(0,c.i)((0,f.P)(t)),(0,c.i)(n),(0,c.i)((0,f.P)(e)),(0,c.i)((0,f.P)(t)),(0,c.i)((0,f.P)(a)),(0,c.i)(r),(0,c.i)((0,f.P)(e)),(0,c.i)((0,f.P)(t)),(0,c.i)((0,f.P)(a)),(0,c.i)(r)),s.toQuery()};var O=a(95452);let N=e=>{let t=Object.values(e).sort((e,t)=>{var a,n;return(null!=(a=t.start_time_ms)?a:0)-(null!=(n=e.start_time_ms)?n:0)})[0];if(!t)return"UNKNOWN";let{end_time_ms:a,completion_status:n}=t,r=null==n?void 0:n.status;if(r)switch(r){case"COMPLETED":return"INVOCATION_COMPLETED";case"PARTIALLY_COMPLETED":return"INVOCATION_PARTIALLY_COMPLETED";case"FAILED":return"FAILED";case"UNKNOWN":return"UNKNOWN"}return"STARTED"!==r&&a?"UNKNOWN":"INVOCATION_IN_PROGRESS"},v=e=>{var t,a,n;let r=N(null!=(t=e.invocations)?t:{}),s=null!=(a=e.computations)?a:{},o=null!=(n=e.metrics)?n:{};if(Object.values(s).some(e=>{var t;return!e.end_time_ms&&(null!=(t=e.start_time_ms)?t:0)+3e5>Date.now()}))return"COMPUTATION_IN_PROGRESS";let i=Object.values(o);return i.some(e=>{var t;return(null==(t=e.completion_status)?void 0:t.status)==="STARTED"})?"COMPUTATION_IN_PROGRESS":i.every(e=>{var t;return(null==(t=e.completion_status)?void 0:t.status)==="COMPLETED"})?"INVOCATION_COMPLETED"===r?"COMPLETED":"PARTIALLY_COMPLETED":i.every(e=>{var t;return(null==(t=e.completion_status)?void 0:t.status)==="FAILED"})?"FAILED":"PARTIALLY_COMPLETED"},b=e=>{var t,a;let n=null!=(t=e.invocations)?t:{},r=null!=(a=e.computations)?a:{};return 0===Object.keys(n).length?"CREATED":Object.values(r).length>0?v(e):N(n)},M=(e,t,a,n,r,s)=>{let o=new u.L;return o.add(`
WITH
    OBJECT_IDS AS (
        SELECT PARSE_JSON(SYSTEM$GET_OBJECT_IDS_FOR_AI_EVAL(?, ?, ?, ?, ?)) AS IDS
    )
SELECT
    timestamp,
    start_timestamp,
    trace,
    resource_attributes,
    record_type,
    record,
    record_attributes
FROM TABLE(snowflake.local.GET_AI_OBSERVABILITY_EVENTS(?, ?, ?, ?))
JOIN OBJECT_IDS ON TRUE
WHERE
    record_attributes:"${g.cN.RECORD_ID}" = (?) AND
    record_attributes:"${g.cN.RUN_ID}" = OBJECT_IDS.IDS:run.id AND
    record_attributes:"${g.cN.EVAL_EVAL_ROOT_ID}" IS NULL`,(0,c.i)((0,f.P)(a)),(0,c.i)(s),(0,c.i)((0,f.P)(e)),(0,c.i)((0,f.P)(t)),(0,c.i)(n),(0,c.i)((0,f.P)(e)),(0,c.i)((0,f.P)(t)),(0,c.i)((0,f.P)(a)),(0,c.i)(s),(0,c.i)(r)),o.toQuery()};var w=a(813500);let L=(e,t,a)=>(0,l.S)(e).reduce((e,n)=>{let{appName:r,runName:s,metrics:o,numRecords:i,appVersion:l}=n;return e[(0,O.D)({database:t,schema:a,version:l,application:r,name:s})]={numRecords:i,metrics:o},e},{}),D=e=>{if(null===e)return null;let t=(0,l.S)(e);if(1!==t.length)throw Error("Unexpected number of rows in the raw JSON result");return t[0].runJson},P=(e,t)=>{var a,n,r,s,o;let i=null!=(n=e.run_metadata)?n:{};return{name:e.run_name,description:e.description,dataset:null!=(r=null==(a=e.source_info)?void 0:a.name)?r:"",createdAt:e.created_on_ms,labels:null!=(s=i.labels)?s:[],llmJudgeName:null!=(o=i.llm_judge_name)?o:"",rawMetadata:i,status:b(i),application:e.object_name,version:e.object_version,...t}},x=(e,t)=>{let a=D(e);return null===a?null:P(JSON.parse(a),t)},k=(e,t)=>{let a=D(e);return null===a?[]:JSON.parse(a).map(e=>P(e,t))};var U=a(747456),F=a(954104),q=a(632463);let $=e=>{if(!e)return null;let t=/.* (\d+) .*/u.exec(e);if(!(null==t?void 0:t[1]))return null;try{return parseInt(t[1],10)}catch(e){return null}},B=e=>{let t=e.map(e=>{if(3!==e.length)return null;let[t,a,n]=e,r="success"===a.toLowerCase()?"COMPLETED":"FAILED",s=$(n);return null===s?null:{name:t,status:r,record_count:s}});return(0,q.e)(t)},G=(e,t,a,n,r,s,o=[])=>{let i=new u.L;return i.add(`
WITH
    OBJECT_IDS AS (
        SELECT PARSE_JSON(SYSTEM$GET_OBJECT_IDS_FOR_AI_EVAL(?, ?, ?, ?, ?)) AS IDS
    )
SELECT
    MAX(TIMESTAMP) AS LATEST_TIMESTAMP,
    COUNT(*) AS SPAN_COUNT,
FROM
    TABLE(snowflake.local.GET_AI_OBSERVABILITY_EVENTS(?, ?, ?, ?))
JOIN OBJECT_IDS ON TRUE
WHERE
    RECORD_ATTRIBUTES:"${g.cN.RUN_ID}" = OBJECT_IDS.IDS:run.id AND
    RECORD_ATTRIBUTES:"${g.cN.SPAN_TYPE}" = ?`,(0,c.i)((0,f.P)(a)),(0,c.i)(r),(0,c.i)((0,f.P)(e)),(0,c.i)((0,f.P)(t)),(0,c.i)(n),(0,c.i)((0,f.P)(e)),(0,c.i)((0,f.P)(t)),(0,c.i)((0,f.P)(a)),(0,c.i)(r),(0,c.i)(s)),o.forEach(e=>{i.add(`AND ${e}`)}),i.toQuery()},V=async(e,t)=>{let{sqlQueryBackend:a}=e,{database:n,schema:r,application:s,role:o,warehouse:i,run:d,objectType:u,spanType:c,additionalFilters:m}=t,p=await a.query({sqlQuery:G(n,r,s,d,u,c,m),isInternal:!1,role:o,warehouse:i,desc:"ai-observability-span-information-for-run"});return(0,l.S)(p)[0]},j=async(e,t)=>(await V(e,t)).spanCount,Q=async(e,t,a)=>{let n={...t,run:t.run.name,spanType:g.wb.EVAL_ROOT,additionalFilters:[`RECORD_ATTRIBUTES:"${g.cN.EVAL_FEEDBACK_NAME}" = '${a}'`]};try{let t=j(e,n),a=j(e,{...n,additionalFilters:[...n.additionalFilters,`RECORD_ATTRIBUTES:"${g.cN.EVAL_ROOT_ERROR}" IS NULL`]}),[r,s]=await Promise.all([t,a]);return{spanCount:r,spanCountWithoutError:s}}catch(e){return{spanCount:-1,spanCountWithoutError:-1}}},H=e=>{let t=new u.L;return t.add("SELECT * FROM TABLE(RESULT_SCAN(?));",(0,c.i)(e)),t.toQuery()},W=["completion_status","computation_id","id","name"],K=["end_time_ms"],J=async(e,t,a)=>{var n;let{metrics:r,invocations:s}=t.run.rawMetadata,o=null==(n=(await e.queryHistoryMonitoringBackend.getIndividualQueryHistory(a.query_id)).data.queries)?void 0:n[0],i={},l={},d={},u={},c={metricUpdates:i,computationUpdates:d,metricUpdateFieldMasks:l,computationUpdateFieldMasks:u},m=Object.values(null!=s?s:{}).sort((e,t)=>{var a,n;return(null!=(a=t.start_time_ms)?a:0)-(null!=(n=e.start_time_ms)?n:0)})[0],p=null==m?void 0:m.input_records_count,h=a.start_time_ms;if(o.state===F.QueryHistoryState.FAILED)return u[a.id]=[...K],d[a.id]={...a,end_time_ms:o.endTime},Object.values(null!=r?r:{}).forEach(e=>{e.computation_id===a.id&&(l[e.id]=[...W],i[e.id]={...e,completion_status:{record_count:0,status:"FAILED"}})}),c;try{if(!(null==o?void 0:o.endTime)||o.state!==F.QueryHistoryState.SUCCEEDED)throw Error("Query not in terminal state.");let n=await e.sqlQueryBackend.query({sqlQuery:H(a.query_id),role:t.role,warehouse:t.warehouse,isInternal:!1,desc:"ai-observability-get-computation-result"}),s=B(n.rows),m=await Promise.all(s.map(({name:a})=>Q(e,t,a)));if(!(void 0===h||h+3e5<Date.now())&&!(m.length&&(void 0===p?m.every(({spanCount:e})=>e>=0):m.every(({spanCount:e})=>e===p))))throw Error("Some metric spans are potentially yet to be uploaded.");return s.forEach(({name:e,...t},n)=>{var s;let{spanCount:o,spanCountWithoutError:d}=m[n],u={...t};d<(null!=p?p:o)&&(u.record_count=d,u.status="PARTIALLY_COMPLETED");let c=Object.values(null!=r?r:{}).find(t=>t.name===e&&!t.completion_status&&t.computation_id===a.id),h=null!=(s=null==c?void 0:c.id)?s:(0,U.nanoid)();l[h]=[...W],i[h]={completion_status:u,computation_id:a.id,id:h,name:e}}),u[a.id]=[...K],d[a.id]={...a,end_time_ms:o.endTime},c}catch(e){return c}},z=e=>{let t=new u.L;return t.add("SELECT SYSTEM$AIML_RUN_OPERATION('UPDATE', ?) AS RUN_JSON;",(0,c.i)(JSON.stringify({object_name:(0,f.P)(e.objectName),object_type:e.objectType,run_name:e.runName,invocation_field_masks:e.invocationFieldMasks,computation_field_masks:e.computationFieldMasks,metric_field_masks:e.metricFieldMasks,run_metadata_non_map_field_masks:e.runMetadataNonMapFieldMasks,run_metadata:e.runMetadata,description:e.description,update_description:e.updateDescription,object_version:e.objectVersion}))),t.toQuery()},Y=async(e,t)=>{var a,n,r;let{sqlQueryBackend:s}=e,{role:o,warehouse:i,database:l,schema:d,run:u,application:c,objectType:m}=t,p={...t,objectName:c,objectType:m,runName:u.name,description:u.description,objectVersion:u.version,updateDescription:!1,runMetadata:u.rawMetadata},h=await s.query({sqlQuery:z(p),isInternal:!1,role:o,warehouse:i,database:l,schema:d,desc:"ai-observability-update-run"});if(!(null==(r=h.rows)||null==(n=r[0])||null==(a=n[0])?void 0:a.toLowerCase().includes("success")))throw Error("Run update failed");return h},Z=async(e,t)=>{var a,n;let{run:r}=t,{rawMetadata:s}=r,{computations:o}=s,i=b(s),l=Object.values(null!=o?o:{}).filter(e=>!e.end_time_ms).slice(0,5);if("COMPUTATION_IN_PROGRESS"!==i||0===l.length)return null;let d={},u={},c={...s},m=await Promise.all(l.map(a=>J(e,t,a))),p={...null!=(a=c.metrics)?a:{}},h={...null!=(n=c.computations)?n:{}};return(m.forEach(({metricUpdates:e,computationUpdates:t})=>{Object.keys(e).forEach(t=>{p[t]=e[t],u[t]=["completion_status"]}),Object.keys(t).forEach(e=>{h[e]=t[e],d[e]=["end_time_ms"]})}),0===Object.keys(d).length&&0===Object.keys(u).length)?null:Y(e,{...t,computationFieldMasks:d,metricFieldMasks:u,run:{...r,rawMetadata:{...c,computations:h,metrics:p}}})};var X=a(411733);let ee=async(e,t)=>{var a,n,r,s;let{run:o}=t,{rawMetadata:i}=o,l=b(i),{invocations:d}=i;if("INVOCATION_IN_PROGRESS"!==l)return null;let u=Object.values(null!=d?d:{}).sort((e,t)=>{var a,n;return(null!=(a=t.start_time_ms)?a:0)-(null!=(n=e.start_time_ms)?n:0)})[0];if(!(null==u?void 0:u.id))throw Error("Status is INVOCATION_IN_PROGRESS but no invocations found");let c={...t,run:t.run.name,spanType:g.wb.RECORD_ROOT},m=await j(e,c),p=null,h=null!=(n=u.start_time_ms)?n:0,E=h+3e5;if(A.i._DP_ENABLE_AI_OBS_RUN_STATUS_UPDATE_TIMEOUT_HANDLING()){let{latestTimestamp:t}=await V(e,c);X.cM.info("AI Observability",`Latest record root timestamp: ${t}, Latest invocation timestamp: ${u.start_time_ms}`),E=Number.isNaN(t)?h+12e4:t+12e4}return(m===(null!=(r=u.input_records_count)?r:0)?p="COMPLETED":Date.now()>E&&(X.cM.info("AI Observability",`Marking invocation as completed due to timeout. Current time: ${Date.now()}, Cutoff: ${E}, Invocation start: ${null!=h?h:0}.`),p="PARTIALLY_COMPLETED"),p)?await Y(e,{...t,invocationFieldMasks:{[u.id]:["completion_status"]},run:{...o,rawMetadata:{...o.rawMetadata,invocations:{[u.id]:{...null!=(s=null==(a=o.rawMetadata.invocations)?void 0:a[u.id])?s:{},completion_status:{record_count:m,status:p}}}}}}):null};var et=((n={}).EXTERNAL_AGENTS="externalAgents",n.RUN="run",n);let ea=e=>{let{database:t,schema:a,application:n,version:r,run:s}=e;return{type:et.RUN,id:JSON.stringify({database:t,schema:a,application:n,version:r,run:s})}},en=e=>{let{database:t,schema:a,application:n}=e;return{type:et.RUN,id:JSON.stringify({database:t,schema:a,application:n})}},er=o.Z.enhanceEndpoints({addTagTypes:["run","externalAgents"]}).injectEndpoints({endpoints:e=>({listRuns:e.query({queryFn:async e=>{let{database:t,schema:a,application:n,role:s,warehouse:o,objectType:i}=e;return{data:k(await r.IL.services.sqlQueryBackend.query({sqlQuery:R({objectType:i,application:n}),isInternal:!1,role:s,warehouse:o,database:t,schema:a,desc:"ai-observability-list-runs"}),{database:t,schema:a})}},providesTags:(e,t,a)=>t?[]:[en(a)]}),getRun:e.query({queryFn:async e=>{let{database:t,schema:a,application:n,role:s,warehouse:o,run:i,version:l,objectType:d}=e,u=await r.IL.services.sqlQueryBackend.query({sqlQuery:T({application:n,run:i,version:l,objectType:d}),isInternal:!1,role:s,warehouse:o,database:t,schema:a,desc:"ai-observability-get-run"});return{data:x(u,{database:t,schema:a})}},providesTags:(e,t,a)=>t?[]:[en(a),ea(a)]}),listMetricsForRuns:e.query({queryFn:async e=>{let{database:t,schema:a,application:n,role:s,warehouse:o,objectType:i}=e;return{data:L(await r.IL.services.sqlQueryBackend.query({sqlQuery:_(t,a,n,i),isInternal:!1,role:s,warehouse:o,desc:"ai-observability-metrics-for-runs"}),t,a)}},providesTags:(e,t,a)=>t?[]:[en(a)]}),createRun:e.mutation({queryFn:e=>({data:e})}),createExternalAgent:e.mutation({queryFn:async e=>{let{database:t,schema:a,application:n,role:s,description:o}=e;return await r.IL.services.sqlQueryBackend.query({sqlQuery:p(n),isInternal:!1,database:t,schema:a,role:s,desc:"ai-observability-create-external-agent"}),o&&await r.IL.services.sqlQueryBackend.query({sqlQuery:m(n,o),isInternal:!1,database:t,schema:a,role:s,desc:"ai-observability-comment-on-external-agent"}),{data:{success:!0}}},async onQueryStarted(e,{dispatch:t,queryFulfilled:a}){try{await a,t(er.util.updateQueryData("otelApplications",{role:e.role,warehouse:e.warehouse},t=>(t.push({name:(0,w.G)(e.application),schemaName:e.schema,databaseName:e.database,createdOn:Date.now()}),t)))}catch(e){}finally{t(er.endpoints.otelApplications.initiate({role:e.role,warehouse:e.warehouse},{subscribe:!1,forceRefetch:!0}))}}}),dropExternalAgent:e.mutation({queryFn:async e=>{let{database:t,schema:a,application:n,role:s}=e;return await r.IL.services.sqlQueryBackend.query({sqlQuery:y(n),isInternal:!1,database:t,schema:a,role:s,desc:"ai-observability-drop-external-agent"}),{data:{success:!0}}},async onQueryStarted(e,{dispatch:t,queryFulfilled:a}){try{await a,t(er.util.updateQueryData("otelApplications",{role:e.role,warehouse:e.warehouse},t=>t.filter(t=>t.name!==e.application||t.schemaName!==e.schema||t.databaseName!==e.database)))}catch(e){}finally{t(er.endpoints.otelApplications.initiate({role:e.role,warehouse:e.warehouse},{subscribe:!1,forceRefetch:!0}))}}}),otelApplications:e.query({providesTags:[{type:et.EXTERNAL_AGENTS}],queryFn:async e=>{var t;let{role:a,warehouse:n}=e;return{data:(t=await r.IL.services.sqlQueryBackend.query({sqlQuery:I(),isInternal:!1,role:a,warehouse:n,desc:"ai-observability-otel-applications"}),A.i.UI_ENABLE_AI_ML_FEATURE_40()?JSON.parse(t.rows[0][0]).map(e=>({...e,createdOn:new Date(e.createdOn).getTime()})):(0,l.S)(t))}}}),listRecordsForRun:e.query({queryFn:async e=>{let{database:t,schema:a,application:n,role:s,warehouse:o,run:i,objectType:d}=e,u=await r.IL.services.sqlQueryBackend.query({sqlQuery:C(t,a,n,i,d),isInternal:!1,role:s,warehouse:o,desc:"ai-observability-records-for-runs"});return{data:(0,l.S)(u)}}}),traceSpans:e.query({queryFn:async e=>{let{database:t,schema:a,project:n,run:s,traceId:o,role:i,warehouse:l,objectType:d}=e,u=await r.IL.services.sqlQueryBackend.query({sqlQuery:M(t,a,n,s,o,d),isInternal:!1,role:i,warehouse:l,desc:"ai-observability-trace-spans"});return{data:{timestamp:new Date,tableData:u}}}}),evaluationSpansForRecord:e.query({queryFn:async e=>{let{database:t,schema:a,application:n,role:s,warehouse:o,run:i,recordId:l,objectType:d}=e;return{data:await r.IL.services.sqlQueryBackend.query({sqlQuery:S(t,a,n,i,l,d),isInternal:!1,role:s,warehouse:o,desc:"ai-observability-evaluation-spans-for-record"})}}})})}),es=er.injectEndpoints({endpoints:e=>({updateRunStatus:e.mutation({invalidatesTags:(e,t,a)=>t||!e?[]:[ea({...a,version:a.run.version,run:a.run.name}),en(a)],queryFn:(0,s.V)(async(e,t)=>{let{run:a}=t,{rawMetadata:n}=a,r=b(n);return"INVOCATION_IN_PROGRESS"===r?{data:await ee(e,t)}:"COMPUTATION_IN_PROGRESS"===r?{data:await Z(e,t)}:{data:null}})}),listRecordsForRuns:e.query({queryFn:async(e,t)=>{let a={},n={};return await Promise.all(e.map(async e=>{let r=(0,O.D)({...e,name:e.run}),s=t.dispatch(er.endpoints.listRecordsForRun.initiate(e));try{let e=await s.unwrap();a[r]=e}catch(e){(0,d.f)(e)?n[r]=e:n[r]=(0,i.L)(e)}finally{s.unsubscribe()}})),{data:{records:a,errors:n}}}})})}),{useListRunsQuery:eo,useGetRunQuery:ei,useListMetricsForRunsQuery:el,useCreateRunMutation:ed,useOtelApplicationsQuery:eu,useListRecordsForRunQuery:ec,useListRecordsForRunsQuery:em,useEvaluationSpansForRecordQuery:ep,useTraceSpansQuery:eh,useCreateExternalAgentMutation:eE,useDropExternalAgentMutation:ey}=es},338997:function(e,t,a){a.d(t,{EE:()=>n,cN:()=>s,wb:()=>r});let n="ai.observability",r={UNKNOWN:"unknown",CUSTOM:"custom",RECORDING:"recording",SEMANTIC:"semantic",RECORD_ROOT:"record_root",EVAL_ROOT:"eval_root",EVAL:"eval",RECORD:"record",RETRIEVAL:"retrieval",RERANKING:"reranking",GENERATION:"generation",MEMORIZATION:"memorization",EMBEDDING:"embedding",TOOL_INVOCATION:"tool_invocation",AGENT_INVOCATION:"agent_invocation"},s={OBJECT_NAME:`snow.${n}.object.name`,OBJECT_VERSION:`snow.${n}.object.version.name`,RUN_NAME:`snow.${n}.run.name`,RUN_ID:`snow.${n}.run.id`,RUN_NAME_NORMAL:`${n}.run.name`,SPAN_TYPE:`${n}.span_type`,SELECTOR_NAME:`${n}.selector_name`,RECORD_ID:`${n}.record_id`,APP_NAME:`${n}.app_name`,APP_VERSION:`${n}.app_version`,ROOT_SPAN_ID:`${n}.root_span_id`,INPUT_ID:`${n}.input_id`,DOMAIN:`${n}.domain`,COST_COST:`${n}.cost.cost`,COST_COST_CURRENCY:`${n}.cost.cost_currency`,COST_MODEL:`${n}.cost.model`,COST_NUM_TOKENS:`${n}.cost.num_tokens`,COST_NUM_PROMPT_TOKENS:`${n}.cost.num_prompt_tokens`,COST_NUM_COMPLETION_TOKENS:`${n}.cost.num_completion_tokens`,COST_NUM_GUARDRAIL_TOKENS:`${n}.cost.num_guardrail_tokens`,COST_NUM_CORTEX_GUARDRAIL_TOKENS:`${n}.cost.num_cortex_guardrails_tokens`,CALL_CALL_ID:`${n}.call.call_id`,CALL_STACK:`${n}.call.stack`,CALL_SIGNATURE:`${n}.call.signature`,CALL_FUNCTION:`${n}.call.function`,CALL_CLASS:`${n}.call.class`,CALL_ARGS:`${n}.call.args`,CALL_KWARGS:`${n}.call.kwargs`,CALL_BOUND_ARGUMENTS:`${n}.call.bound_arguments`,CALL_RETURN:`${n}.call.return`,CALL_ERROR:`${n}.call.error`,RECORDING_APP_ID:`${n}.${r.RECORDING}.app_id`,RECORD_ROOT_GROUND_TRUTH_OUTPUT:`${n}.${r.RECORD_ROOT}.ground_truth_output`,RECORD_ROOT_INPUT:`${n}.${r.RECORD_ROOT}.input`,RECORD_ROOT_OUTPUT:`${n}.${r.RECORD_ROOT}.output`,RECORD_ROOT_ERROR:`${n}.${r.RECORD_ROOT}.error`,EVAL_ROOT_TARGET_TRACE_ID:`${n}.${r.EVAL_ROOT}.target_trace_id`,EVAL_ROOT_TARGET_SPAN_ID:`${n}.${r.EVAL_ROOT}.target_span_id`,EVAL_ROOT_FEEDBACK_DEFINITION_ID:`${n}.${r.EVAL_ROOT}.feedback_definition_id`,EVAL_ROOT_STATUS:`${n}.${r.EVAL_ROOT}.status`,EVAL_ROOT_TOTAL_COST:`${n}.${r.EVAL_ROOT}.total_cost`,EVAL_ROOT_ERROR:`${n}.${r.EVAL_ROOT}.error`,EVAL_ROOT_SCORE:`${n}.${r.EVAL_ROOT}.score`,EVAL_ROOT_METADATA:`${n}.${r.EVAL_ROOT}.metadata`,EVAL_TARGET_RECORD_ID:`${n}.${r.EVAL}.target_record_id`,EVAL_EVAL_ROOT_ID:`${n}.${r.EVAL}.eval_root_id`,EVAL_FEEDBACK_NAME:`${n}.${r.EVAL}.metric_name`,EVAL_ARGS:`${n}.${r.EVAL}.args`,EVAL_CRITERIA:`${n}.${r.EVAL}.criteria`,EVAL_EXPLANATION:`${n}.${r.EVAL}.explanation`,EVAL_SCORE:`${n}.${r.EVAL}.score`,RETRIEVAL_QUERY_TEXT:`${n}.${r.RETRIEVAL}.query_text`,RETRIEVAL_QUERY_EMBEDDING:`${n}.${r.RETRIEVAL}.query_embedding`,RETRIEVAL_DISTANCE_TYPE:`${n}.${r.RETRIEVAL}.distance_type`,RETRIEVAL_NUM_CONTEXTS:`${n}.${r.RETRIEVAL}.num_contexts`,RETRIEVAL_RETRIEVED_CONTEXTS:`${n}.${r.RETRIEVAL}.retrieved_contexts`,RETRIEVAL_RETRIEVED_CONTEXT:`${n}.${r.RETRIEVAL}.retrieved_context`,RETRIEVAL_RETRIEVED_SCORES:`${n}.${r.RETRIEVAL}.retrieved_scores`,RETRIEVAL_RETRIEVED_EMBEDDINGS:`${n}.${r.RETRIEVAL}.retrieved_embeddings`,RERANKING_QUERY_TEXT:`${n}.${r.RERANKING}.query_text`,RERANKING_MODEL_NAME:`${n}.${r.RERANKING}.model_name`,RERANKING_TOP_N:`${n}.${r.RERANKING}.top_n`,RERANKING_INPUT_CONTEXT_TEXTS:`${n}.${r.RERANKING}.input_context_texts`,RERANKING_INPUT_CONTEXT_SCORES:`${n}.${r.RERANKING}.input_context_scores`,RERANKING_OUTPUT_RANKS:`${n}.${r.RERANKING}.output_ranks`,GENERATION_MODEL_NAME:`${n}.${r.GENERATION}.model_name`,GENERATION_MODEL_TYPE:`${n}.${r.GENERATION}.model_type`,GENERATION_INPUT_TOKEN_COUNT:`${n}.${r.GENERATION}.input_token_count`,GENERATION_INPUT_MESSAGES:`${n}.${r.GENERATION}.input_messages`,GENERATION_OUTPUT_TOKEN_COUNT:`${n}.${r.GENERATION}.output_token_count`,GENERATION_OUTPUT_MESSAGES:`${n}.${r.GENERATION}.output_messages`,GENERATION_TEMPERATURE:`${n}.${r.GENERATION}.temperature`,GENERATION_COST:`${n}.${r.GENERATION}.cost`,MEMORIZATION_MEMORY_TYPE:`${n}.${r.MEMORIZATION}.memory_type`,MEMORIZATION_REMEMBERED:`${n}.${r.MEMORIZATION}.remembered`,EMBEDDING_INPUT_TEXT:`${n}.${r.EMBEDDING}.input_text`,EMBEDDING_MODEL_NAME:`${n}.${r.EMBEDDING}.model_name`,EMBEDDING_EMBEDDING:`${n}.${r.EMBEDDING}.embedding`,TOOL_INVOCATION_DESCRIPTION:`${n}.${r.TOOL_INVOCATION}.description`,AGENT_INVOCATION_DESCRIPTION:`${n}.${r.AGENT_INVOCATION}.description`}},95452:function(e,t,a){a.d(t,{D:()=>r});var n=a(981384);let r=e=>JSON.stringify({database:e.database,schema:e.schema,application:(0,n.$)(e.application),version:e.version,name:e.name})},813500:function(e,t,a){a.d(t,{G:()=>s});var n=a(19318),r=a(76954);let s=e=>(0,r.SD)(e)?e.toUpperCase():(0,n.b)(e)},981384:function(e,t,a){a.d(t,{$:()=>n});let n=e=>'"'===e[0]&&'"'===e[e.length-1]?e.slice(1,-1):e},335156:function(e,t,a){a.d(t,{E:()=>o});var n=a(880002),r=a(52640);let s={[n.sJ.metric.AUC]:r.qi.ROC_AUC,[n.sJ.metric.F1_SCORE]:r.qi.F1_SCORE,[n.sJ.metric.ACCURACY]:r.qi.CLASSIFICATION_ACCURACY,[n.sJ.metric.PRECISION]:r.qi.PRECISION,[n.sJ.metric.RECALL]:r.qi.RECALL,[n.rS.metric.RMSE]:r.qi.RMSE,[n.rS.metric.MAE]:r.qi.MAE,[n.rS.metric.MAPE]:r.qi.MAPE,[n.rS.metric.MSE]:r.qi.MSE,[n.iP.metric.COUNT]:r.XA.COUNT,[n.DP.metric.DIFFERENCE_OF_MEANS]:r.kK.DIFFERENCE_OF_MEANS,[n.DP.metric.JENSEN_SHANNON_NUMERICAL]:r.kK.JENSEN_SHANNON,[n.DP.metric.JENSEN_SHANNON_CATEGORICAL]:r.kK.JENSEN_SHANNON,[r.kK.WASSERSTEIN]:r.kK.WASSERSTEIN,[r.kK.JENSEN_SHANNON]:r.kK.JENSEN_SHANNON,[r.qi.MACRO_AVERAGE_PRECISION]:r.qi.MACRO_AVERAGE_PRECISION,[r.qi.MICRO_AVERAGE_PRECISION]:r.qi.MICRO_AVERAGE_PRECISION,[r.qi.MACRO_AVERAGE_RECALL]:r.qi.MACRO_AVERAGE_RECALL,[r.qi.MICRO_AVERAGE_RECALL]:r.qi.MICRO_AVERAGE_RECALL},o=e=>s[e]},825789:function(e,t,a){a.d(t,{J:()=>s,l:()=>r});var n=a(700577);let r=()=>n.i.UI_ENABLE_AI_ML_FEATURE_30(),s=()=>n.i.UI_ENABLE_AI_ML_FEATURE_33()&&r()},940332:function(e,t,a){a.d(t,{u:()=>r});var n=a(868605);let r=e=>({type:"DetailedMonitor",id:(0,n.z)(e)})},571590:function(e,t,a){a.d(t,{g:()=>r});var n=a(868605);let r=e=>({type:"PanelData",id:(0,n.z)(e)})},868605:function(e,t,a){a.d(t,{z:()=>n});let n=e=>{let{role:t,database:a,schema:n,model:r,modelVersion:s}=e;return`${t}/${a}/${n}/${r}/${s}`}},473660:function(e,t,a){a.d(t,{K:()=>s});var n=a(174996),r=a(771695);let s=e=>{if("between"===e.type)return[new Date(e.startDate).valueOf(),new Date(e.endDate).valueOf()];let{relative:t}=e,a={};return("day"===t.unit?a.days=t.value:"week"===t.unit?a.weeks=t.value:"month"===t.unit?a.months=t.value:"year"===t.unit&&(a.years=t.value),"past"===t.tense)?[(0,n.Z)(Date.now(),a).valueOf(),Date.now().valueOf()]:[Date.now().valueOf(),(0,r.Z)(Date.now(),a).valueOf()]}},932897:function(e,t,a){a.d(t,{f:()=>n});function n(e){return"object"==typeof e&&null!=e&&"status"in e}},97674:function(e,t,a){a.d(t,{P:()=>r});var n=a(52640);let r=e=>n.dW.includes(e)},761136:function(e,t,a){a.d(t,{E:()=>r});var n=a(52640);let r=e=>n.tU.includes(e)},727087:function(e,t,a){a.d(t,{M:()=>r});var n=a(52640);let r=e=>n.aG.includes(e)},430218:function(e,t,a){a.d(t,{M:()=>o});var n=a(97674),r=a(727087),s=a(888913);let o=e=>(0,n.P)(e)||(0,s.J)(e)||(0,r.M)(e)},888913:function(e,t,a){a.d(t,{J:()=>r});var n=a(52640);let r=e=>n.M3.includes(e)},861016:function(e,t,a){a.d(t,{p:()=>r});var n=a(492263);let r=e=>n.cF.includes(e)},528955:function(e,t,a){a.d(t,{o:()=>r});var n=a(492263);let r=e=>n.v_.includes(e)},575046:function(e,t,a){a.d(t,{d:()=>o});var n=a(861016),r=a(492263);let s=e=>r.al.includes(e),o=e=>s(e)||(0,n.p)(e)},928349:function(e,t,a){a.d(t,{o:()=>r});var n=a(575046);let r=e=>(0,n.d)(e.type)&&void 0!==e.featureName},826779:function(e,t,a){a.d(t,{tE:()=>eI,c7:()=>eR,cI:()=>eO,PF:()=>eT,Im:()=>e_,IL:()=>eC,mk:()=>eA});var n=a(315183),r=a(632189),s=a(141257),o=a(548810),i=a(5312),l=a(66062);let d=async e=>{var t;if(!(null==(t=globalThis)?void 0:t.isSecureContext))return e;let a=new TextEncoder().encode(e);return Array.from(new Uint8Array(await globalThis.crypto.subtle.digest("SHA-256",a))).map(e=>e.toString(16).padStart(2,"0")).join("")};var u=a(861016),c=a(928349),m=a(492263);let p=async e=>{if(!e)return{panelsEnabled:[]};let{panelsEnabled:t=[]}=e;return{panelsEnabled:await Promise.all(t.map(async e=>(0,c.o)(e)?{type:(0,u.p)(e.type)?m.zG[e.type]:e.type,featureName:await d(e.featureName)}:e))}};var h=a(819260),E=a(825789),y=a(528955);let f=e=>(0,y.o)(e.type),g=async(e=[])=>{let t={};return await Promise.all(e.map(async e=>{t[await d(e)]=e})),t},S=e=>{let{actualClassColumns:t,actualScoreColumns:a,predictionClassColumns:n,predictionScoreColumns:r,stringColumns:s,booleanColumns:o,numericalColumns:i}=e;return g([...t,...a,...n,...r,...s,...o,...i])};var _=a(52640);let A=(e,t,a)=>{let{actualClassColumns:n,actualScoreColumns:r,predictionClassColumns:s,predictionScoreColumns:o}=a,i=[...s,...o],l=[...n,...r],d=[...l,...i];return e===m.QQ.COUNT&&i.includes(t)?"PREDICTION_COUNT":e===m.QQ.COUNT&&l.includes(t)?"ACTUAL_COUNT":e===m.kz.DIFFERENCE_OF_MEANS&&d.includes(t)?"ACTUALS_PREDICTIONS_DIFFERENCE_OF_MEANS":e===m.kz.JENSEN_SHANNON_NUMERICAL&&d.includes(t)?"ACTUALS_PREDICTIONS_JENSEN_SHANNON_NUMERICAL":e===_.kK.JENSEN_SHANNON&&d.includes(t)?"ACTUALS_PREDICTIONS_JENSEN_SHANNON":e===_.kK.WASSERSTEIN&&d.includes(t)?"ACTUALS_PREDICTIONS_WASSERSTEIN":e},I=async(e,t)=>{let a=[];try{let t=JSON.parse(e);if(!t||"object"!=typeof t||!Object.prototype.hasOwnProperty.call(t,"panelsEnabled")||!Array.isArray(t.panelsEnabled))return h.log.error("Error parsing saved panels from dashboard settings"),[];a=t.panelsEnabled}catch(e){return[]}let n=await S(t),r=[],s=new Set;return a.forEach(e=>{if(f(e)&&!s.has(e.type)){r.push(e),s.add(e.type);return}if(!(0,E.l)()&&m.E4.includes(e.type)||!(0,c.o)(e))return;let{type:a,featureName:o}=e,i=`${a}-${o}`;if(!n[o]||s.has(i))return;let l=n[o],d=A(a,l,t);r.push({type:d,featureName:l}),s.add(i)}),r};var T=a(880002),R=a(799787),C=a(825018);let O=e=>{let{metric:t,detailedModelMonitor:a}=e;if(!a)throw new C.A("MISSING_MODEL_MONITOR");let{columns:n}=a;if(0===n.actualClassColumns.length)throw new C.A("MISSING_ACTUAL_CLASS_COLUMNS");if(t===T.sJ.metric.AUC||t===_.qi.ROC_AUC){if(0===n.predictionScoreColumns.length)throw new C.A("MISSING_PREDICTION_SCORE_COLUMNS")}else if(0===n.predictionClassColumns.length)throw new C.A("MISSING_PREDICTION_CLASS_COLUMNS")},N=e=>[e.timestampColumn,...e.idColumns,...e.predictionClassColumns,...e.predictionScoreColumns,...e.actualClassColumns,...e.actualScoreColumns,...e.numericalColumns,...e.stringColumns,...e.booleanColumns],v=e=>{let{column:t,detailedModelMonitor:a}=e;if(!a)throw new C.A("MISSING_MODEL_MONITOR");let{columns:n}=a;if(!N(n).includes(t))throw new C.A("MISSING_COLUMN")},b=e=>[...e.predictionClassColumns,...e.predictionScoreColumns,...e.actualClassColumns,...e.actualScoreColumns,...e.numericalColumns],M=e=>{let{metric:t,column:a,detailedModelMonitor:n}=e;if(!n)throw new C.A("MISSING_MODEL_MONITOR");let{columns:r,baselineDetails:s}=n;if(null===s.status)throw new C.A("MISSING_BASELINE");let o=N(r),i=b(r);if(!o.includes(a))throw new C.A("MISSING_COLUMN");if(t===T.DP.metric.JENSEN_SHANNON_CATEGORICAL&&!r.stringColumns.includes(a)||t===T.DP.metric.JENSEN_SHANNON_NUMERICAL&&!i.includes(a)||t===T.DP.metric.DIFFERENCE_OF_MEANS&&!i.includes(a)&&!r.booleanColumns.includes(a))throw new C.A("INVALID_COLUMN_TYPE")},w=e=>{let{detailedModelMonitor:t}=e;if(!t)throw new C.A("MISSING_MODEL_MONITOR");let{columns:a}=t;if(0===a.actualScoreColumns.length)throw new C.A("MISSING_ACTUAL_SCORE_COLUMNS");if(0===a.predictionScoreColumns.length)throw new C.A("MISSING_PREDICTION_SCORE_COLUMNS")},L=({commonQueryParams:e,mlObservabilityApi:t,panelType:a,featureName:n,detailedModelMonitor:r})=>{let s=(0,u.p)(a)?m.zG[a]:a;switch(s){case T.sJ.metric.AUC:case T.sJ.metric.F1_SCORE:case T.sJ.metric.ACCURACY:case T.sJ.metric.PRECISION:case T.sJ.metric.RECALL:return O({metric:s,detailedModelMonitor:r}),t.createClassificationPerformanceQuery({...e,metric:s});case T.rS.metric.RMSE:case T.rS.metric.MAE:case T.rS.metric.MAPE:case T.rS.metric.MSE:return w({metric:s,detailedModelMonitor:r}),t.createRegressionPerformanceQuery({...e,metric:s})}let o=(0,R.h)(n,`Column is required for metric ${s}`);switch(s){case T.iP.metric.COUNT:return v({metric:s,column:o,detailedModelMonitor:r}),t.createCountQuery({...e,metric:s,column:o});case T.DP.metric.DIFFERENCE_OF_MEANS:case T.DP.metric.JENSEN_SHANNON_NUMERICAL:case T.DP.metric.JENSEN_SHANNON_CATEGORICAL:return M({metric:s,column:o,detailedModelMonitor:r}),t.createDriftQuery({...e,metric:s,column:o});case _.kK.WASSERSTEIN:default:throw Error(`Found unknown panel type: ${a}`)}};var D=a(652691),P=a(335156),x=a(97674),k=a(761136),U=a(727087),F=a(430218),q=a(888913);let $=e=>_.Ne.includes(e),B=e=>{let{queryParams:t,mlObservabilityApi:a,panelType:n,featureName:r,detailedModelMonitor:s}=e,o=(0,u.p)(n)?m.zG[n]:n,i=(0,P.E)(o);if((0,F.M)(i))return(0,x.P)(i)||(0,U.M)(i)?O({metric:i,detailedModelMonitor:s}):(0,q.J)(i)&&w({metric:i,detailedModelMonitor:s}),a.createModelMonitorPerformanceQuery({...t,metric:i});let l=(0,R.h)(r,`Column is required for metric ${o}`);if($(i))return v({metric:i,column:l,detailedModelMonitor:s}),a.createModelMonitorStatQuery({...t,metric:i,column:l});if((0,k.E)(i))return M({metric:i,column:l,detailedModelMonitor:s}),a.createModelMonitorDriftQuery({...t,metric:i,column:l});throw(0,D.U)(i),Error(`Found unknown panel type: ${n}`)};var G=a(940332);let V=e=>{let{database:t,schema:a,role:n}=e;return{type:"Monitors",id:`${n}/${t}/${a}`}};var j=a(571590),Q=a(473660),H=a(214572),W=a(711629),K=a(503646),J=a(272992);let z={[T.DP.granularity.HOUR]:864e5,[T.DP.granularity.DAY]:864e5,[T.DP.granularity.WEEK]:6048e5,[T.DP.granularity.MONTH]:2592e6,[T.DP.granularity.YEAR]:31536e6},Y=e=>{let{queryRequirements:t,monitorName:a}=e,{dateRange:n,database:r,schema:s}=t,o=function(e){let[t,a]=(0,Q.K)(e);return 200>(0,H.Z)(a,t)?T.DP.granularity.HOUR:200>(0,W.Z)(a,t)?T.DP.granularity.DAY:200>(0,K.Z)(a,t)?T.DP.granularity.WEEK:200>(0,J.Z)(a,t)?T.DP.granularity.MONTH:T.DP.granularity.YEAR}(n),i={role:t.role,warehouse:t.warehouse,database:r,schema:s},[l,d]=(0,Q.K)(n),u=new Date(l-z[o]).toISOString(),c=new Date(d+z[o]).toISOString();return{executionContext:i,granularity:o,start:u,end:c,modelMonitorName:a,deadlineInMs:6e4}};var Z=a(771695),X=a(502949),ee=a(174996);let et=e=>{let{queryRequirements:t,monitorName:a}=e,{dateRange:n,database:r,schema:s}=t,o=function(e){let[t,a]=(0,Q.K)(e);return 200>(0,W.Z)(a,t)?{days:1}:200>(0,K.Z)(a,t)?{weeks:1}:200>(0,J.Z)(a,t)?{months:1}:{years:1}}(n),i={role:t.role,warehouse:t.warehouse,database:r,schema:s},[l,d]=(0,Q.K)(n),u=(0,ee.Z)(l,o).toISOString(),c=(0,Z.Z)(d,o).toISOString();return{executionContext:i,granularity:(0,X.Z)(o),start:u,end:c,modelMonitorName:a,deadlineInMs:6e4}};var ea=a(932897);let en=["RUNNING","SUSPENDED"],er=(e,t)=>t&&e.includes(t)?t:null,es=["TABULAR_BINARY_CLASSIFICATION","TABULAR_REGRESSION","TABULAR_MULTI_CLASSIFICATION"],eo=["RUNNING","SUSPENDED","ACTIVE","PARTIALLY_SUSPENDED"],ei=["ACTIVE","MASKED","DELETED"],el=["ACTIVE","MASKED","DELETED"],ed=["ACTIVE","DELETED"],eu=e=>({name:e.name,database:e.database_name,schema:e.schema_name,status:er(ei,e.status)}),ec=e=>({model:e.model_name,version:e.version_name,function:e.function_name,database:e.database_name,schema:e.schema_name,modelStatus:er(el,e.model_status),versionStatus:er(ed,e.version_status)}),em=e=>({createdOn:1e3*Number.parseInt(e.created_on,10),name:e.name,database:e.database_name,schema:e.schema_name,warehouse:e.warehouse,refreshInterval:e.refresh_interval,aggregationWindow:e.aggregation_window,modelTask:er(es,e.model_task),monitorState:er(eo,e.monitor_state),sourceDetails:eu(e.source),baselineDetails:eu(e.baseline),modelDetails:ec(e.model)}),ep=e=>{var t,a,n,r,s,o,i,l,d,u,c,m,p,h,E,y,f,g,S,_,A,I,T,R,C,O,N,v;return{...em(e),aggregationStatus:{sourceAggregated:er(en,null==(t=e.aggregation_status)?void 0:t.SOURCE_AGGREGATED),accuracyAggregated:er(en,null==(a=e.aggregation_status)?void 0:a.ACCURACY_AGGREGATED)},aggregationLastError:{sourceAggregated:null!=(y=null==(n=e.aggregation_last_error)?void 0:n.SOURCE_AGGREGATED)?y:"",accuracyAggregated:null!=(f=null==(r=e.aggregation_last_error)?void 0:r.ACCURACY_AGGREGATED)?f:""},aggregationLastDataTimestamp:{sourceAggregated:Number.parseInt(null!=(g=null==(s=e.aggregation_last_data_timestamp)?void 0:s.SOURCE_AGGREGATED)?g:"-1",10),accuracyAggregated:Number.parseInt(null!=(S=null==(o=e.aggregation_last_data_timestamp)?void 0:o.ACCURACY_AGGREGATED)?S:"-1",10)},columns:{timestampColumn:null!=(_=null==(i=e.columns)?void 0:i.timestamp_column)?_:"",idColumns:null!=(A=null==(l=e.columns)?void 0:l.id_columns)?A:[],predictionClassColumns:null!=(I=null==(d=e.columns)?void 0:d.prediction_class_columns)?I:[],predictionScoreColumns:null!=(T=null==(u=e.columns)?void 0:u.prediction_score_columns)?T:[],actualClassColumns:null!=(R=null==(c=e.columns)?void 0:c.actual_class_columns)?R:[],actualScoreColumns:null!=(C=null==(m=e.columns)?void 0:m.actual_score_columns)?C:[],numericalColumns:null!=(O=null==(p=e.columns)?void 0:p.numerical_columns)?O:[],stringColumns:null!=(N=null==(h=e.columns)?void 0:h.string_columns)?N:[],booleanColumns:null!=(v=null==(E=e.columns)?void 0:E.boolean_columns)?v:[]}}},eh=(e,t)=>{let{values:a}=e;return a.map(([e,a])=>({timestamp:1e3*e,data:a,modelVersion:t}))},eE=(e,t)=>{let{values:a}=e;return a.map(e=>({...e,timestamp:1e3*e.timestamp,modelVersion:t}))},ey=s.Z.enhanceEndpoints({addTagTypes:["PanelData","SavedSettings","Monitors","DetailedMonitor"]}).injectEndpoints({endpoints:e=>({detailedMonitoringMetadata:e.query({queryFn:async e=>{let{role:t,database:a,schema:r,monitorName:s}=e,o=n.IL.services.coldbrew.client().mlObservabilityApi;return{data:ep(await o.getModelMonitorNoPath(a,r,s,t))}},providesTags:(e,t,a)=>{var n,r;return[(0,G.u)({...a,model:null!=(n=null==e?void 0:e.modelDetails.model)?n:"",modelVersion:null!=(r=null==e?void 0:e.modelDetails.version)?r:""})]}}),monitoringMetadata:e.query({queryFn:async e=>{let{database:t,schema:a,role:r}=e,s=n.IL.services.coldbrew.client().mlObservabilityApi;return{data:(await s.listModelMonitorsNoPath(t,a,r)).map(e=>em(e))}},providesTags:(e,t,a)=>[V(a)]})})}),ef=ey.injectEndpoints({endpoints:e=>({retrieveDashboardSettings:e.query({queryFn:(0,r.V)(async({localStorage:e},t,a)=>{let n=(0,i.E)(t),r=await d(n),s=e.get(r),o=await a.dispatch(ey.endpoints.detailedMonitoringMetadata.initiate(t)).unwrap();if(!o)return{data:(0,l.S)()};if(!s)return{data:(0,l.S)(o)};let u=await I(null!=s?s:"",o.columns);return{data:{...(0,l.S)(),panelsEnabled:u}}})}),saveDashboardSettings:e.mutation({queryFn:(0,r.V)(async({localStorage:e},t)=>{let{state:a,...n}=t,r=(0,i.E)(n),s=await p(a),o=await d(r);return e.set(o,JSON.stringify(s)),{data:a}}),invalidatesTags:["SavedSettings"]}),monitoringMetadataForModel:e.query({queryFn:async(e,t)=>({data:(await t.dispatch(ey.endpoints.monitoringMetadata.initiate(e)).unwrap()).filter(t=>t.modelDetails.model===e.model)})})})}),eg=ef.injectEndpoints({endpoints:e=>({monitoringMetadataForModelVersion:e.query({queryFn:async(e,t)=>{var a;return{data:null!=(a=(await t.dispatch(ef.endpoints.monitoringMetadataForModel.initiate(e)).unwrap()).filter(t=>t.modelDetails.version===e.modelVersion)[0])?a:null}}})})}),eS=eg.injectEndpoints({endpoints:e=>({singlePanelData:e.query({queryFn:async(e,t)=>{try{let a,{modelVersion:r,panelType:s,featureName:o}=e,i=Y(e),{schema:l,database:d,role:u,warehouse:c}=e.queryRequirements;if(!(a=await t.dispatch(ey.endpoints.detailedMonitoringMetadata.initiate({database:d,schema:l,role:u,warehouse:c,monitorName:e.monitorName})).unwrap()))return{error:{status:404,data:{message:"Monitor not found"}}};if((0,E.l)()){let t=et(e),i=await B({queryParams:t,panelType:s,featureName:o,detailedModelMonitor:a,mlObservabilityApi:n.IL.services.coldbrew.client().mlObservabilityApi});return{data:eE(i,r)}}let m=await L({commonQueryParams:i,panelType:s,featureName:o,detailedModelMonitor:a,mlObservabilityApi:n.IL.services.coldbrew.client().mlObservabilityApi});return{data:eh(m,r)}}catch(e){if(e instanceof C.A)return{error:{status:"CUSTOM_ERROR",data:e,error:e.message}};return{error:(0,o.L)(e)}}},providesTags:(e,t,a)=>{let{queryRequirements:n,modelVersion:r}=a,{database:s,schema:o,model:i,role:l}=n;return[(0,j.g)({role:l,database:s,schema:o,model:i,modelVersion:r})]}})})}),e_=eS.injectEndpoints({endpoints:e=>({panelData:e.query({queryFn:async(e,t)=>{let{modelVersions:a,queryRequirements:n,panelType:r,featureName:s}=e,i=[],l={};return await Promise.all(a.map(async e=>{try{let a=await t.dispatch(eg.endpoints.monitoringMetadataForModelVersion.initiate({modelVersion:e,...n})).unwrap();if(!a){l[e]={status:404,data:{message:"Monitor not found"}};return}let o=await t.dispatch(eS.endpoints.singlePanelData.initiate({queryRequirements:n,panelType:r,featureName:null!=s?s:"",modelVersion:e,monitorName:a.name})).unwrap();i.push(...o)}catch(t){(0,ea.f)(t)?l[e]=t:l[e]=(0,o.L)(t)}})),{data:{points:i,errors:l}}},providesTags:(e,t,a)=>{let{queryRequirements:n,modelVersions:r}=a,{database:s,schema:o,model:i,role:l}=n;return r.map(e=>(0,j.g)({role:l,database:s,schema:o,model:i,modelVersion:e}))}})})}),{useDetailedMonitoringMetadataQuery:eA,usePanelDataQuery:eI,useRetrieveDashboardSettingsQuery:eT,useSaveDashboardSettingsMutation:eR,useMonitoringMetadataQuery:eC,util:eO}=e_},52640:function(e,t,a){a.d(t,{M3:()=>d,Ne:()=>l,XA:()=>o,aG:()=>c,dW:()=>u,kK:()=>s,qi:()=>r,tU:()=>i});var n=a(880002);let r=n.UG.metric,s=n.e_.metric,o=n.$4.metric,i=[s.DIFFERENCE_OF_MEANS,s.JENSEN_SHANNON,s.WASSERSTEIN],l=[o.COUNT,o.COUNT_NULL],d=[r.RMSE,r.MAE,r.MAPE,r.MSE],u=[r.ROC_AUC,r.F1_SCORE,r.CLASSIFICATION_ACCURACY,r.PRECISION,r.RECALL],c=[r.CLASSIFICATION_ACCURACY,r.MICRO_AVERAGE_RECALL,r.MICRO_AVERAGE_PRECISION,r.MACRO_AVERAGE_RECALL,r.MACRO_AVERAGE_PRECISION],m=[...d,...u,...c];[...m],[...m,...l],[...l,...i],o.COUNT,o.COUNT,s.DIFFERENCE_OF_MEANS,s.JENSEN_SHANNON,s.JENSEN_SHANNON,s.WASSERSTEIN},825018:function(e,t,a){a.d(t,{A:()=>n,I:()=>r});class n extends Error{constructor(e){super(e),this.reason=e}}let r=(e,t)=>{if(e instanceof n)switch(e.reason){case"MISSING_MODEL_MONITOR":return t({id:"Unable to determine model monitor. Ensure that the model monitor exists and that you have the appropriate privileges to view the model monitor."});case"MISSING_COLUMN":return t({id:"Provided column does not exist for the selected model monitor."});case"MISSING_COLUMN_DETAILS":return t({id:"Unable to determine model monitor column details. Ensure that the model monitor exists and that you have the appropriate privileges to view the model monitor."});case"MISSING_ACTUAL_SCORE_COLUMNS":return t({id:"Actual score columns are required but not found for the selected model monitor. Ensure that the actual score columns are set for the model monitor."});case"MISSING_ACTUAL_CLASS_COLUMNS":return t({id:"Actual class columns are required but not found for the selected model monitor. Ensure that the actual class columns are set for the model monitor."});case"MISSING_PREDICTION_SCORE_COLUMNS":return t({id:"Prediction score columns are required but not found for the selected model monitor. Ensure that the prediction score columns are set for the model monitor."});case"MISSING_PREDICTION_CLASS_COLUMNS":return t({id:"Prediction class columns are required but not found for the selected model monitor. Ensure that the prediction class columns are set for the model monitor."});case"MISSING_BASELINE":return t({id:"A baseline is required but not found for the selected model monitor. Ensure that the baseline is set for the model monitor."});case"INVALID_COLUMN_TYPE":return t({id:"An invalid column type was detected for this metric. Ensure that the selected column is present in the source table for the model monitor."});default:return}}},492263:function(e,t,a){a.d(t,{A3:()=>s,E4:()=>c,QQ:()=>l,Zv:()=>d,al:()=>m,cF:()=>p,i7:()=>o,kz:()=>i,v_:()=>u,zG:()=>h});var n=a(880002),r=a(52640);let s=n.rS.metric,o=n.sJ.metric,i=n.DP.metric,l=n.iP.metric,d=[s.RMSE,s.MAE,s.MAPE,s.MSE],u=[o.AUC,o.F1_SCORE,o.ACCURACY,o.PRECISION,o.RECALL,...d,r.qi.MACRO_AVERAGE_PRECISION,r.qi.MICRO_AVERAGE_PRECISION,r.qi.MACRO_AVERAGE_RECALL,r.qi.MICRO_AVERAGE_RECALL],c=[r.kK.WASSERSTEIN,r.kK.JENSEN_SHANNON],m=[l.COUNT,i.DIFFERENCE_OF_MEANS,i.JENSEN_SHANNON_NUMERICAL,i.JENSEN_SHANNON_CATEGORICAL,...c];[...u,...m];let p=["PREDICTION_COUNT","ACTUAL_COUNT","ACTUALS_PREDICTIONS_DIFFERENCE_OF_MEANS","ACTUALS_PREDICTIONS_JENSEN_SHANNON_NUMERICAL","ACTUALS_PREDICTIONS_WASSERSTEIN","ACTUALS_PREDICTIONS_JENSEN_SHANNON"],h={PREDICTION_COUNT:l.COUNT,ACTUAL_COUNT:l.COUNT,ACTUALS_PREDICTIONS_DIFFERENCE_OF_MEANS:i.DIFFERENCE_OF_MEANS,ACTUALS_PREDICTIONS_JENSEN_SHANNON_NUMERICAL:i.JENSEN_SHANNON_NUMERICAL,ACTUALS_PREDICTIONS_WASSERSTEIN:r.kK.WASSERSTEIN,ACTUALS_PREDICTIONS_JENSEN_SHANNON:r.kK.JENSEN_SHANNON}},5312:function(e,t,a){a.d(t,{E:()=>n});let n=e=>{let{region:t,org:a,database:n,schema:r,model:s,modelVersion:o,monitorName:i}=e;return`${t}/${a}/${n}/${r}/${s}/${o}/${i}/ml-observability`}},66062:function(e,t,a){a.d(t,{S:()=>o});var n=a(52640),r=a(492263),s=a(313947);let o=e=>{let t=[];if(e){let{columns:a,modelTask:s}=e,{predictionClassColumns:o,predictionScoreColumns:i,actualClassColumns:l,actualScoreColumns:d}=a;o.forEach(e=>t.push({type:"PREDICTION_COUNT",featureName:e})),i.forEach(e=>t.push({type:"PREDICTION_COUNT",featureName:e})),l.forEach(e=>t.push({type:"ACTUAL_COUNT",featureName:e})),d.forEach(e=>t.push({type:"ACTUAL_COUNT",featureName:e})),"TABULAR_REGRESSION"===s&&i.length>0&&d.length>0&&(t.push({type:r.A3.RMSE}),t.push({type:r.A3.MAE}),t.push({type:r.A3.MAPE}),t.push({type:r.A3.MSE})),"TABULAR_BINARY_CLASSIFICATION"===s&&(i.length>0&&l.length>0&&t.push({type:r.i7.AUC}),o.length>0&&l.length>0&&(t.push({type:r.i7.F1_SCORE}),t.push({type:r.i7.ACCURACY}),t.push({type:r.i7.PRECISION}),t.push({type:r.i7.RECALL}))),"TABULAR_MULTI_CLASSIFICATION"===s&&o.length>0&&l.length>0&&(t.push({type:r.i7.ACCURACY}),t.push({type:n.qi.MACRO_AVERAGE_PRECISION}),t.push({type:n.qi.MACRO_AVERAGE_RECALL}),t.push({type:n.qi.MICRO_AVERAGE_PRECISION}),t.push({type:n.qi.MICRO_AVERAGE_RECALL}))}return{dateRange:(0,s.V)(),comparedModelVersions:[],panelsEnabled:t,intentDomain:null}}},313947:function(e,t,a){a.d(t,{V:()=>n});let n=()=>({type:"relative",relative:{tense:"past",value:7,unit:"day"},timezone:Intl.DateTimeFormat().resolvedOptions().timeZone})},448433:function(e,t,a){a.d(t,{DI:()=>m,S5:()=>u,ZP:()=>d,vT:()=>p});var n=a(747456),r=a(826779),s=a(5312),o=a(66062),i=a(313947);let l=(0,n.createSlice)({name:"observabilityMonitoring",initialState:{},reducers:{dashboardInitialized:(e,t)=>{var a,n;let r=(0,s.E)(t.payload);e[r]={...(0,o.S)(),...null!=(a=e[r])?a:{},...null!=(n=t.payload.initialState)?n:{}}},dashboardExited:(e,t)=>{let a=(0,s.E)(t.payload);delete e[a]},dateRangeChanged:(e,t)=>{var a;let n=(0,s.E)(t.payload);l.caseReducers.dashboardInitialized(e,l.actions.dashboardInitialized(t.payload)),e[n].dateRange=null!=(a=t.payload.dateRange)?a:(0,i.V)(),e[n].intentDomain=null},intentDomainChanged:(e,t)=>{let a=(0,s.E)(t.payload);l.caseReducers.dashboardInitialized(e,l.actions.dashboardInitialized(t.payload)),e[a].intentDomain=t.payload.intentDomain},panelsChanged:(e,t)=>{let a=(0,s.E)(t.payload);l.caseReducers.dashboardInitialized(e,l.actions.dashboardInitialized(t.payload)),e[a].panelsEnabled=t.payload.panelsEnabled},modelVersionsChanged:(e,t)=>{let a=(0,s.E)(t.payload);l.caseReducers.dashboardInitialized(e,l.actions.dashboardInitialized(t.payload)),e[a].comparedModelVersions=t.payload.comparedModelVersions}},extraReducers:e=>{e.addMatcher(r.Im.endpoints.retrieveDashboardSettings.matchFulfilled,(e,{payload:t,meta:a})=>{e[(0,s.E)(a.arg.originalArgs)]=t}),e.addMatcher(r.Im.endpoints.saveDashboardSettings.matchFulfilled,(e,{payload:t,meta:a})=>{let n=(0,s.E)(a.arg.originalArgs);e[n]={...(0,o.S)(),...e[n],...t}})}}),d=l.reducer,{dateRangeChanged:u,panelsChanged:c,modelVersionsChanged:m,intentDomainChanged:p,dashboardExited:h,dashboardInitialized:E}=l.actions},710101:function(e,t,a){a.d(t,{sG:()=>r,t2:()=>s,tz:()=>n});let n=(0,a(335363).b)(),r=n.getSelectors(e=>e.llmPlayground.chats),s=n.getSelectors(e=>e.chats);n.getSelectors()},611571:function(e,t,a){a.d(t,{H:()=>r});let n=["claude-3-5-sonnet","claude-3-7-sonnet","deepseek-r1","llama3.1-8b","llama3.1-70b","llama3.1-405b","llama3.2-1b","llama3.2-3b","mistral-7b","mistral-large2","snowflake-llama-3.3-70b"];function r(e){return n.includes(e)}},17745:function(e,t,a){a.d(t,{Wd:()=>v,Iq:()=>N,SU:()=>M,rQ:()=>C,tv:()=>b});var n=a(680633),r=a(700577),s=a(727670),o=a(799787),i=a(511714),l=a(632189),d=a(141257),u=a(315183),c=a(833753),m=a(472418);let p=d.Z.injectEndpoints({endpoints:e=>({completeSQLQuery:e.query({queryFn:async e=>{let t=await u.IL.services.sqlQueryBackend.query(function(e){let{role:t,warehouse:a,...n}=e;return{sqlQuery:(0,c.q)(n),role:e.role,isInternal:!0,desc:"cortex-complete",...e.warehouse&&{warehouse:e.warehouse}}}(e));return{data:(0,m.V)(t)}}})})});var h=a(624206),E=a(608e3),y=a(747456),f=a(880002),g=a(710101);let S=(e,t,a)=>{var n,r;return null!=(r=null==(n=g.sG.selectMessageById(e,t,a))?void 0:n.messages)?r:[]},_=(0,y.createDraftSafeSelector)([S],e=>e.find(e=>e.role===f.s4.role.ASSISTANT));var A=a(62954),I=a(611571);let T={},R=d.Z.injectEndpoints({endpoints:e=>({getBaseModels:e.query({queryFn:(0,l.V)(async({coldbrew:e})=>{let{models:t}=await e.client().cortexApi.models();return{data:t}})}),generateStreamedCompletion:e.query({queryFn:(0,l.V)(async({cortexCompleteSupport:e},t,a)=>{let{model:n,settings:r,chatId:s,messageGroupId:i,role:l}=t,d=S(a.getState(),s,i);for await(let t of e.stream({model:n,messages:d,...r},l,{signal:a.signal}))try{let e=(0,o.h)(t.choices.at(0)).delta.content;e&&a.dispatch((0,E.w_)({chatId:s,messageGroupId:i,delta:e}))}catch(e){}return{data:_(a.getState(),s,i)}})}),generateSQLCompletion:e.query({queryFn:async(e,t)=>{let{chatId:a,messageGroupId:n,settings:r,model:o,...i}=e,l=S(t.getState(),a,n),d={...i,...r,model:o,messages:l},u=await t.dispatch(p.endpoints.completeSQLQuery.initiate(d,{forceRefetch:!0})).unwrap();if(t.signal.aborted)throw new s._("Cancelled by user");return t.dispatch((0,E.w_)({chatId:a,messageGroupId:n,delta:u.choices[0].messages})),{data:_(t.getState(),a,n)}}})})}),C=R.injectEndpoints({endpoints:e=>({getSupportedModels:e.query({queryFn:async(e,t)=>{let{role:a}=e,n=Promise.resolve([]);r.i.FEATURE_UI_ENABLE_LLM_PLAYGROUND()&&(n=t.dispatch(h.g1.endpoints.showModelsInAccount.initiate({modelTypes:[i.h.CortexFineTuned],role:a})).unwrap());let s=t.dispatch(R.endpoints.getBaseModels.initiate()).unwrap();return{data:{base:await s,finetuned:await n}}}}),generateCompletion:e.query({queryFn:async(e,t)=>{var a;let{role:n,warehouse:r,...s}=e,{chatId:o,messageGroupId:i,model:l}=s,d=(0,A.E)(t.getState())&&(0,I.H)(l);try{let a={forceRefetch:!0},r=d?R.endpoints.generateStreamedCompletion.initiate({...s,role:n},a):R.endpoints.generateSQLCompletion.initiate(e,a),l=t.dispatch(r);return T[o]||(T[o]={}),T[o][i]=t.abort,t.signal.addEventListener("abort",()=>{l.abort()}),{data:await l.unwrap()}}finally{null==(a=T[o])||delete a[i]}},serializeQueryArgs:({queryArgs:e,...t})=>(0,n.defaultSerializeQueryArgs)({...t,queryArgs:{chatId:e.chatId,messageGroupId:e.messageGroupId}})}),abortGenerateCompletion:e.query({queryFn:async({chatId:e,messageGroupId:t})=>{var a,n;return await (null==(n=T[e])||null==(a=n[t])?void 0:a.call(n,"Cancelled by user")),{data:{success:!0}}}})})}),{useGenerateCompletionQuery:O,useLazyGenerateCompletionQuery:N,useGetSupportedModelsQuery:v,useLazyAbortGenerateCompletionQuery:b,useGetBaseModelsQuery:M}=C},608e3:function(e,t,a){a.d(t,{Ab:()=>C,fB:()=>S,Xs:()=>O,TE:()=>v,bx:()=>f,uE:()=>I,zB:()=>h,p3:()=>p,bz:()=>y,vB:()=>g,w_:()=>T,Qo:()=>E,J0:()=>R,u5:()=>A,ZP:()=>m,Bf:()=>N});var n=a(747456),r=a(880002),s=a(799787),o=a(710101),i=a(17745),l=a(772994),d=a.n(l);let u=["claude-3-5-sonnet","llama3.2-3b","llama3.2-1b","llama3.1-405b","llama3.1-70b","llama3.1-8b","mistral-large2","mistral-7b"],c=(0,n.createSlice)({name:"llmPlayground",initialState:{chats:o.tz.getInitialState(),role:"",warehouse:"",areSettingsSynced:!1,isStreamingSupported:!0,defaultModel:void 0,isSettingsEditorOpen:!1},reducers:{playgroundInitialized:(e,t)=>{let{role:a,isStreamingSupported:n}=t.payload;c.caseReducers.roleChanged(e,c.actions.roleChanged({role:a})),c.caseReducers.warehouseChanged(e,c.actions.warehouseChanged({warehouse:t.payload.warehouse})),e.isStreamingSupported=n,c.caseReducers.chatAdded(e)},playgroundExited:e=>{c.caseReducers.roleChanged(e,c.actions.roleChanged({role:""})),c.caseReducers.warehouseChanged(e,c.actions.warehouseChanged({warehouse:""})),c.caseReducers.settingsSyncToggled(e,c.actions.settingsSyncToggled({synced:!1})),c.caseReducers.dataSourceChanged(e,c.actions.dataSourceChanged({source:void 0})),e.chats=o.tz.getInitialState()},roleChanged:(e,t)=>{e.role=t.payload.role},warehouseChanged:(e,t)=>{e.warehouse=t.payload.warehouse},settingsSyncToggled:(e,t)=>{let{synced:a}=t.payload;if(e.areSettingsSynced=a,t.payload.synced){let a=o.t2.selectChatIds(e),n=(0,s.h)(o.t2.selectChatById(e,t.payload.sourceChatId)).settings,r=a.map(e=>({id:e,changes:{settings:n}}));o.tz.updateManyChats(e.chats,r)}},dataSourceChanged:(e,t)=>{let{source:a}=t.payload;void 0===a?e.connectedData=void 0:e.connectedData={source:a,rowIndex:void 0}},dataRowChanged:(e,t)=>{let{rowIndex:a}=t.payload;(0,s.h)(e.connectedData).rowIndex=a},defaultModelChanged:(e,t)=>{e.defaultModel=t.payload.defaultModel},chatAdded:e=>{o.tz.addOneChat(e.chats,function(e){let{model:t}=e,a={id:(0,n.nanoid)(),model:t,settings:{},messages:[]};return d()(e,a)}({model:e.defaultModel}))},chatRemoved:(e,t)=>{o.tz.removeOneChat(e.chats,t.payload.chatId),1===o.t2.selectTotalChats(e)&&c.caseReducers.settingsSyncToggled(e,c.actions.settingsSyncToggled({synced:!1}))},responseStreamEventReceived:(e,t)=>{let{chatId:a,messageGroupId:n,delta:i}=t.payload,l=[...(0,s.h)(o.t2.selectMessageById(e,a,n)).messages];(0,s.h)(l.at(-1)).role!==r.s4.role.ASSISTANT&&l.push({role:r.s4.role.ASSISTANT,content:""});let d={...(0,s.h)(l.at(-1))};d.content+=i,l[l.length-1]=d,o.tz.updateOneMessage(e.chats,a,{id:n,changes:{messages:l}})},messageGroupAdded:(e,t)=>{let{messages:a}=t.payload;o.t2.selectChatIds(e).forEach(t=>{o.tz.addOneMessage(e.chats,t,function(e={}){let t={id:(0,n.nanoid)(),messages:[]};return d()(e,t)}({messages:a,connectedData:e.connectedData}))})},chatModelChanged:(e,t)=>{let{chatId:a,model:n}=t.payload;o.tz.updateOneChat(e.chats,{id:a,changes:{model:n}})},chatSettingsChanged:(e,t)=>{let{chatId:a,settings:n}=t.payload;o.tz.updateOneChat(e.chats,{id:a,changes:{settings:n}})},allChatsCleared:e=>{let t=o.t2.selectChatIds(e).map(e=>({id:e,changes:{messages:[]}}));o.tz.updateManyChats(e.chats,t)},settingsEditorToggled:(e,t)=>{e.isSettingsEditorOpen=t.payload.isOpen}},extraReducers:e=>{e.addMatcher(i.rQ.endpoints.getBaseModels.matchFulfilled,(e,t)=>{var a;let n=null==(a=function(e){let t=Object.fromEntries(e.map(e=>[e.name,e])),a=u.find(e=>!!t[e]),n=a&&t[a];return null!=n?n:null==e?void 0:e[0]}(t.payload))?void 0:a.name;c.caseReducers.defaultModelChanged(e,c.actions.defaultModelChanged({defaultModel:n}))})}}),m=c.reducer,{playgroundInitialized:p,playgroundExited:h,roleChanged:E,warehouseChanged:y,settingsSyncToggled:f,dataSourceChanged:g,dataRowChanged:S,defaultModelChanged:_,chatAdded:A,chatRemoved:I,responseStreamEventReceived:T,messageGroupAdded:R,chatModelChanged:C,chatSettingsChanged:O,allChatsCleared:N,settingsEditorToggled:v}=c.actions},360583:function(e,t,a){a.d(t,{l:()=>r});var n=a(710101);let r=(e,t)=>{var a;return null==(a=n.sG.selectChatById(e,t))?void 0:a.model}},973960:function(e,t,a){a.d(t,{o:()=>r});var n=a(710101);let r=(e,t)=>{var a;return null==(a=n.sG.selectChatById(e,t))?void 0:a.settings}},62954:function(e,t,a){a.d(t,{E:()=>r});var n=a(135224);let r=e=>(0,n.z)(e).isStreamingSupported},736889:function(e,t,a){a.d(t,{i:()=>r});var n=a(710101);let r=(e,t)=>n.sG.selectMessageIds(e,t).at(-1)},963999:function(e,t,a){a.d(t,{z:()=>r});var n=a(135224);let r=e=>(0,n.z)(e).role},135224:function(e,t,a){a.d(t,{z:()=>n});let n=e=>e.llmPlayground},337163:function(e,t,a){a.d(t,{Y:()=>r});var n=a(135224);let r=e=>(0,n.z)(e).warehouse},335363:function(e,t,a){a.d(t,{b:()=>i});var n=a(747456),r=a(799787);class s{constructor(){this.updateChatMessages=(e,t,a)=>this.chats.updateOne(e,{id:t,changes:{messages:a}}),this.createChatStateFromChat=e=>{let{messages:t,...a}=e,n=this.messages.addMany(this.messages.getInitialState(),t);return{...a,messages:n}},this.getMessagesByChatId=(e,t)=>{var a,n;return null!=(n=null==(a=this.chatsSelectors.selectById(e,t))?void 0:a.messages)?n:this.messages.getInitialState()},this.addOneChat=(e,t)=>this.chats.addOne(e,this.createChatStateFromChat(t)),this.addManyChats=(e,t)=>this.chats.addMany(e,t.map(this.createChatStateFromChat)),this.setOneChat=(e,t)=>this.chats.setOne(e,this.createChatStateFromChat(t)),this.setManyChats=(e,t)=>this.chats.setMany(e,t.map(this.createChatStateFromChat)),this.setAllChats=(e,t)=>this.chats.setAll(e,t.map(this.createChatStateFromChat)),this.removeOneChat=(e,t)=>this.chats.removeOne(e,t),this.removeManyChats=(e,t)=>this.chats.removeMany(e,t),this.removeAllChats=e=>this.chats.removeAll(e),this.updateOneChat=(e,t)=>{let{messages:a,...n}=t.changes,r=e;return void 0!==a&&(r=0===a.length?this.removeAllMessages(e,t.id):this.setAllMessages(e,t.id,a)),this.chats.updateOne(r,{...t,changes:n})},this.updateManyChats=(e,t)=>{let a=e;for(let e of t)a=this.updateOneChat(a,e);return a},this.upsertOneChat=(e,t)=>this.chats.upsertOne(e,this.createChatStateFromChat(t)),this.upsertManyChats=(e,t)=>this.chats.upsertMany(e,t.map(this.createChatStateFromChat)),this.addOneMessage=(e,t,a)=>this.updateChatMessages(e,t,this.messages.addOne(this.getMessagesByChatId(e,t),a)),this.addManyMessages=(e,t,a)=>this.updateChatMessages(e,t,this.messages.addMany(this.getMessagesByChatId(e,t),a)),this.setOneMessage=(e,t,a)=>this.updateChatMessages(e,t,this.messages.setOne(this.getMessagesByChatId(e,t),a)),this.setManyMessages=(e,t,a)=>this.updateChatMessages(e,t,this.messages.setMany(this.getMessagesByChatId(e,t),a)),this.setAllMessages=(e,t,a)=>this.updateChatMessages(e,t,this.messages.setAll(this.getMessagesByChatId(e,t),a)),this.removeOneMessage=(e,t,a)=>this.updateChatMessages(e,t,this.messages.removeOne(this.getMessagesByChatId(e,t),a)),this.removeManyMessages=(e,t,a)=>this.updateChatMessages(e,t,this.messages.removeMany(this.getMessagesByChatId(e,t),a)),this.removeAllMessages=(e,t)=>this.updateChatMessages(e,t,this.messages.removeAll(this.getMessagesByChatId(e,t))),this.updateOneMessage=(e,t,a)=>this.updateChatMessages(e,t,this.messages.updateOne(this.getMessagesByChatId(e,t),a)),this.updateManyMessages=(e,t,a)=>this.updateChatMessages(e,t,this.messages.updateMany(this.getMessagesByChatId(e,t),a)),this.upsertOneMessage=(e,t,a)=>this.updateChatMessages(e,t,this.messages.upsertOne(this.getMessagesByChatId(e,t),a)),this.upsertManyMessages=(e,t,a)=>this.updateChatMessages(e,t,this.messages.upsertMany(this.getMessagesByChatId(e,t),a)),this.chats=(0,n.createEntityAdapter)(),this.messages=(0,n.createEntityAdapter)(),this.chatsSelectors=this.chats.getSelectors(),this.messagesSelectors=this.messages.getSelectors()}}class o extends s{getSelectors(e){let t=e?this.chats.getSelectors(e):this.chatsSelectors,a=null!=e?e:e=>e,s=(0,n.createDraftSafeSelector)([a,(e,t)=>t],(e,t)=>this.getMessagesByChatId(e,t));return{selectChatIds:t.selectIds,selectChatEntities:(0,n.createDraftSafeSelector)([t.selectEntities],e=>Object.fromEntries(Object.entries(e).map(([e,t])=>[e,{...t,messages:this.messagesSelectors.selectAll(t.messages)}]))),selectAllChats:(0,n.createDraftSafeSelector)([t.selectAll],e=>e.map(e=>({...e,messages:this.messagesSelectors.selectAll(e.messages)}))),selectTotalChats:t.selectTotal,selectChatById:(0,n.createDraftSafeSelector)([t.selectById],e=>e&&{...e,messages:this.messagesSelectors.selectAll(e.messages)}),selectMessageIds:(0,n.createDraftSafeSelector)([s],e=>e.ids),selectMessageEntities:(0,n.createDraftSafeSelector)([s],e=>e.entities),selectAllMessages:(0,n.createDraftSafeSelector)([s],e=>e.ids.map(t=>(0,r.h)(e.entities[t]))),selectTotalMessages:(0,n.createDraftSafeSelector)([s],e=>e.ids.length),selectMessageById:(0,n.createDraftSafeSelector)([a,(e,t)=>t,(e,t,a)=>a],(e,t,a)=>{var n;return null==(n=e.entities[t])?void 0:n.messages.entities[a]})}}constructor(...e){super(...e),this.getInitialState=()=>this.chats.getInitialState()}}function i(){return new o}},782269:function(e,t,a){a.d(t,{S:()=>o});var n=a(889692),r=a.n(n),s=a(98527);function o(e){return e.rows.map(t=>Object.fromEntries(t.map((t,a)=>{let n=e.cols[a];return[r()(n.name),(0,s.r)(t,n.type)]})))}},98527:function(e,t,a){a.d(t,{r:()=>o});let n=["bool","boolean"],r=["date","timestamp_ltz","timestamp_ntz","timestamp_tz"],s=["object","variant","json","array",...n,"currency","fixed","number","real"];function o(e,t){if(r.includes(t))return new Date(e).getTime();if(n.includes(t))return"TRUE"===e;if(s.includes(t))try{return JSON.parse(e)}catch(e){return}return e}},607137:function(e,t,a){a.d(t,{ZP:()=>r,tP:()=>s});let n=(0,a(747456).createSlice)({name:"data-marketplace-exchange",initialState:{marketplaceTypeaheadInputValue:""},reducers:{setMarketplaceTypeaheadInputValue:(e,t)=>{var a;e.marketplaceTypeaheadInputValue=null!=(a=t.payload)?a:""}}}),r=n.reducer,{setMarketplaceTypeaheadInputValue:s}=n.actions},281303:function(e,t,a){a.d(t,{ZP:()=>r,xr:()=>s});let n=(0,a(747456).createSlice)({name:"native-applications",initialState:{applications:[]},reducers:{setNativeApplications:(e,t)=>{e.applications=t.payload}}}),r=n.reducer,{setNativeApplications:s}=n.actions},262039:function(e,t,a){a.d(t,{My:()=>i,ZP:()=>o,wT:()=>l});var n=a(747456);let r={http429count:0,lastNotifyNetworkStateDegraded:null},s=(0,n.createSlice)({name:"network-traffic-slice",initialState:()=>r,reducers:{incrementHttp429Count:e=>{e.http429count+=1},logNetworkStateDegraded:e=>{e.http429count=0,e.lastNotifyNetworkStateDegraded=Date.now()}}}),o=s.reducer,{incrementHttp429Count:i,logNetworkStateDegraded:l}=s.actions},289200:function(e,t,a){a.d(t,{X:()=>n,k:()=>r});let n={completion:"",responseTokens:0};function r(e){let t=!1,a=!1,n="",r="{{cursor}}";for(let s=0;s<e.length;s++){let o=e[s];if(("-"===o&&"-"===n||"/"===o&&"/"===n)&&(t=!0),"\n"===o&&(t=!1),"*"===o&&"/"===n&&(a=!0),"/"===o&&"*"===n){a=!1,n=o;continue}if(e.substring(s,s+r.length)===r)if(t||a)return!0;else break;n=o}return!1}},679182:function(e,t,a){a.d(t,{OD:()=>u,xN:()=>p,z9:()=>m});var n=a(880002),r=a(315183),s=a(761118),o=a(141257),i=a(289200),l=a(821830),d=a(754290);let u=o.Z.enhanceEndpoints({addTagTypes:["PixieDust_Completion"]}).injectEndpoints({endpoints:e=>({pixieDustCompletion:e.query({queryFn:async(e,{signal:t,getState:a,dispatch:o})=>{let u,{analyticsSupport:c}=r.IL.services,m=a(),p=new d.uW(c),{selectedCell:h,notebookIdentifier:E,notebook:y}=m.pixieDust,{copilotBackend:f}=r.IL.services;if(!E||!h||!y)throw Error("Notebooks state error, please refresh the page and try again");let g=p.getTelemetryJoinKey(),S=p.getNotebookIdentifier(E),_=p.getCellType(y,h),A=e.source.trim().replace("{{cursor}}","").length>0;if("SQL"!==_||!A||(0,i.k)(e.source))return{data:i.X};let I={[d.K3.REQUEST_ID]:g,[d.K3.NOTEBOOK_IDENTIFIER]:S,[d.K3.CELL_TYPE]:_,[d.K3.SURFACE]:d.Om.NOTEBOOK};p.trackAnalytics(d.NK.REQUEST,I),t.addEventListener("abort",()=>{});try{let t=Date.now();u=await f.inlineCompletion({surfaceType:"notebook",notebook:{...y,cells:y.cells.map(t=>t.id===h?{...t,source:e.source}:t)},selectedCellId:h,model:s.YP.INLINE1,overrides:{},contextToUse:"undefined",executionContext:{role:"SP_TESTER",warehouse:null,database:null,schema:null},semanticModel:void 0});let a=Date.now();o((0,l.n4)({requestId:g,responseTimestamp:Date.now()}));let n=p.getModelName(),r=p.getPromptVersion(),i=p.getTimeDiff(t,a),c={...I,[d.K3.MODEL_NAME]:n,[d.K3.PROMPT_VERSION]:r,[d.K3.RENDER_TIME_MS]:i};p.trackAnalytics(d.NK.RESPONSE,c);let m=u.content.filter(e=>"Code"===e.kind&&e.data.source).map(e=>"Code"===e.kind?e.data.source:""),E="";return m.length>0&&(E=m[0]),{data:{completion:E,responseTokens:0}}}catch(e){if(e instanceof Error&&!(e instanceof n.Mk))throw e}return{data:{completion:"",responseTokens:0}}},providesTags:["PixieDust_Completion"]}),logAcceptTelemetry:e.query({queryFn:(e,t)=>{let{analyticsSupport:a}=r.IL.services,n=t.getState().pixieDust.activeInlineCompletionResponse;if(!n)return{error:{status:500,error:"can't retrieve current inline completion information",data:null}};let{requestId:s,responseTimestamp:o}=n,i=new d.uW(a),u=i.getTimeDiff(o,Date.now());t.dispatch((0,l.xS)());let c={[d.K3.REQUEST_ID]:s,[d.K3.TIME_SHOWN_MS]:u};return i.trackAnalytics(d.NK.ACCEPT,c),{data:"successfully logged telemetry event"}}})})}),{usePixieDustCompletionQuery:c,useLazyPixieDustCompletionQuery:m,useLazyLogAcceptTelemetryQuery:p}=u},821830:function(e,t,a){a.d(t,{Ds:()=>l,Du:()=>i,E9:()=>d,ZP:()=>o,n4:()=>u,xS:()=>c});var n=a(747456),r=a(679182);let s=(0,n.createSlice)({name:"pixie-dust",initialState:{},reducers:{setNotebook:(e,t)=>{e.notebook=t.payload},setSelectedCell:(e,t)=>{e.selectedCell=t.payload},setNotebookIdentifier:(e,t)=>{e.notebookIdentifier=t.payload},addActiveInlineCompletionResponse:(e,t)=>{e.activeInlineCompletionResponse=t.payload},removeActiveInlineCompletionResponse:e=>{delete e.activeInlineCompletionResponse}},extraReducers:e=>{e.addMatcher(r.OD.endpoints.pixieDustCompletion.matchFulfilled,(e,{payload:t,meta:a})=>{e.mostRecentCompletionRequest=a.arg.originalArgs,e.mostRecentCompletionResponse=t})}}),o=s.reducer,{setNotebook:i,setSelectedCell:l,setNotebookIdentifier:d,addActiveInlineCompletionResponse:u,removeActiveInlineCompletionResponse:c}=s.actions},754290:function(e,t,a){a.d(t,{K3:()=>m,NK:()=>c,Om:()=>u,uW:()=>p});var n,r,s,o=a(781708),i=a(761118),l=a(620400),d=a(393481),u=((n={}).WORKSHEET="worksheet",n.NOTEBOOK="notebook",n),c=((r={}).REQUEST="copilot-inline-suggestion-requested",r.ABORT="copilot-inline-suggestion-aborted",r.RESPONSE="copilot-inline-suggestion-shown",r.ACCEPT="copilot-inline-suggestion-chosen",r),m=((s={}).REQUEST_ID="requestId",s.NOTEBOOK_IDENTIFIER="notebookIdentifier",s.CELL_TYPE="cellType",s.SURFACE="surface",s.MODEL_NAME="modelName",s.RENDER_TIME_MS="renderTimeMs",s.PROMPT_VERSION="promptVersion",s.RESPONSE_TOKENS="responseTokens",s.TIME_SHOWN_MS="timeShownMs",s);class p{getTelemetryJoinKey(){return o.Z().toString()}getNotebookIdentifier(e){return(0,l.m)(e)}getCellType(e,t){var a;let[n]=e.cells.filter(e=>e.id===t),r=null!=(a=null==n?void 0:n.metadata.language)?a:"";return n.cell_type===i.I5.Markdown&&(r=d.hb.cell_type.MARKDOWN.toLocaleUpperCase()),r.toUpperCase()}getModelName(){return"code-llama"}getPromptVersion(){return"code-llama-fill-in-the-middle-v1"}getTimeDiff(e,t){return t-e}getAnalyticsFormat(e){return{data:e}}trackAnalytics(e,t){this.analyticsSupport.track(e,this.getAnalyticsFormat(t),!1)}constructor(e){this.analyticsSupport=e}}},393481:function(e,t,a){var n,r,s,o,i,l,d,u,c;a.d(t,{hb:()=>r,ut:()=>s}),(i=(o=n||(n={})).language||(o.language={})).PYTHON="PYTHON",i.SQL="SQL",(d=(l=r||(r={})).cell_type||(l.cell_type={})).CODE="CODE",d.MARKDOWN="MARKDOWN",(c=(u=s||(s={})).client||(u.client={})).SNOWSIGHT_NOTEBOOK="SNOWSIGHT_NOTEBOOK",c.SNOWSIGHT_WORKSHEET="SNOWSIGHT_WORKSHEET"},740819:function(e,t,a){a.d(t,{Q2:()=>u,Uy:()=>o,ZP:()=>r,b0:()=>i,pD:()=>d,u:()=>l,yH:()=>s});let n=(0,a(747456).createSlice)({name:"query-history-slice",initialState:{initialFilter:null,paginationData:[],isRefresh:!1,paginationEndTimeStamp:"",abortedQueryIds:[]},reducers:{addPaginationData:(e,t)=>{t.payload&&(e.paginationData=[...e.paginationData,t.payload])},setPaginationData:(e,t)=>{t.payload?e.paginationData=[t.payload]:e.paginationData=[]},shiftPaginationData:(e,t)=>{t.payload&&(e.paginationData=[t.payload,...e.paginationData])},setPaginationEndTimeStamp:(e,t)=>{e.paginationEndTimeStamp=t.payload},setInitialFilter:(e,t)=>{e.initialFilter=t.payload},addAbortedQueryId:(e,t)=>{t.payload&&e.abortedQueryIds.push(t.payload)}}}),r=n.reducer,{addPaginationData:s,shiftPaginationData:o,setPaginationData:i,setPaginationEndTimeStamp:l,setInitialFilter:d,addAbortedQueryId:u}=n.actions},608622:function(e,t,a){a.d(t,{H9:()=>i,ZP:()=>o});var n=a(747456),r=a(772133);let s=(0,n.createSlice)({name:"universal-search",initialState:{inputValue:"",id:"",spellCheckOverride:"",spellCorrectedQuery:""},reducers:{setInputValue:(e,t)=>{var a;e.inputValue=null!=(a=t.payload)?a:""}},extraReducers:e=>{e.addMatcher(r.bg.endpoints.snowscopeSearch.matchFulfilled,(e,{payload:t})=>{let{id:a,spellCheckOverride:n="",spellCorrectedQuery:r=""}=t;e.id=a,e.spellCheckOverride=null!=n?n:"",e.spellCorrectedQuery=null!=r?r:""})}}),o=s.reducer,{setInputValue:i}=s.actions},772133:function(e,t,a){a.d(t,{a$:()=>c,bg:()=>d,iz:()=>m,rC:()=>u});var n=a(781708),r=a(315183),s=a(141257),o=a(36648);let i="Snowscope_",l=[`${i}SnowscopeBrowse`,`${i}SnowscopeSearch`,`${i}SnowscopeSearchSuggest`],d=s.Z.enhanceEndpoints({addTagTypes:l}).injectEndpoints({endpoints:e=>({snowscopeSearch:e.query({queryFn:async e=>{let{searchRequest:t,role:a,secondaryRoles:s,type:i}=e,{snowScopeSupport:l,analyticsSupport:d}=r.IL.services,u={...t,fetchJoinKey:n.Z().toString(),snowscopeFetchPerformanceMeasure:(0,o.B7)()};u.corpus||(u.corpus="all"),(0,o.tP)(),d.track(o.X6,{data:u},!1);let c="search"===i||"auto"===i&&!!t.query,m={role:a,secondaryRoles:s},p=await (c?l.search(t,m):l.browse(t,m)),h=p.id;return d.track(o.sd,{data:{...u,searchResponseId:h,snowscopeFetchPerformanceMeasure:(0,o.B7)()}},!1),{data:p}},providesTags:["Snowscope_SnowscopeSearch"]}),snowscopeSearchSuggest:e.query({queryFn:async e=>{let{snowScopeSupport:t}=r.IL.services;return{data:await t.suggest(e)}},providesTags:["Snowscope_SnowscopeSearchSuggest"]}),snowscopeSendFeedback:e.query({queryFn:async e=>{let{snowScopeSupport:t}=r.IL.services;return{data:await t.feedback(e)}}})})}),{useSnowscopeSearchQuery:u,useLazySnowscopeSearchSuggestQuery:c,useLazySnowscopeSendFeedbackQuery:m}=d},36648:function(e,t,a){a.d(t,{B7:()=>o,X6:()=>n,sd:()=>r,tP:()=>s});let n="snowscope-search-pre-fetch",r="snowscope-search-post-fetch";function s(){window.performance&&(window.performance.clearMarks("SNOWSCOPE_PERFORMANCE_MARK_FETCH_START"),performance.mark("SNOWSCOPE_PERFORMANCE_MARK_FETCH_START"))}function o(){return window.performance&&0!==window.performance.getEntriesByName("SNOWSCOPE_PERFORMANCE_MARK_FETCH_START").length?window.performance.measure("SNOWSCOPE_FETCH_PERFORMANCE_MEASURE","SNOWSCOPE_PERFORMANCE_MARK_FETCH_START").duration:0}},93056:function(e,t,a){a.d(t,{c:()=>o,o:()=>r});var n=a(984526);let r={subject:"",description:"",attachments:[],queries:[{queryId:"",comment:"",autoFocus:!1}],category:"",subcategory:"",severity:a(236472).zb.SEV4,selectedWatchers:[],area:null},s=(e,t,a)=>{e[t]=a},o={resetCaseFormState:e=>{e.caseForm={...r}},setCaseFormField:(e,{payload:t})=>{let{fieldName:a,value:n}=t;s(e.caseForm,a,n)},setCaseFormState:(e,{payload:t})=>{e.caseForm={...e.caseForm,...t}},setCaseFormStateFromQueryData:(e,{payload:t})=>{e.caseForm={...e.caseForm,...(0,n.Lm)(t)}}}},197072:function(e,t,a){a.d(t,{k:()=>r,v:()=>n});let n={caseStatusFilter:a(236472).lN.OPEN,userFilter:"",accountFilter:"",searchValue:"",severityFilter:""},r={patchFilters:(e,{payload:t})=>{e.caseFilters={...e.caseFilters,...t}},resetFilters:e=>{e.caseFilters=n}}},984526:function(e,t,a){a.d(t,{bl:()=>c.bl,a$:()=>u.a$,Sv:()=>u.Sv,zb:()=>c.zb,Lm:()=>p,p2:()=>y,Oi:()=>f,Dm:()=>c.Dm,D6:()=>E,MV:()=>g,KK:()=>I,pA:()=>u.pA,Do:()=>N,E3:()=>u.E3,ec:()=>h,Im:()=>u.Im,kh:()=>c.kh,y8:()=>c.y8,Mp:()=>c.Mp,lN:()=>c.lN,n$:()=>c.n$}),a(93056);var n=a(957191),r=a.n(n),s=a(65283),o=a.n(s),i=a(847345),l=a(638356),d=a(46225),u=a(376125),c=a(236472);let m=["subject","description","category","subcategory","severity","queryId","queryComment"],p=e=>{let{queryId:t,queryComment:a,severity:n,...s}=o()(r()(e,m),e=>!!e);return{...t&&{queries:[{queryId:t,comment:a||"",autoFocus:!1}]},...n in c.zb&&{severity:Number(n)},...s}},h=()=>(0,d.CG)(({support:{caseForm:{area:e,subject:t,description:a,subcategory:n,queries:r,selectedWatchers:s}}})=>!!(t&&t.length<=R&&a&&(n||e)&&a.length<=C&&S(r)&&_(r)&&s.length<=O)),E=e=>{let t=(0,d.CG)(t=>t.support.caseForm[e],l.shallowEqual),a=(0,l.useDispatch)();return[t,(0,i.useCallback)(t=>{a((0,u.RH)({fieldName:e,value:t}))},[a,e])]},y=()=>{let e=(0,l.useDispatch)();return(0,i.useCallback)(()=>{e((0,u.cZ)())},[e])},f=()=>{let e=(0,l.useDispatch)();return(0,i.useCallback)(()=>e((0,u.xB)()),[e])},g=()=>{let e=(0,l.useDispatch)();return(0,i.useCallback)(t=>e((0,u.m0)(t)),[e])},S=e=>e.every(e=>!e.queryId.length||I(e.queryId)),_=e=>e.every(e=>{var t;return(!((t=e).comment.length>0)||t.queryId.length>0)&&e.comment.length<=T}),A=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/u,I=e=>A.test(e),T=3e3,R=255,C=32e3,O=30;a(197072);let N=()=>{let e=(0,l.useSelector)(e=>e.support.caseFilters,l.shallowEqual),t=(0,l.useDispatch)();return{filters:e,patchFilters:(0,i.useCallback)(e=>t((0,u.Im)(e)),[t])}}},376125:function(e,t,a){a.d(t,{a$:()=>S,pA:()=>_,E3:()=>u,Sv:()=>g,Im:()=>p,m0:()=>y,xB:()=>E,ZP:()=>m,cZ:()=>A,RH:()=>f});var n={};a.r(n),a.d(n,{closeReopenCaseModal:()=>d,openReopenCaseModal:()=>l});var r=a(747456),s=a(93056),o=a(197072),i=a(781708);let l=(e,{payload:t})=>{e.caseReopenModal={opened:!0,caseNumber:t.caseNumber}},d=e=>{e.caseReopenModal={opened:!1}},u={caseFilters:{...o.v},caseForm:{...s.o},caseReopenModal:{opened:!1},caseViewError:null,viewedSuggestions:{ids:[]},suggestionSession:{id:""}},c=(0,r.createSlice)({name:"support",initialState:u,reducers:{...o.k,...s.c,...n,generateSuggestionSessionId:e=>{e.suggestionSession.id=(0,i.Z)()},markSuggestionAsViewed:(e,{payload:t})=>{e.viewedSuggestions.ids.push(t)},setCaseViewError:(e,{payload:t})=>{e.caseViewError=t}}}),m=c.reducer,{patchFilters:p,resetFilters:h,resetCaseFormState:E,setCaseFormStateFromQueryData:y,setCaseFormField:f,openReopenCaseModal:g,closeReopenCaseModal:S,markSuggestionAsViewed:_,generateSuggestionSessionId:A}=c.actions},236472:function(e,t,a){a.d(t,{Dm:()=>c,Mp:()=>y,bl:()=>h,kh:()=>g,lN:()=>m,n$:()=>f,y8:()=>E,zb:()=>p});var n,r,s,o,i,l,d,u,c=((n={}).PENDING="pending",n.SUCCESS="success",n.ERROR="error",n),m=((r={}).ALL="",r.OPEN="OPEN",r.RESOLVED="RESOLVED",r.ACTION_REQUIRED="ACTION_REQUIRED",r.ESCALATED="ESCALATED",r),p=((s={})[s.SEV1=1]="SEV1",s[s.SEV2=2]="SEV2",s[s.SEV3=3]="SEV3",s[s.SEV4=4]="SEV4",s),h=((o={}).SUPPORT_CASE="Technical Issue",o),E=((i={}).AWAITING_CUSTOMER="Awaiting Customer",i.CLOSED="Closed",i.CUSTOMER_RESPONDED="Customer Responded",i.CUSTOMER_CLOSED="Customer Closed",i.NEW="New",i.SOLUTION_PROVIDED="Solution Provided",i.WORK_IN_PROGRESS="Work in Progress",i),y=((l={}).SUPPORT_ERROR="SUPPORT_ERROR",l.SUPPORT_BAD_REQUEST="SUPPORT_BAD_REQUEST",l.SUPPORT_NOT_FOUND="SUPPORT_NOT_FOUND",l.SUPPORT_ACCESS_DENIED="SUPPORT_ACCESS_DENIED",l.SUPPORT_INCOMPLETE_SETUP="SUPPORT_INCOMPLETE_SETUP",l),f=((d={}).NONE="none",d.MINOR="minor",d.MAJOR="major",d.CRITICAL="critical",d),g=((u={}).PENDING="pending",u.UPLOADED="uploaded",u.ERROR="error",u)},736175:function(e,t,a){a.d(t,{PD:()=>c,ZP:()=>i,hT:()=>l,il:()=>u,sm:()=>d});var n=a(747456),r=a(98005);let s={loggedEvents:new Set,dismissedTips:new Map},o=(0,n.createSlice)({name:"tip-delivery",initialState:s,reducers:{setLoggedEvents:(e,t)=>{e.loggedEvents.add((0,r.c)(t.payload))},setLoggedPromotionEvents:(e,t)=>{e.loggedEvents.add((0,r.y)(t.payload))},setDismissedTips:(e,t)=>{let a=e.dismissedTips.get(t.payload.channelName);void 0===a&&(a=new Set),a.add(t.payload.tipType),e.dismissedTips.set(t.payload.channelName,a)},setDismissedPromotions:(e,t)=>{let a=e.dismissedTips.get(t.payload.channelName);void 0===a&&(a=new Set),a.add(t.payload.promotionName),e.dismissedTips.set(t.payload.channelName,a)}}}),i=o.reducer,{setDismissedTips:l,setDismissedPromotions:d,setLoggedEvents:u,setLoggedPromotionEvents:c}=o.actions},98005:function(e,t,a){function n(e){return`${e.channel}:${e.tipType}:${e.eventType}`}function r(e){return`${e.channel}:${e.promotionName}:${e.eventType}`}a.d(t,{c:()=>n,y:()=>r})},982640:function(e,t,a){a.d(t,{Hz:()=>o,Tp:()=>s,ZP:()=>i,jy:()=>r});let n=(0,a(747456).createSlice)({name:"urc",initialState:{appServerUrl:"",userKey:"",decodedUserKey:""},reducers:{urcInitialized:(e,t)=>{Object.assign(e,t.payload)},roleUpdated:(e,t)=>{e.role=t.payload},secondaryRolesUpdated:(e,t)=>{e.secondaryRoles=t.payload}}}),{urcInitialized:r,roleUpdated:s,secondaryRolesUpdated:o}=n.actions,i=n.reducer},896032:function(e,t,a){a.d(t,{g:()=>r});var n=a(879865);function r(e){return e.payload.namespace===n.TV}},46225:function(e,t,a){a.d(t,{CG:()=>o,TL:()=>s,qr:()=>r});var n=a(638356);let r=n.useStore,s=n.useDispatch,o=n.useSelector},119231:function(e,t,a){a.d(t,{e:()=>n});let n=(0,a(594696).createSelector)([e=>e],e=>e.analytics)},990667:function(e,t,a){a.d(t,{K:()=>tF});var n=a(747456),r=a(881988),s=a(399808),o=a(616975),i=a(710296),l=a(650680),d=a(512289),u=a(695501),c=a(469581),m=a(541111),p=a(475015),h=a.n(p),E=a(457845);let y="revisionsByWorksheet",f="draftByWorksheet",g=(0,n.createSlice)({name:"revisions",initialState:{[y]:{},[f]:{}},reducers:{},extraReducers:e=>{e.addCase(u.mt,(e,t)=>{var a,n,r;let{models:s}=t.payload;if(s.drafts)for(let[t,n]of Object.entries(s.drafts)){let r=(0,E.d)(t),s=null==(a=e[f])?void 0:a[r],o={modifiedTime:(null==n?void 0:n.modifiedTime)||null,executionContext:n.executionContext,filters:n.paramRefs,version:n.version,query:n.query,queryRange:n.queryRange,queryLanguageConfig:n.queryLanguageConfig};(!s||h()(o.version,null==s?void 0:s.version))&&(e[f][r]=o)}if(s.queries)for(let[t,a]of Object.entries(s.queries)){let s=(0,E.d)(t),o=a.snowflakeRequestId,i=null==(n=e[y])?void 0:n[s],l=null==i?void 0:i[o];if(i||(e[y][s]={}),!l){let t={query:a.query,filters:a.paramRefs,version:a.version,createdAt:a.startDate?(r=new Date(a.startDate),r.getTime()):null,queryLanguageConfig:a.queryLanguageConfig};e[y][s][o]=t}}})}}).reducer;var S=a(133318),_=a(486311),A=a(176179),I=a.n(A),T=a(578073);let R={[T.J]:{},activeWorksheet:null},C=(e,t)=>{let{pid:a,name:n,folderId:r,orgId:s,ownerId:o,runner:i,projectType:l,url:d,slug:u,queryLanguage:c,executionContext:m,editable:p,runnable:h}=t,y=(0,E.d)(a);return{...e,[y]:{...e[y]||{},name:n,folderId:r,orgId:I()(s),ownerId:I()(o),runner:I()(i),type:l,url:d,slug:u,...c?{queryLanguage:c}:{},worksheetId:y,executionContext:m,editable:p,runnable:h}}},O=(0,n.createSlice)({name:"worksheets",initialState:R,reducers:{updateActiveWorksheet:(e,t)=>{e.activeWorksheet=t.payload.worksheetId}},extraReducers:e=>{e.addCase(u.mt,(e,t)=>{let a=t.payload.models;if(a.queries)for(let[,t]of Object.entries(a.queries))e[T.J]=C(e[T.J],t)})}}),N=O.reducer,{updateActiveWorksheet:v}=O.actions,b=(0,r.UY)({boba:u.ZP,displayOptions:c.ZP,transforms:_.ZP,selection:S.ZP,executions:m.ZP,worksheets:N,revisions:g});var M=a(141257);let w=(0,n.createSlice)({name:"app",initialState:{loading:!1},reducers:{beginApp:e=>{e.loading=!0}}}),L=w.reducer,{beginApp:D}=w.actions;var P=a(609513),x=a(688253),k=a(466473),U=a(152066),F=a(318265),q=a(448433),$=a(608e3),B=a(607137),G=a(281303),V=a(262039),j=a(821830),Q=a(740819),H=a(608622),W=a(376125),K=a(736175),J=a(982640),z=a(209268);let Y=e=>J.Tp.match(e),Z=function(e,t){var a,n;let{payload:r}=e;r!==(null==(n=t.getOriginalState())||null==(a=n.urc)?void 0:a.role)&&sessionStorage.removeItem(z.W8)},X=e=>{e({matcher:Y,effect:Z})};var ee=a(411733),et=a(315183);let ea=e=>async function(t,a){return await e(t,a,et.IL.services)},en=e=>async function(t,a){return await e(t,a,et.IL.services)};var er=a(277334),es=a(904605),eo=a(66172),ei=a.n(eo),el=a(880002);let ed=e=>ei()(e,e=>{if("date"===e.formatType)return{columnIndex:e.columnIndex,formatType:el.W0.formatType.DATE,dateFormat:e.dateFormat};{let t={columnIndex:e.columnIndex,formatType:el.W0.formatType.NUMBER};return void 0!==e.thousandsSep&&(t.thousandsSep=e.thousandsSep),void 0!==e.isPercent&&(t.isPercent=e.isPercent),void 0!==e.showFullPrecision&&(t.showFullPrecision=e.showFullPrecision),void 0!==e.precision&&(t.precision=e.precision),t}}),eu=e=>_.H4.match(e)||_.Ob.match(e)||c.$U.match(e),ec=async function(e,t,a){let{coldbrew:n}=a,{queryId:r,isCurrentUserQueryRunner:s}=e.payload;if(!s)return;let o=(0,es.w)(t.getState(),r),i=(0,er.V)(t.getState(),r),l={};o&&(l.formats=ed(o)),i&&(l.columnSizes=i);try{await n.client().snowflakeQueryApi.patchQueryMetadata(r,{displayOptions:l})}catch(e){ee.cM.error(e,{message:"Failed to save display options on server"})}},em=e=>{e({matcher:eu,effect:ea(ec)})};var ep=a(700577),eh=a(963590),eE=a.n(eh),ey=a(610327),ef=a(896032),eg=a(595527),eS=a(876466),e_=a(998382),eA=a(269802),eI=a(22322),eT=a(825746),eR=a(612620);let eC=(e,t,a)=>{let n,r,{queryStoreBridge:s}=a;if((0,eS.o)()){var o,i,l,d;if(o=e,m.VX.match(o)||(i=e,m.z5.match(i))){let{worksheetId:t,requestId:a}=e.payload;n=t,r=a}else{if(l=e,v.match(l)){let{worksheetId:a}=e.payload;n=a,r=(0,eT.XG)(t.getState(),a)}else{let a;if((0,ef.g)(e))a=e.payload.value;else{if(d=e,u.mt.match(d)){let{models:n}=e.payload,r=n.queries;if(r){let e=(0,eI.W1)(t.getState());for(let[,t]of Object.entries(r))(0,E.d)(t.pid)===e&&(a=t)}}}a&&(n=(0,E.d)(a.pid),r=(0,eT.XG)(t.getState(),n))}}if(s.isStandaloneWorksheet(null!=n?n:"")&&n&&r&&!ep.i.UI_ENABLE_APEX_FEATURE_42()){let e=(0,eR.s)(t.getState(),n,r),s=e&&(0,ey.o)(e),{results:o}=(0,eA.r)(t.getState(),n,r),i=(0,eg.G)(e,o),l=(0,e_.Z)(o);e&&(!s||i||l)&&(ee.cM.info(`QueryExecution: ${n}`,"triggering tracking of active execution",r),a.worksheetExecutionSupport.triggerTrackingActiveExecution({worksheetId:n,requestId:r}).catch(eE()))}}},eO=(0,n.isAnyOf)(m.VX,m.z5,u._g,u.mt,v),eN=e=>{e({matcher:eO,effect:ea(eC)})},ev=async(e,t,a)=>{let{worksheetId:n}=e.payload,{backendHttp:r}=a,s=`/queries/${n}/cancel`;try{await r.post(s,{projectId:n,action:"cancel"})}catch(e){ee.cM.error(e)}finally{t.dispatch((0,m.Km)({worksheetId:n}))}},eb=e=>{e({actionCreator:m.zi,effect:ea(ev)})};var eM=a(635725);let ew=(e,t,a)=>{let{worksheetId:n,runAllQueries:r,executionRunEvent:s}=e.payload,o=a.worksheetExecutionSupport;return r?o.triggerAllStatementsExecution({worksheetId:n,executionRunEvent:s}):o.triggerQueryExecution({worksheetId:n,executionRunEvent:s})},eL=e=>{e({actionCreator:eM.X,effect:ea(ew)})},eD=e=>{eb(e),eL(e),eN(e)};var eP=a(777334),ex=a.n(eP);a(337902);var ek=a(783665),eU=a(115791);let eF=function(e,t){let{queryId:a}=e.meta.arg.originalArgs;t.dispatch((0,_.hY)({queryId:a}))},eq=async function(e,t,a){let{coldbrew:n}=a,{queryId:r,requestBody:s}=e.meta.arg.originalArgs,{queryResponseId:o,queryResponseStatus:i}=e.payload,l=t.getState().analytics.transforms[r],d=(0,ek.r)(l),u=(0,ek.r)((null==s?void 0:s.transformSpec)||{}),c=i&&i.summary!==el.F.summary.RUNNING;if(o&&!ex()(u,d)&&!c)try{await n.client().snowflakeQueryApi.patchQueryMetadata(o,{status:eU.q.status})}catch(e){ee.cM.error(e,{message:`Failed to auto cancel transform with query id ${o}`})}},e$=e=>{e({matcher:M.Z.endpoints.coldbrewCreateTransformIfNotExists.matchRejected,effect:eF})},eB=e=>{e({matcher:M.Z.endpoints.coldbrewCreateTransformIfNotExists.matchFulfilled,effect:en(eq)})};var eG=a(442321),eV=a(730598);let ej=async function(e,t,a){let{coldbrew:n}=a,r=e.payload.queryId,s=(0,eG.C)(t.getState()),o=Object.keys(s).findLast(e=>s[e].transformsQueryId===r);if(!o)return;t.dispatch((0,_.hY)({queryId:o}));let{lastSucceededTransformsState:i}=s[o];if((null==i?void 0:i.queryResponseId)!==r)try{await n.client().snowflakeQueryApi.patchQueryMetadata(o,{mostRecentTransform:null!=i?i:{}})}catch(e){ee.cM.error(e,{message:"Failed to revert most recent transform on server"})}},eQ=e=>{e({actionCreator:eV.d,effect:ea(ej)})},eH=async function(e,t,a){let{queryId:n}=e.payload,r=(0,eG.C)(t.getState());if(!n||!r[n])return;let{coldbrew:s}=a,{lastSucceededTransformsState:o,previousTransformQueryId:i}=r[n],l=null==o?void 0:o.queryResponseId;if(i&&i!==l)try{await s.client().snowflakeQueryApi.patchQueryMetadata(i,{status:eU.q.status})}catch(e){ee.cM.error(e,{message:`Failed to auto cancel transform with query id ${i}`})}},eW=e=>{e({matcher:_.k2,effect:ea(eH)})};var eK=a(14897);let eJ=(e,t)=>{t.dispatch(eK.N.endpoints.loadChats.initiate(void 0,{forceRefetch:!0}))},ez=[eK.N.endpoints.generateSICompletion,eK.N.endpoints.updateChat],eY=e=>{e({matcher:(0,n.isAnyOf)(...ez.map(e=>e.matchFulfilled)),effect:eJ})};var eZ=a(384549),eX=a(735546);let e0=(e,t)=>eX.yt.selectMessageIds(e,t).at(-1),e1=(e,t)=>{let a=e0(e,t);if(void 0!==a)return eX.yt.selectMessageById(e,t,a)},e2=(e,t)=>{let a=e1(t.getState(),e);(null==a?void 0:a.role)==="assistant"&&0!==(0,eZ.F)(t.getState(),e,a.id,"cortex_analyst_sql_exec").length&&t.dispatch(eK.N.endpoints.generateAnalystSQLExecResultsForMessage.initiate({chatId:e,messageId:a.id}))},e4=e=>{e({matcher:eK.N.endpoints.generateSICompletion.matchFulfilled,effect:(e,t)=>e2(e.meta.arg.originalArgs.chatId,t)}),e({matcher:eK.N.endpoints.loadChat.matchFulfilled,effect:(e,t)=>e2(e.meta.arg.originalArgs.id,t)})};var e3=a(799787),e7=a(632189),e6=a(996111),e5=a(115533);let e8=(0,e7.V)(({ambientUserContext:e},t,a)=>{var n;let r=(0,e3.h)(e.currentRole()),s=null!=(n=(0,e5.p)(a.getState()))?n:"";a.dispatch(e6.nA.endpoints.getAgentsConfig.initiate({role:r,warehouse:s}))}),e9=e=>{e({actionCreator:F.q4,effect:e8})},te=(e,t)=>{var a;let{chatId:n}=e.payload;2>=eX.yt.selectTotalMessages(t.getState(),n)&&(null==(a=eX.yt.selectChatById(t.getState(),n))?void 0:a.title)==="New Chat"&&t.dispatch(eK.N.endpoints.generateTitle.initiate({chatId:n}))},tt=e=>{e({actionCreator:F.U5,effect:te})},ta=(e,t)=>{let{chatId:a}=e.meta.arg.originalArgs;t.dispatch((0,F.IS)({chatId:a,content:e.payload,isHidden:!0}))},tn=e=>{e({matcher:eK.N.endpoints.generateAnalystSQLExecResultsForMessage.matchFulfilled,effect:ta})};var tr=a(80127),ts=a(594696),to=a(100138),ti=a(974587),tl=a(476331);let td=(0,ts.createSelector)([(e,t)=>{let a=(0,ti.B)(e,t);if(a)return(0,to._)(e,a)},tl.S],(e,t)=>{var a;if(!e||!t)return;let n=new Set(t.enabledToolNames);return{...e,...e.tools&&{tools:null==(a=e.tools)?void 0:a.filter(e=>{var t;return n.has((0,e3.h)(null==(t=e.tool_spec)?void 0:t.name))})},...e.tool_resources&&{tool_resources:Object.fromEntries(Object.entries(e.tool_resources).filter(([e])=>n.has(e)))}}}),tu=(e,t)=>{let{chatId:a}=e.payload,{settings:n}=(0,e3.h)(eX.yt.selectChatById(t.getState(),a)),r=(0,e3.h)(td(t.getState(),a)),s=eX.yt.selectAllMessages(t.getState(),a);tr.v.addAction("SNOWFLAKE_INTELLIGENCE_USER_SUBMITTED_PROMPT",{chatId:a}),t.dispatch(eK.N.endpoints.generateSICompletion.initiate({chatId:a,messages:s,settings:n,agentConfig:r}))},tc=e=>{e({matcher:(0,n.isAnyOf)(F.IS,F.$o),effect:tu})},tm=e=>{eY(e),tc(e),tt(e),e4(e),tn(e),e9(e)};var tp=a(465304);let th=(e,t,a)=>{a.dispatch(tp.hu.endpoints.updateRunStatus.initiate({...t,run:e}))},tE=["INVOCATION_IN_PROGRESS","COMPUTATION_IN_PROGRESS"],ty=e=>{e({matcher:tp.hu.endpoints.listRuns.matchFulfilled,effect:(e,t)=>{var a;let n=null==(a=e.payload)?void 0:a.find(e=>tE.includes(e.status));n&&th(n,e.meta.arg.originalArgs,t)}})};var tf=a(710101),tg=a(17745),tS=a(360583),t_=a(973960),tA=a(736889),tI=a(963999),tT=a(337163);let tR=(e,t)=>{let a=t.getState();for(let e of tf.sG.selectChatIds(a)){let n=(0,e3.h)((0,tA.i)(a,e)),r=(0,e3.h)((0,tS.l)(a,e)),s=(0,e3.h)((0,t_.o)(a,e)),o=(0,tI.z)(a),i=(0,tT.Y)(a);t.dispatch(tg.rQ.endpoints.generateCompletion.initiate({chatId:e,messageGroupId:n,model:r,role:o,warehouse:i,settings:s}))}},tC=e=>{e({actionCreator:$.J0,effect:tR})},tO=e=>{tC(e)};var tN=a(339265);let tv=function(e,t,a){ee.cM.info("modelsArrivedListener","action",Object.keys(e.payload));let{modelReceiver:n}=a;n.receive(e.payload)},tb=e=>{e({actionCreator:tN.t,effect:ea(tv)})},tM=function(e,t){ee.cM.info("urcListener","action",e)},tw=e=>{e({actionCreator:J.jy,effect:tM})},tL=(0,n.createListenerMiddleware)(),tD=tL.startListening,tP=()=>{tw(tD),tb(tD),eD(tD),eQ(tD),e$(tD),em(tD),eB(tD),eW(tD),X(tD),tO(tD),tm(tD),ty(tD)};(0,s.MD)();let tx=()=>"true"===localStorage.getItem(i.F.FORCE_REDUX_DEVTOOLS_ON_IN_PROD),tk={analytics:b,app:L,copilot:P.ZP,cortexAnalyst:x.ZP,cortexSearch:k.ZP,bulkFailover:l.rt,featureStore:U.ZP,llmPlayground:$.ZP,observabilityMonitoring:q.ZP,marketplace:B.ZP,pixieDust:j.ZP,search:H.ZP,snowflakeIntelligence:F.ZP,urc:J.ZP,support:W.ZP,nativeApps:G.ZP,tipDelivery:K.ZP,appstate:o.ki,queryHistory:Q.ZP,networkTraffic:V.ZP,costAnomaly:d.ZP,[M.Z.reducerPath]:M.Z.reducer},tU=tq(),tF=e=>{let t=(0,n.configureStore)({reducer:tU,preloadedState:e,middleware:e=>e({serializableCheck:!1,immutableCheck:{warnAfter:1e4}}).prepend(tL.middleware).concat(M.Z.middleware),devTools:tx()});tL.clearListeners(),tP();let a={};return t.injectReducer=(e,n)=>{a[e]=n,t.replaceReducer(tq(a))},t};function tq(e={}){return(0,r.UY)({...tk,...e})}},30619:function(e,t,a){a.d(t,{CA:()=>s,Uq:()=>n,bb:()=>r});let n="/models/queryResults/uuid",r="/models/queries/uuid",s="/models/drafts"},879865:function(e,t,a){a.d(t,{TV:()=>n,ui:()=>s,xe:()=>r});let n="boba:queries",r="boba:queryResults",s="boba:drafts"},601562:function(e,t,a){a.d(t,{$:()=>r,P:()=>n});let n="queryStoreInternals",r="executionsByWorksheet"},682858:function(e,t,a){function n(e){return void 0!==e&&(e.columns.length>0||e.rows.length>0||void 0!==e.cells)}function r(e){return void 0!==e&&void 0!==e.cells}function s(e){return void 0!==e&&e.rows.length>0&&0===e.columns.length&&void 0===e.cells}function o(e){return void 0!==e&&e.columns.length>0&&0===e.rows.length&&void 0===e.cells}function i(e){return void 0!==e&&o(e)&&1===e.columns.length&&e.columns[0][0]+1===e.columns[0][1]}function l(e){return void 0!==e&&s(e)&&1===e.rows.length&&e.rows[0][0]+1===e.rows[0][1]}function d(e){return void 0!==e&&void 0!==e.cells&&r(e)&&0===e.rows.length&&0===e.columns.length&&1===e.cells.range.width&&1===e.cells.range.height}function u(e){return r(e)&&0===e.rows.length&&0===e.columns.length&&(e.cells.range.width>1||e.cells.range.height>1)}function c(e,t){return void 0!==e&&1===e.rows.length&&0===e.rows[0][0]&&e.rows[0][1]===t}a.d(t,{Gz:()=>n,M$:()=>o,NB:()=>u,Qp:()=>l,Tv:()=>i,WU:()=>c,c7:()=>s,gW:()=>d})},578073:function(e,t,a){a.d(t,{J:()=>n});let n="worksheetsById"},511714:function(e,t,a){a.d(t,{h:()=>r});var n,r=((n={}).CortexML="CORTEX_ML",n.CortexFineTuned="CORTEX_FINETUNED",n.DocIntelligence="DOC_INTELLIGENCE",n.UserModel="USER_MODEL",n.DocumentAI="DOC_AI",n)},761118:function(e,t,a){function n(e){return["python","sql","javascript","unknown"].includes(e)}a.d(t,{AF:()=>O,Bw:()=>I,E7:()=>b,FX:()=>A,I5:()=>C,Me:()=>y,Ml:()=>M,T4:()=>S,TB:()=>_,YP:()=>f,Z1:()=>N,_W:()=>T,fV:()=>v,ft:()=>g,nd:()=>R,t7:()=>n});var r,s,o,i,l,d,u,c,m,p,h,E,y=((r={}).GPT4="gpt-4",r.GPT4_UNFILTERED="gpt-4-unfiltered",r.GPT4_FAILSAFE="gpt-4-failsafe",r.GPT4_SEMANTIC="gpt-4-semantic",r.MISTRAL_EXPANDED="mistral-expanded",r.MISTRAL_CHAIN="mistral-chain",r.MISTRAL_SEMANTIC="mistral-semantic",r.MODEL1="model-1",r.MODEL2="model-2",r.MODEL1_CONVERSATIONAL="model-1-conv",r.REKA_CORE="reka-core",r.REKA_SEMANTIC="reka-semantic",r.LLAMA_SEMANTIC="llama-3-semantic",r.SNOWFLAKE_SEMANTIC="snowflake-hosted-semantic",r.MARKETPLACE="marketplace-copilot",r.COPILOT_MISTRAL_LARGE2="copilot-mistral-large-2",r.COPILOT_SONNET="copilot-sonnet",r.COPILOT_DEV_MISTRAL_LARGE2="copilot-dev-mistral-large-2",r.COPILOT_DEV_SONNET="copilot-dev-sonnet",r.CLAUDE_3_5_SONNET="claude-3-5-sonnet",r.MISTRAL_LARGE_2="mistral-large2",r),f=((s={}).INLINE1="inline-1",s.INLINE2="inline-2",s);let g={ENGINEER:["model-1","model-1-conv","model-2"],SNOWPILOT_TESTER:["model-1","model-1-conv","model-2","gpt-4","gpt-4-unfiltered","gpt-4-failsafe","gpt-4-semantic","mistral-expanded","mistral-chain","mistral-semantic","reka-core","reka-semantic","llama-3-semantic"]},S=["gpt-4","gpt-4-unfiltered","gpt-4-failsafe","gpt-4-semantic","model-1-conv"];var _=((o={}).Message="message",o.Done="done",o.Error="error",o),A=((i={}).ENABLED="enabled",i.LOADING="loading",i.DISABLED="disabled",i),I=((l={}).Pending="pending",l.Streaming="streaming",l.Completed="completed",l.Failure="failure",l),T=((d={}).CONFIGURATION_ERROR="CONFIGURATION_ERROR",d.GENERIC="GENERIC",d),R=((u={}).Python="python",u.SQL="sql",u),C=((c={}).Markdown="markdown",c.Code="code",c),O=((m={}).optimize="optimize",m.explain="explain",m.ask="ask",m),N=((p={}).table="Tables / Views",p.column="Columns",p),v=((h={})[h.SAMPLE_VALUE_JOB_FAILED=1]="SAMPLE_VALUE_JOB_FAILED",h[h.WAREHOUSE_NOT_SELECTED=2]="WAREHOUSE_NOT_SELECTED",h[h.USER_SETTINGS_FAILED_TO_LOAD=3]="USER_SETTINGS_FAILED_TO_LOAD",h),b=((E={}).MESSAGE="MESSAGE",E.MENU="MENU",E);let M="COPILOT_USER"},824607:function(e,t,a){a.d(t,{z:()=>i});var n=a(880735),r=a(292822);let s=[{name:"Measures to Facts",description:"Migrates legacy measures to facts format",apply:a(948632).e},{name:"Relationship Enums",description:"Converts relationship enums to string format",apply:function(e){return(null==e?void 0:e.relationships)?{...e,relationships:e.relationships.map(e=>({...e,joinType:e.joinType?(0,r.o0)(e.joinType):void 0,relationshipType:e.relationshipType?(0,r.QO)(e.relationshipType):void 0}))}:e}}],o=["name","description","tables","metrics","relationships","verified_queries"];function i(e,t={includeVerifiedQueries:!0}){if(!e)return"";let a={...e};!1===t.includeVerifiedQueries&&delete a.verifiedQueries;let r=function(e,t){if(null!==e&&"object"==typeof e){let a={};for(let n of t)if(n in e){let t=e[n];"function"!=typeof t&&(a[n]=t)}for(let n in e)if(!t.includes(n)){let t=e[n];"function"!=typeof t&&(a[n]=t)}return a}return e}(function e(t,a,n=100){return a>=n?t:Array.isArray(t)?t.map(t=>e(t,a+1,n)):null!==t&&"object"==typeof t?Object.entries(t).reduce((t,[r,s])=>("function"!=typeof s&&(t[r.replace(/[A-Z]/gu,e=>`_${e.toLowerCase()}`)]=e(s,a+1,n)),t),{}):t}(s.reduce((e,t)=>t.apply(e),a),0),o);return(0,n.$w)(r,{lineWidth:-1}).trim()}},292822:function(e,t,a){a.d(t,{$v:()=>s,AM:()=>r,Mo:()=>o,QO:()=>d,ku:()=>l,o0:()=>i});var n=a(323144);let r={[n.Eu.aggregation_type_unknown]:"UNKNOWN",[n.Eu.sum]:"SUM",[n.Eu.avg]:"AVG",[n.Eu.median]:"MEDIAN",[n.Eu.min]:"MIN",[n.Eu.max]:"MAX",[n.Eu.count]:"COUNT",[n.Eu.count_distinct]:"COUNT_DISTINCT",[n.Eu.UNRECOGNIZED]:"UNRECOGNIZED"},s=Object.fromEntries(Object.entries(r).map(([e,t])=>[t,Number(e)])),o={inner:n.AH.inner,left_outer:n.AH.left_outer,right_outer:n.AH.right_outer,full_outer:n.AH.full_outer,cross:n.AH.cross,unknown:n.AH.join_type_unknown};function i(e){var t;let a=null==(t=Object.entries(o).find(([t,a])=>a===e))?void 0:t[0];return void 0===a&&"string"==typeof e&&e in o?e:null!=a?a:"unknown"}let l={one_to_one:n.nm.one_to_one,many_to_one:n.nm.many_to_one,one_to_many:n.nm.one_to_many,many_to_many:n.nm.many_to_many,unknown:n.nm.relationship_type_unknown};function d(e){var t;let a=null==(t=Object.entries(l).find(([t,a])=>a===e))?void 0:t[0];return void 0===a&&"string"==typeof e&&e in l?e:null!=a?a:"unknown"}},948632:function(e,t,a){a.d(t,{e:()=>n});function n(e){return e.tables?{...e,tables:e.tables.map(e=>{if(!e.measures)return e;let t={...e,facts:[...e.facts||[],...e.measures]};return delete t.measures,t})}:e}},323144:function(e,t,a){a.d(t,{AH:()=>i,Eu:()=>o,nm:()=>l});var n,r,s,o=((n={})[n.aggregation_type_unknown=0]="aggregation_type_unknown",n[n.sum=1]="sum",n[n.avg=2]="avg",n[n.median=7]="median",n[n.min=3]="min",n[n.max=4]="max",n[n.count=5]="count",n[n.count_distinct=6]="count_distinct",n[n.UNRECOGNIZED=-1]="UNRECOGNIZED",n),i=((r={})[r.join_type_unknown=0]="join_type_unknown",r[r.inner=1]="inner",r[r.left_outer=2]="left_outer",r[r.full_outer=3]="full_outer",r[r.cross=4]="cross",r[r.right_outer=5]="right_outer",r[r.UNRECOGNIZED=-1]="UNRECOGNIZED",r),l=((s={})[s.relationship_type_unknown=0]="relationship_type_unknown",s[s.one_to_one=1]="one_to_one",s[s.many_to_one=2]="many_to_one",s[s.one_to_many=3]="one_to_many",s[s.many_to_many=4]="many_to_many",s[s.UNRECOGNIZED=-1]="UNRECOGNIZED",s)},515963:function(e,t,a){a.d(t,{f:()=>n});let n={messageDelta:"message.delta",error:"error",done:"done"}}}]);
//# sourceMappingURL=67269-a24ae3fea2e0bc88.js.map